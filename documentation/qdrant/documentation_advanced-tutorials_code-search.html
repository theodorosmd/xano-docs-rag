<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta charset=UTF-8><title>Search Through Your Codebase - Qdrant</title>
<link rel=icon href=https://qdrant.tech/favicon/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=https://qdrant.tech/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://qdrant.tech/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://qdrant.tech/favicon/favicon-16x16.png><link rel=manifest href=https://qdrant.tech/favicon/site.webmanifest><link rel=mask-icon href=https://qdrant.tech/favicon/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#2b5797"><meta name=msapplication-config content="/favicon/browserconfig.xml"><meta name=theme-color content="#ffffff"><meta name=partition content="qdrant"><link href=https://qdrant.tech/css/search/search.min.09596ee2b3c94d0ac82a1c33199cabdb3e0210b1ee46aaf1515200e9e484d05dd9e27cc1e861c58cc2e582af162f63b8e180ff2a12f7a6592b7aeaa0a7125130.css rel=stylesheet integrity="sha512-CVlu4rPJTQrIKhwzGZyr2z4CELHuRqrxUVIA6eSE0F3Z4nzB6GHFjMLlgq8WL2O44YD/KhL3plkreuqgpxJRMA=="><link href=https://qdrant.tech/css/documentation.min.de204cdcfc410689a41c17bcdad0a34f2caaa50cc8505c820adaab481cef2d69a920b0a32e0d624701c29487e3271b694559d98c5047cbfaa5aa475f638011e5.css rel=stylesheet integrity="sha512-3iBM3PxBBomkHBe82tCjTyyqpQzIUFyCCtqrSBzvLWmpILCjLg1iRwHClIfjJxtpRVnZjFBHy/qlqkdfY4AR5Q=="><meta name=generator content="Hugo 0.141.0"><meta name=description content="Qdrant is an Open-Source Vector Database and Vector Search Engine written in Rust. It provides fast and scalable vector similarity search service with convenient API."><meta name=keywords content="vector search engine,neural network,matching,SaaS,approximate nearest neighbor search,image search,recommender system,vectors,knn algorithm,hnsw,vector search,embeddings,similarity,simaes networks,BERT,transformer,word2vec,fasttext,qdrant"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@id":"https://qdrant.tech/documentation/advanced-tutorials/code-search/#article","@type":"Article","abstract":"Navigate Your Codebase with Semantic Search and Qdrant Time: 45 min Level: Intermediate You too can enrich your applications with Qdrant semantic search In this tutorial we describe how you can use Qdrant to navigate a codebase to help you find relevant code snippets As an example we will use the Qdrant source code itself which is mostly written in RustThis tutorial might not work on code bases that are not disciplined or structured For good code search you may need to refactor the project first The approach We want to search codebases using natural semantic queries and searching for code based on similar logic You can set up these tasks with embeddings:","author":{"@type":"Organization","name":"Qdrant","url":"https://qdrant.tech/"},"dateModified":"0001-01-01 00:00:00 +0000 UTC","datePublished":"0001-01-01 00:00:00 +0000 UTC","description":"","headline":"Search Through Your Codebase","image":[""],"name":"Search Through Your Codebase","url":"https://qdrant.tech/documentation/advanced-tutorials/code-search/","wordCount":"1883"},{"@id":"https://qdrant.tech/documentation/advanced-tutorials/code-search/#organization","@type":"Organization","address":{"@type":"PostalAddress","addressCountry":"DE","addressLocality":"Berlin","addressRegion":"Berlin","postalCode":"10115","streetAddress":"Chausseestra√üe 86"},"contactPoint":{"@type":"ContactPoint","contactType":"customer support","email":"info@qdrant.com","telephone":"+49 3040797694"},"description":"Qdrant is an Open-Source Vector Database and Vector Search Engine written in Rust. It provides fast and scalable vector similarity search service with convenient API.","email":"info@qdrant.com","founders":[{"@type":"Person","name":"map[email:info@qdrant.tech name:Andrey Vasnetsov]"},{"@type":"Person","name":"Andre Zayarni"}],"foundingDate":"2021","keywords":["vector search engine","neural network","matching","SaaS","approximate nearest neighbor search","image search","recommender system","vectors","knn algorithm","hnsw","vector search","embeddings","similarity","simaes networks","BERT","transformer","word2vec","fasttext","Qdrant"],"legalName":"Qdrant Solutions GmbH","location":"Berlin, Germany","logo":"https://qdrant.tech/images/logo_with_text.png","name":"Qdrant","sameAs":["https://github.com/qdrant/qdrant","https://qdrant.to/discord","https://www.youtube.com/channel/UC6ftm8PwH1RU_LM1jwG0LQA","https://www.linkedin.com/company/qdrant/","https://twitter.com/qdrant_engine"],"url":"https://qdrant.tech"}]}</script><meta property="og:url" content="https://qdrant.tech/documentation/advanced-tutorials/code-search/"><meta property="og:type" content="website"><meta property="og:title" content="Search Through Your Codebase - Qdrant"><meta name=twitter:card content="summary_large_image"><meta name=twitter:domain content="qdrant"><meta name=twitter:url content="https://qdrant.tech/documentation/advanced-tutorials/code-search/"><meta name=twitter:title content="Search Through Your Codebase - Qdrant"><meta property="og:description" content="Qdrant is an Open-Source Vector Database and Vector Search Engine written in Rust. It provides fast and scalable vector similarity search service with convenient API."><meta name=twitter:description content="Qdrant is an Open-Source Vector Database and Vector Search Engine written in Rust. It provides fast and scalable vector similarity search service with convenient API."><meta name=image property="og:image" content="https://qdrant.tech/images/previews/social-preview-D.png"><meta name=image property="og:image:secure_url" content="https://qdrant.tech/images/previews/social-preview-D.png"><meta property="og:image:type" content="image/jpeg"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name=twitter:image:src content="https://qdrant.tech/images/previews/social-preview-D.png"><link rel=canonical href=https://qdrant.tech/documentation/advanced-tutorials/code-search/><script type=text/javascript src=//js-eu1.hsforms.net/forms/embed/v2.js></script><script src=https://qdrant.tech/js/documentation.min.594fc9226f6fb87b8c3b0cafb9d5c0b0bcd95f47d292b929aab04315e0506706b2f376dc4fae9961dc3082138cb19d45b2a3370ee8e881bbf4b8c91dcb735c32.js></script></head><body><main><header class=docs-header><div class="main-menu z-5"><a href=https://qdrant.tech/><div class=logo><img class=logo__img src=https://qdrant.tech/img/qdrant-logo.svg alt=logo></div></a><div class="d-flex d-xl-none justify-content-end align-items-center gap-4"><div class="d-block d-xl-none"><button role=button class=theme-switch></button></div><button type=button class=main-menu__trigger><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M1 12H23" stroke="#e1e5f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M1 5H23" stroke="#e1e5f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M1 19H23" stroke="#e1e5f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button></div><ul class=main-menu__links><li class=main-menu__item><a class=menu-linkactive href=https://qdrant.tech/documentation/>Qdrant</a></li><li class=main-menu__item><a class=menu-link href=https://qdrant.tech/documentation/cloud-intro/>Cloud</a></li><li class=main-menu__item><a class=menu-link href=https://qdrant.tech/documentation/build/>Build</a></li><li class=main-menu__item><a class=menu-link href=https://qdrant.tech/articles/>Learn</a></li><li class=main-menu__item><a class=menu-link href=https://api.qdrant.tech/api-reference target=_blank>API Reference</a></li></ul><div class=main-menu__buttons><div class=main-menu__buttons-input><button class="qdr-search-input-btn q-input input_md input_light-bg" type=button name=search data-target=#searchModal>
Search</button></div><button role=button class=theme-switch></button>
<a data-metric-loc=nav href=https://cloud.qdrant.io/login class="menu-link mx-3" target=_blank>Log in</a>
<a data-metric-loc=nav href=https://cloud.qdrant.io/signup class="button button_contained button_sm" target=_blank>Start Free</a></div></div><div class=menu-mobile><div class=menu-mobile__header><div class=logo><img class=logo__img src=https://qdrant.tech/img/qdrant-logo.svg alt=logo></div><div class="d-flex d-xl-none justify-content-end align-items-center gap-4"><div class="d-block d-xl-none"><button role=button class=theme-switch></button></div><button type=button class=menu-mobile__close><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><g id="Close"><path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M19.778 5.63606C20.1685 5.24554 20.1685 4.61237 19.778 4.22185 19.3874 3.83132 18.7543 3.83132 18.3637 4.22185L11.9998 10.5858 5.63586 4.22185c-.39052-.39053-1.02369-.39053-1.41421.0C3.83112 4.61237 3.83112 5.24554 4.22165 5.63606L10.5856 12l-6.364 6.364C3.83108 18.7545 3.83108 19.3877 4.2216 19.7782 4.61213 20.1687 5.24529 20.1687 5.63582 19.7782l6.36398-6.364 6.364 6.364C18.7543 20.1687 19.3875 20.1687 19.778 19.7782 20.1685 19.3877 20.1685 18.7545 19.778 18.364L13.414 12l6.364-6.36394z" fill="#e1e5f0"/></g></svg></button></div></div><div class=main-menu__buttons-input><button class="qdr-search-input-btn q-input input_md input_light-bg" type=button name=search data-target=#searchModal>
Search</button></div><ul class=menu-mobile__items><li class=menu-mobile__item data-path=menu-0><div class=menu-mobile__item-content><a class=active href=https://qdrant.tech/documentation/><svg width="16" height="16" viewBox="0 0 16 16" fill="#e1e5f0"><g id="Menu/Documentation"><path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M4.25 1c-1.10092.0-2.12247.23681-2.88689.64443C.620129 2.04063.0 2.67297.0 3.5v11c0 .2761.223858.5.5.5s.5-.2239.5-.5c0-.278.21937-.6456.83364-.9732C2.42647 13.2107 3.27992 13 4.25 13 5.22008 13 6.07353 13.2107 6.66636 13.5268c.61427.3276.83364.6952.83364.9732.0.2761.22386.5.5.5s.5-.2239.5-.5c0-.278.21937-.6456.833640000000001-.9732C9.92647 13.2107 10.7799 13 11.75 13S13.5735 13.2107 14.1664 13.5268C14.7806 13.8544 15 14.222 15 14.5c0 .2761.2239.5.5.5s.5-.2239.5-.5V3.5C16 2.67297 15.3799 2.04063 14.6369 1.64443 13.8725 1.23681 12.8509 1 11.75 1s-2.12247.23681-2.88689.64443C8.53799 1.8178 8.2364 2.03638 8 2.29671c-.2364-.26033-.53799-.47891-.86311-.65228C6.37247 1.23681 5.35092 1 4.25 1zM1.36311 12.6444C1.23778 12.7113 1.11595 12.7848 1 12.8649V3.5c0-.27797.21937-.64563.83364-.97318C2.42647 2.21069 3.27992 2 4.25 2c.97008.0 1.82353.21069 2.41636.52682C7.28063 2.85437 7.5 3.22203 7.5 3.5v9.3649C7.38405 12.7848 7.26222 12.7113 7.13689 12.6444 6.37247 12.2368 5.35092 12 4.25 12 3.14908 12 2.12753 12.2368 1.36311 12.6444zM8.5 12.8649C8.61595 12.7848 8.73778 12.7113 8.86311 12.6444 9.62753 12.2368 10.6491 12 11.75 12S13.8725 12.2368 14.6369 12.6444C14.7622 12.7113 14.8841 12.7848 15 12.8649V3.5C15 3.22203 14.7806 2.85437 14.1664 2.52682 13.5735 2.21069 12.7201 2 11.75 2s-1.82353.21069-2.41636.52682C8.71937 2.85437 8.5 3.22203 8.5 3.5v9.3649z"/></g></svg>
Qdrant</a></div></li><li class=menu-mobile__item data-path=menu-1><div class=menu-mobile__item-content><a href=https://qdrant.tech/documentation/cloud-intro/><svg width="16" height="16" viewBox="0 0 16 16" fill="#e1e5f0"><g id="Menu/Cloud"><path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M7.5 2C4.57416 2 2.18128 4.28566 2.00983 7.16851.8403 7.57763.0 8.68965.0 10c0 1.6571 1.34286 3 3 3H13c1.6571.0 3-1.3429 3-3 0-1.65714-1.3429-3-3-3L12.9776 7.00009C12.7249 4.19714 10.3686 2 7.5 2zM3.00107 7.48137 3.00008 7.47308C3.01457 5.0006 5.02412 3 7.5 3c2.47599.0 4.4856 2.00079 4.4999 4.47342L11.9987 7.4836C11.9969 7.50027 11.995 7.52348 11.995 7.551 11.995 7.701 12.0623 7.84308 12.1785 7.93804 12.2946 8.03301 12.4472 8.07082 12.5942 8.04106 12.726 8.01438 12.8617 8 13 8c1.1049.0 2 .89514 2 2C15 11.1049 14.1049 12 13 12H3C1.89514 12 1 11.1049 1 10 1 9.03225 1.68901 8.22422 2.60364 8.04017 2.83708 7.9932 3.005 7.78812 3.005 7.55 3.005 7.52154 3.00291 7.49773 3.00107 7.48137z"/></g></svg>
Cloud</a></div></li><li class=menu-mobile__item data-path=menu-2><div class=menu-mobile__item-content><a href=https://qdrant.tech/documentation/build/><svg width="16" height="16" viewBox="0 0 16 16" fill="#e1e5f0"><g id="Menu/Blog"><path id="Union" fill-rule="evenodd" clip-rule="evenodd" d="M0 1.5C0 1.22386.223858 1 .5 1h5c.27614.0.5.22386.5.5v5c0 .27614-.22386.5-.5.5H.5C.223858 7 0 6.77614.0 6.5v-5zM1 2V6H5V2H1zm7 .5c0-.27614.22386-.5.5-.5h7c.2761.0.5.22386.5.5s-.2239.5-.5.5h-7C8.22386 3 8 2.77614 8 2.5zM8.5 6c-.27614.0-.5.22386-.5.5s.22386.5.5.5h7c.2761.0.5-.22386.5-.5s-.2239-.5-.5-.5h-7zM0 10.5c0-.2761.223858-.5.5-.5h15c.2761.0.5.2239.5.5s-.2239.5-.5.5H.5c-.276142.0-.5-.2239-.5-.5zM.5 14c-.276142.0-.5.2239-.5.5s.223858.5.5.5h15c.2761.0.5-.2239.5-.5s-.2239-.5-.5-.5H.5z"/></g></svg>
Build</a></div></li><li class=menu-mobile__item data-path=menu-3><div class=menu-mobile__item-content><a href=https://qdrant.tech/articles/><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="#e1e5f0"><g id="Group"><path id="Vector" d="M10.084 1.84094l4.059 4.059" stroke-linecap="round" stroke-linejoin="round"/><path id="Vector_2" d="M8.49188 2.72406c-1.22044-.53042-2.59304-.59475-3.85774-.1808-1.2647.41395-2.33363 1.27742-3.00426 2.4268l2.34 2.34" stroke-linecap="round" stroke-linejoin="round"/><path id="Vector_3" d="M13.2657 7.47302C13.8062 8.69691 13.8769 10.077 13.4645 11.3497c-.4125 1.2728-1.2792 2.3491-2.4348 3.0233l-2.35001-2.35" stroke-linecap="round" stroke-linejoin="round"/><path id="Vector_4" d="M6.81217 13.049l-3.861-3.861S6.24917.983 15.5002.5c-.523 9.211-8.68803 12.549-8.68803 12.549z" stroke-linecap="round" stroke-linejoin="round"/><path id="Vector_5" d="M3.59892 12.4008C3.34181 12.1441 2.99331 12 2.62995 12c-.36335.0-.71186.1441-.96897.4008-.46665.4664-.63131 1.941-.65931 2.2322C.997021 14.6793 1.0021 14.726 1.01659 14.7701 1.03108 14.8143 1.05465 14.8549 1.08579 14.8895 1.11693 14.924 1.15495 14.9516 1.19741 14.9705 1.23987 14.9895 1.28583 14.9994 1.33233 14.9995 1.34298 15.0002 1.35367 15.0002 1.36433 14.9995 1.65565 14.9715 3.1316 14.8063 3.59759 14.3405 3.85501 14.0834 3.99975 13.7346 4 13.3709 4.00025 13.0072 3.85599 12.6582 3.59892 12.4008z" stroke-linecap="round" stroke-linejoin="round"/><path id="Vector_6" d="M9 8c.55228.0 1-.44772 1-1S9.55228 6 9 6 8 6.44772 8 7s.44772 1 1 1z"/></g></svg>
Learn</a></div></li><li class=menu-mobile__item data-path=menu-4><div class=menu-mobile__item-content><a href=https://api.qdrant.tech/api-reference target=_blank><svg width="16" height="16" viewBox="0 0 16 16" fill="#e1e5f0"><g id="Menu/Roadmap" clip-path="url(#clip0_7182_4311)"><path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M13.5 1c-.8284.0-1.5.67157-1.5 1.5S12.6716 4 13.5 4 15 3.32843 15 2.5 14.3284 1 13.5 1zM11 2.5C11 1.11929 12.1193.0 13.5.0S16 1.11929 16 2.5 14.8807 5 13.5 5 11 3.88071 11 2.5zM2.5 12c-.82843.0-1.5.6716-1.5 1.5S1.67157 15 2.5 15 4 14.3284 4 13.5 3.32843 12 2.5 12zM0 13.5C0 12.1193 1.11929 11 2.5 11S5 12.1193 5 13.5 3.88071 16 2.5 16 0 14.8807.0 13.5zM3.65901 1.65901C4.08097 1.23705 4.65326 1 5.25 1s1.16903.23705 1.59099.65901C7.26295 2.08097 7.5 2.65326 7.5 3.25v9.5c0 .862.34241 1.6886.9519 2.2981C9.0614 15.6576 9.88805 16 10.75 16c.862.0 1.6886-.3424 2.2981-.9519S14 13.612 14 12.75V6.5c0-.27614-.2239-.5-.5-.5s-.5.22386-.5.5v6.25C13 13.3467 12.7629 13.919 12.341 14.341 11.919 14.7629 11.3467 15 10.75 15S9.58097 14.7629 9.15901 14.341C8.73705 13.919 8.5 13.3467 8.5 12.75V3.25C8.5 2.38805 8.15759 1.5614 7.5481.951903 6.9386.34241 6.11195.0 5.25.0S3.5614.34241 2.9519.951903C2.34241 1.5614 2 2.38805 2 3.25V9.5c0 .27614.22386.5.5.5s.5-.22386.5-.5V3.25c0-.59674.23705-1.16903.65901-1.59099z"/></g><defs><clipPath id="clip0_7182_4311"><rect width="16" height="16" fill="#fff"/></clipPath></defs></svg>
API Reference</a></div></li></ul><div class=docs-menu><div id=sidebar class=docs-menu__content><nav class=docs-menu__links><h3 class=docs-menu__links-title>Getting Started</h3><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/overview/>What is Qdrant?</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/overview/vector-search/>Understanding Vector Search in Qdrant</a></li></ul></nav></details><div class=docs-menu__links-group><div class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/quickstart/>Local Quickstart</a></div></div><div class=docs-menu__links-group><div class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/interfaces/>API & SDKs</a></div></div><div class=docs-menu__links-group><div class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/web-ui/>Qdrant Web UI</a></div></div><h3 class=docs-menu__links-title>User Manual</h3><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/concepts/>Concepts</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/collections/>Collections</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/points/>Points</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/vectors/>Vectors</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/payload/>Payload</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/search/>Search</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/explore/>Explore</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/hybrid-queries/>Hybrid Queries</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/filtering/>Filtering</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/optimizer/>Optimizer</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/storage/>Storage</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/indexing/>Indexing</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/snapshots/>Snapshots</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/guides/installation/>Guides</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/installation/>Installation</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/administration/>Administration</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/running-with-gpu/>Running with GPU</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/capacity-planning/>Capacity Planning</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/optimize/>Optimize Performance</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/multiple-partitions/>Multitenancy</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/distributed_deployment/>Distributed Deployment</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/quantization/>Quantization</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/monitoring/>Monitoring & Telemetry</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/configuration/>Configuration</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/security/>Security</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/usage-statistics/>Usage Statistics</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/common-errors/>Troubleshooting</a></li></ul></nav></details><h3 class=docs-menu__links-title>Ecosystem</h3><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/fastembed/>FastEmbed</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/fastembed/fastembed-quickstart/>Quickstart</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/fastembed/fastembed-semantic-search/>FastEmbed & Qdrant</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/fastembed/fastembed-splade/>Working with SPLADE</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/fastembed/fastembed-colbert/>Working with ColBERT</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/fastembed/fastembed-rerankers/>Reranking with FastEmbed</a></li></ul></nav></details><div class="docs-menu__links-group external-link"><div class=docs-menu__links-group-heading><a href=https://github.com/qdrant/mcp-server-qdrant target=_blank>Qdrant MCP Server</a></div></div><h3 class=docs-menu__links-title>Tutorials</h3><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/beginner-tutorials/>Vector Search Basics</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/beginner-tutorials/search-beginners/>Semantic Search 101</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/beginner-tutorials/neural-search/>Build a Neural Search Service</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/beginner-tutorials/hybrid-search-fastembed/>Setup Hybrid Search with FastEmbed</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/beginner-tutorials/retrieval-quality/>Measure Search Quality</a></li></ul></nav></details><details class="docs-menu__links-group link-group active" open><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/advanced-tutorials/>Advanced Retrieval</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/advanced-tutorials/reranking-hybrid-search/>Reranking in Hybrid Search</a></li><li class="docs-menu__links-submenu-item
active"><a href=https://qdrant.tech/documentation/advanced-tutorials/code-search/>Search Through Your Codebase</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/advanced-tutorials/collaborative-filtering/>Build a Recommendation System with Collaborative Filtering</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/advanced-tutorials/pdf-retrieval-at-scale/>Scaling PDF Retrieval with Qdrant</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/database-tutorials/>Using the Database</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/database-tutorials/bulk-upload/>Bulk Upload Vectors</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/database-tutorials/create-snapshot/>Create & Restore Snapshots</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/database-tutorials/large-scale-search/>Large Scale Search</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/database-tutorials/huggingface-datasets/>Load a HuggingFace Dataset</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/database-tutorials/async-api/>Build With Async API</a></li></ul></nav></details><h3 class=docs-menu__links-title>Support</h3><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/faq/qdrant-fundamentals/>FAQ</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/faq/qdrant-fundamentals/>Qdrant Fundamentals</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/faq/database-optimization/>Database Optimization</a></li></ul></nav></details><div class="docs-menu__links-group external-link"><div class=docs-menu__links-group-heading><a href=https://github.com/qdrant/qdrant/releases target=_blank>Release Notes</a></div></div></nav></div></div></div></header><section class="docs documentation"><div class=documentation__container><div class="d-flex flex-column flex-xl-row"><div class=docs-menu><div id=sidebar class=docs-menu__content><nav class=docs-menu__links><h3 class=docs-menu__links-title>Getting Started</h3><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/overview/>What is Qdrant?</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/overview/vector-search/>Understanding Vector Search in Qdrant</a></li></ul></nav></details><div class=docs-menu__links-group><div class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/quickstart/>Local Quickstart</a></div></div><div class=docs-menu__links-group><div class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/interfaces/>API & SDKs</a></div></div><div class=docs-menu__links-group><div class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/web-ui/>Qdrant Web UI</a></div></div><h3 class=docs-menu__links-title>User Manual</h3><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/concepts/>Concepts</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/collections/>Collections</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/points/>Points</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/vectors/>Vectors</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/payload/>Payload</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/search/>Search</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/explore/>Explore</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/hybrid-queries/>Hybrid Queries</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/filtering/>Filtering</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/optimizer/>Optimizer</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/storage/>Storage</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/indexing/>Indexing</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/concepts/snapshots/>Snapshots</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/guides/installation/>Guides</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/installation/>Installation</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/administration/>Administration</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/running-with-gpu/>Running with GPU</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/capacity-planning/>Capacity Planning</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/optimize/>Optimize Performance</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/multiple-partitions/>Multitenancy</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/distributed_deployment/>Distributed Deployment</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/quantization/>Quantization</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/monitoring/>Monitoring & Telemetry</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/configuration/>Configuration</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/security/>Security</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/usage-statistics/>Usage Statistics</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/guides/common-errors/>Troubleshooting</a></li></ul></nav></details><h3 class=docs-menu__links-title>Ecosystem</h3><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/fastembed/>FastEmbed</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/fastembed/fastembed-quickstart/>Quickstart</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/fastembed/fastembed-semantic-search/>FastEmbed & Qdrant</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/fastembed/fastembed-splade/>Working with SPLADE</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/fastembed/fastembed-colbert/>Working with ColBERT</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/fastembed/fastembed-rerankers/>Reranking with FastEmbed</a></li></ul></nav></details><div class="docs-menu__links-group external-link"><div class=docs-menu__links-group-heading><a href=https://github.com/qdrant/mcp-server-qdrant target=_blank>Qdrant MCP Server</a></div></div><h3 class=docs-menu__links-title>Tutorials</h3><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/beginner-tutorials/>Vector Search Basics</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/beginner-tutorials/search-beginners/>Semantic Search 101</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/beginner-tutorials/neural-search/>Build a Neural Search Service</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/beginner-tutorials/hybrid-search-fastembed/>Setup Hybrid Search with FastEmbed</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/beginner-tutorials/retrieval-quality/>Measure Search Quality</a></li></ul></nav></details><details class="docs-menu__links-group link-group active" open><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/advanced-tutorials/>Advanced Retrieval</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/advanced-tutorials/reranking-hybrid-search/>Reranking in Hybrid Search</a></li><li class="docs-menu__links-submenu-item
active"><a href=https://qdrant.tech/documentation/advanced-tutorials/code-search/>Search Through Your Codebase</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/advanced-tutorials/collaborative-filtering/>Build a Recommendation System with Collaborative Filtering</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/advanced-tutorials/pdf-retrieval-at-scale/>Scaling PDF Retrieval with Qdrant</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/database-tutorials/>Using the Database</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/database-tutorials/bulk-upload/>Bulk Upload Vectors</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/database-tutorials/create-snapshot/>Create & Restore Snapshots</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/database-tutorials/large-scale-search/>Large Scale Search</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/database-tutorials/huggingface-datasets/>Load a HuggingFace Dataset</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/database-tutorials/async-api/>Build With Async API</a></li></ul></nav></details><h3 class=docs-menu__links-title>Support</h3><details class="docs-menu__links-group link-group"><summary class=docs-menu__links-group-heading><a href=https://qdrant.tech/documentation/faq/qdrant-fundamentals/>FAQ</a></summary><nav><ul class=docs-menu__links-submenu><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/faq/qdrant-fundamentals/>Qdrant Fundamentals</a></li><li class=docs-menu__links-submenu-item><a href=https://qdrant.tech/documentation/faq/database-optimization/>Database Optimization</a></li></ul></nav></details><div class="docs-menu__links-group external-link"><div class=docs-menu__links-group-heading><a href=https://github.com/qdrant/qdrant/releases target=_blank>Release Notes</a></div></div></nav></div></div><div class=documentation__content><div class=documentation__content-wrapper><div class=documentation__article-wrapper><ul class=docs-breadcrumbs><li class=docs-breadcrumbs__crumb><a href=https://qdrant.tech/documentation/>Documentation</a></li><li class=docs-breadcrumbs__crumb-separator></li><li class=docs-breadcrumbs__crumb><a href=https://qdrant.tech/documentation/advanced-tutorials/>Advanced tutorials</a></li><li class=docs-breadcrumbs__crumb-separator></li><li class=docs-breadcrumbs__crumb>Search Through Your Codebase</li></ul><article class=documentation-article><h1 id=navigate-your-codebase-with-semantic-search-and-qdrant>Navigate Your Codebase with Semantic Search and Qdrant</h1><div class=table-responsive><table class="table mb-5"><thead><tr><th>Time: 45 min</th><th>Level: Intermediate</th><th><a href=https://colab.research.google.com/github/qdrant/examples/blob/master/code-search/code-search.ipynb target=_blank rel="noopener nofollow"><img src=https://colab.research.google.com/assets/colab-badge.svg alt="Open In Colab"></a></th><th></th></tr></thead><tbody></tbody></table></div><p>You too can enrich your applications with Qdrant semantic search. In this
tutorial, we describe how you can use Qdrant to navigate a codebase, to help
you find relevant code snippets. As an example, we will use the <a href=https://github.com/qdrant/qdrant target=_blank rel="noopener nofollow">Qdrant</a>
source code itself, which is mostly written in Rust.</p><aside role=status>This tutorial might not work on code bases that are not disciplined or structured. For good code search, you may need to refactor the project first.</aside><h2 id=the-approach>The approach</h2><p>We want to search codebases using natural semantic queries, and searching for code based on similar logic. You can set up these tasks with embeddings:</p><ol><li>General usage neural encoder for Natural Language Processing (NLP), in our case
<code>sentence-transformers/all-MiniLM-L6-v2</code>.</li><li>Specialized embeddings for code-to-code similarity search. We use the
<code>jina-embeddings-v2-base-code</code> model.</li></ol><p>To prepare our code for <code>all-MiniLM-L6-v2</code>, we preprocess the code to text that
more closely resembles natural language. The Jina embeddings model supports a
variety of standard programming languages, so there is no need to preprocess the
snippets. We can use the code as is.</p><p>NLP-based search is based on function signatures, but code search may return
smaller pieces, such as loops. So, if we receive a particular function signature
from the NLP model and part of its implementation from the code model, we merge
the results and highlight the overlap.</p><h2 id=data-preparation>Data preparation</h2><p>Chunking the application sources into smaller parts is a non-trivial task. In
general, functions, class methods, structs, enums, and all the other language-specific
constructs are good candidates for chunks. They are big enough to
contain some meaningful information, but small enough to be processed by
embedding models with a limited context window. You can also use docstrings,
comments, and other metadata can be used to enrich the chunks with additional
information.</p><p><img src=https://qdrant.tech/documentation/tutorials/code-search/data-chunking.png alt="Code chunking strategy"></p><h3 id=parsing-the-codebase>Parsing the codebase</h3><p>While our example uses Rust, you can use our approach with any other language.
You can parse code with a <a href=https://microsoft.github.io/language-server-protocol/ target=_blank rel="noopener nofollow">Language Server Protocol</a> (<strong>LSP</strong>)
compatible tool. You can use an LSP to build a graph of the codebase, and then extract chunks.
We did our work with the <a href=https://rust-analyzer.github.io/ target=_blank rel="noopener nofollow">rust-analyzer</a>.
We exported the parsed codebase into the <a href=https://microsoft.github.io/language-server-protocol/specifications/lsif/0.4.0/specification/ target=_blank rel="noopener nofollow">LSIF</a>
format, a standard for code intelligence data. Next, we used the LSIF data to
navigate the codebase and extract the chunks. For details, see our <a href=https://github.com/qdrant/demo-code-search target=_blank rel="noopener nofollow">code search
demo</a>.</p><aside role=status>For other languages, you can use the same approach. There are
<a href=https://microsoft.github.io/language-server-protocol/implementors/servers/>plenty of implementations available
</a>.</aside><p>We then exported the chunks into JSON documents with not only the code itself,
but also context with the location of the code in the project. For example, see
the description of the <code>await_ready_for_timeout</code> function from the <code>IsReady</code>
struct in the <code>common</code> module:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;name&#34;</span><span class=p>:</span><span class=s2>&#34;await_ready_for_timeout&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;signature&#34;</span><span class=p>:</span><span class=s2>&#34;fn await_ready_for_timeout (&amp; self , timeout : Duration) -&gt; bool&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;code_type&#34;</span><span class=p>:</span><span class=s2>&#34;Function&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;docstring&#34;</span><span class=p>:</span><span class=s2>&#34;= \&#34; Return `true` if ready, `false` if timed out.\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;line&#34;</span><span class=p>:</span><span class=mi>44</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;line_from&#34;</span><span class=p>:</span><span class=mi>43</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;line_to&#34;</span><span class=p>:</span><span class=mi>51</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;context&#34;</span><span class=p>:{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;module&#34;</span><span class=p>:</span><span class=s2>&#34;common&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;file_path&#34;</span><span class=p>:</span><span class=s2>&#34;lib/collection/src/common/is_ready.rs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;file_name&#34;</span><span class=p>:</span><span class=s2>&#34;is_ready.rs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;struct_name&#34;</span><span class=p>:</span><span class=s2>&#34;IsReady&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;snippet&#34;</span><span class=p>:</span><span class=s2>&#34;    /// Return `true` if ready, `false` if timed out.\n    pub fn await_ready_for_timeout(&amp;self, timeout: Duration) -&gt; bool {\n        let mut is_ready = self.value.lock();\n        if !*is_ready {\n            !self.condvar.wait_for(&amp;mut is_ready, timeout).timed_out()\n        } else {\n            true\n        }\n    }\n&#34;</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>You can examine the Qdrant structures, parsed in JSON, in the <a href=https://storage.googleapis.com/tutorial-attachments/code-search/structures.jsonl target=_blank rel="noopener nofollow"><code>structures.jsonl</code>
file</a>
in our Google Cloud Storage bucket. Download it and use it as a source of data for our code search.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>wget https://storage.googleapis.com/tutorial-attachments/code-search/structures.jsonl
</span></span></code></pre></div><p>Next, load the file and parse the lines into a list of dictionaries:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>structures</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;structures.jsonl&#34;</span><span class=p>,</span> <span class=s2>&#34;r&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>row</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>fp</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>entry</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>row</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>structures</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>entry</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=code-to-natural-language-conversion>Code to <em>natural language</em> conversion</h3><p>Each programming language has its own syntax which is not a part of the natural
language. Thus, a general-purpose model probably does not understand the code
as is. We can, however, normalize the data by removing code specifics and
including additional context, such as module, class, function, and file name.
We took the following steps:</p><ol><li>Extract the signature of the function, method, or other code construct.</li><li>Divide camel case and snake case names into separate words.</li><li>Take the docstring, comments, and other important metadata.</li><li>Build a sentence from the extracted data using a predefined template.</li><li>Remove the special characters and replace them with spaces.</li></ol><p>As input, expect dictionaries with the same structure. Define a <code>textify</code>
function to do the conversion. We&rsquo;ll use an <code>inflection</code> library to convert
with different naming conventions.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pip install inflection
</span></span></code></pre></div><p>Once all dependencies are installed, we define the <code>textify</code> function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>inflection</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>textify</span><span class=p>(</span><span class=n>chunk</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Get rid of all the camel case / snake case</span>
</span></span><span class=line><span class=cl>    <span class=c1># - inflection.underscore changes the camel case to snake case</span>
</span></span><span class=line><span class=cl>    <span class=c1># - inflection.humanize converts the snake case to human readable form</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=n>inflection</span><span class=o>.</span><span class=n>humanize</span><span class=p>(</span><span class=n>inflection</span><span class=o>.</span><span class=n>underscore</span><span class=p>(</span><span class=n>chunk</span><span class=p>[</span><span class=s2>&#34;name&#34;</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>    <span class=n>signature</span> <span class=o>=</span> <span class=n>inflection</span><span class=o>.</span><span class=n>humanize</span><span class=p>(</span><span class=n>inflection</span><span class=o>.</span><span class=n>underscore</span><span class=p>(</span><span class=n>chunk</span><span class=p>[</span><span class=s2>&#34;signature&#34;</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Check if docstring is provided</span>
</span></span><span class=line><span class=cl>    <span class=n>docstring</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>chunk</span><span class=p>[</span><span class=s2>&#34;docstring&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=n>docstring</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;that does </span><span class=si>{</span><span class=n>chunk</span><span class=p>[</span><span class=s1>&#39;docstring&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Extract the location of that snippet of code</span>
</span></span><span class=line><span class=cl>    <span class=n>context</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=sa>f</span><span class=s2>&#34;module </span><span class=si>{</span><span class=n>chunk</span><span class=p>[</span><span class=s1>&#39;context&#39;</span><span class=p>][</span><span class=s1>&#39;module&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl>        <span class=sa>f</span><span class=s2>&#34;file </span><span class=si>{</span><span class=n>chunk</span><span class=p>[</span><span class=s1>&#39;context&#39;</span><span class=p>][</span><span class=s1>&#39;file_name&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>chunk</span><span class=p>[</span><span class=s2>&#34;context&#34;</span><span class=p>][</span><span class=s2>&#34;struct_name&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=n>struct_name</span> <span class=o>=</span> <span class=n>inflection</span><span class=o>.</span><span class=n>humanize</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>inflection</span><span class=o>.</span><span class=n>underscore</span><span class=p>(</span><span class=n>chunk</span><span class=p>[</span><span class=s2>&#34;context&#34;</span><span class=p>][</span><span class=s2>&#34;struct_name&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>context</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;defined in struct </span><span class=si>{</span><span class=n>struct_name</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>context</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Combine all the bits and pieces together</span>
</span></span><span class=line><span class=cl>    <span class=n>text_representation</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>chunk</span><span class=p>[</span><span class=s1>&#39;code_type&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl>        <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>docstring</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=sa>f</span><span class=s2>&#34;defined as </span><span class=si>{</span><span class=n>signature</span><span class=si>}</span><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl>        <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>context</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Remove any special characters and concatenate the tokens</span>
</span></span><span class=line><span class=cl>    <span class=n>tokens</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;\W&#34;</span><span class=p>,</span> <span class=n>text_representation</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>tokens</span> <span class=o>=</span> <span class=nb>filter</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>,</span> <span class=n>tokens</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34; &#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>tokens</span><span class=p>)</span>
</span></span></code></pre></div><p>Now we can use <code>textify</code> to convert all chunks into text representations:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>text_representations</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=n>textify</span><span class=p>,</span> <span class=n>structures</span><span class=p>))</span>
</span></span></code></pre></div><p>This is how the <code>await_ready_for_timeout</code> function description appears:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Function Await ready for timeout that does Return true if ready false if timed out defined as Fn await ready for timeout self timeout duration bool defined in struct Is ready module common file is_ready rs
</span></span></code></pre></div><h2 id=ingestion-pipeline>Ingestion pipeline</h2><p>Next, we&rsquo;ll build a pipeline for vectorizing the data and set up a semantic search mechanism for both embedding models.</p><h3 id=building-qdrant-collection>Building Qdrant collection</h3><p>We use the <code>qdrant-client</code> library with the <code>fastembed</code> extra to interact with the Qdrant server and generate vector embeddings locally. Let&rsquo;s install it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pip install <span class=s2>&#34;qdrant-client[fastembed]&#34;</span>
</span></span></code></pre></div><p>Of course, we need a running Qdrant server for vector search. If you need one,
you can <a href=https://qdrant.tech/documentation/quick-start/>use a local Docker container</a>
or deploy it using the <a href=https://cloud.qdrant.io/ target=_blank rel="noopener nofollow">Qdrant Cloud</a>.
You can use either to follow this tutorial. Configure the connection parameters:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>QDRANT_URL</span> <span class=o>=</span> <span class=s2>&#34;https://my-cluster.cloud.qdrant.io:6333&#34;</span> <span class=c1># http://localhost:6333 for local instance</span>
</span></span><span class=line><span class=cl><span class=n>QDRANT_API_KEY</span> <span class=o>=</span> <span class=s2>&#34;THIS_IS_YOUR_API_KEY&#34;</span> <span class=c1># None for local instance</span>
</span></span></code></pre></div><p>Then use the library to create a collection:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>qdrant_client</span> <span class=kn>import</span> <span class=n>QdrantClient</span><span class=p>,</span> <span class=n>models</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>client</span> <span class=o>=</span> <span class=n>QdrantClient</span><span class=p>(</span><span class=n>QDRANT_URL</span><span class=p>,</span> <span class=n>api_key</span><span class=o>=</span><span class=n>QDRANT_API_KEY</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>client</span><span class=o>.</span><span class=n>create_collection</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;qdrant-sources&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vectors_config</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;text&#34;</span><span class=p>:</span> <span class=n>models</span><span class=o>.</span><span class=n>VectorParams</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>size</span><span class=o>=</span><span class=n>client</span><span class=o>.</span><span class=n>get_embedding_size</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>model_name</span><span class=o>=</span><span class=s2>&#34;sentence-transformers/all-MiniLM-L6-v2&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>distance</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>Distance</span><span class=o>.</span><span class=n>COSINE</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;code&#34;</span><span class=p>:</span> <span class=n>models</span><span class=o>.</span><span class=n>VectorParams</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>size</span><span class=o>=</span><span class=n>client</span><span class=o>.</span><span class=n>get_embedding_size</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>model_name</span><span class=o>=</span><span class=s2>&#34;jinaai/jina-embeddings-v2-base-code&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>distance</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>Distance</span><span class=o>.</span><span class=n>COSINE</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>Our newly created collection is ready to accept the data. Let&rsquo;s upload the embeddings:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>uuid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Extract the code snippets from the structures to a separate list</span>
</span></span><span class=line><span class=cl><span class=n>code_snippets</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>structure</span><span class=p>[</span><span class=s2>&#34;context&#34;</span><span class=p>][</span><span class=s2>&#34;snippet&#34;</span><span class=p>]</span> <span class=k>for</span> <span class=n>structure</span> <span class=ow>in</span> <span class=n>structures</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>points</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>models</span><span class=o>.</span><span class=n>PointStruct</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nb>id</span><span class=o>=</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>vector</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;text&#34;</span><span class=p>:</span> <span class=n>models</span><span class=o>.</span><span class=n>Document</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>text</span><span class=o>=</span><span class=n>text</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&#34;sentence-transformers/all-MiniLM-L6-v2&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;code&#34;</span><span class=p>:</span> <span class=n>models</span><span class=o>.</span><span class=n>Document</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>text</span><span class=o>=</span><span class=n>code</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&#34;jinaai/jina-embeddings-v2-base-code&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>payload</span><span class=o>=</span><span class=n>structure</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>text</span><span class=p>,</span> <span class=n>code</span><span class=p>,</span> <span class=n>structure</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>text_representations</span><span class=p>,</span> <span class=n>code_snippets</span><span class=p>,</span> <span class=n>structures</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Note: This might take a while since inference happens implicitly.</span>
</span></span><span class=line><span class=cl><span class=c1># Parallel processing can help.</span>
</span></span><span class=line><span class=cl><span class=c1># But too many processes may trigger swap memory and hurt performance.</span>
</span></span><span class=line><span class=cl><span class=n>client</span><span class=o>.</span><span class=n>upload_points</span><span class=p>(</span><span class=s2>&#34;qdrant-sources&#34;</span><span class=p>,</span> <span class=n>points</span><span class=o>=</span><span class=n>points</span><span class=p>,</span> <span class=n>batch_size</span><span class=o>=</span><span class=mi>64</span><span class=p>)</span>
</span></span></code></pre></div><p>Internally, <code>qdrant-client</code> uses <a href=https://github.com/qdrant/fastembed target=_blank rel="noopener nofollow">FastEmbed</a> to implicitly convert our documents into their vector representations.
The uploaded points are immediately available for search. Next, query the
collection to find relevant code snippets.</p><h2 id=querying-the-codebase>Querying the codebase</h2><p>We use one of the models to search the collection. Start with text embeddings.
Run the following query &ldquo;<em>How do I count points in a collection?</em>&rdquo;. Review the
results.</p><aside role=status>In these tables, we link to longer code excerpts from a
`file_name` in the `Qdrant` repository. The results are subject to change.
Fortunately, this model should continue to provide the results you need.</aside><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>query</span> <span class=o>=</span> <span class=s2>&#34;How do I count points in a collection?&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>hits</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>query_points</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;qdrant-sources&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>query</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>Document</span><span class=p>(</span><span class=n>text</span><span class=o>=</span><span class=n>query</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&#34;sentence-transformers/all-MiniLM-L6-v2&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>using</span><span class=o>=</span><span class=s2>&#34;text&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>limit</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=o>.</span><span class=n>points</span>
</span></span></code></pre></div><p>Now, review the results. The following table lists the module, the file name
and score. Each line includes a link to the signature, as a code block from
the file.</p><div class=table-responsive><table class="table mb-5"><thead><tr><th>module</th><th>file_name</th><th>score</th><th>signature</th></tr></thead><tbody><tr><td>toc</td><td>point_ops.rs</td><td>0.59448624</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/storage/src/content_manager/toc/point_ops.rs#L120 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>pub async fn count</code></a></td></tr><tr><td>operations</td><td>types.rs</td><td>0.5493385</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/operations/types.rs#L831 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>pub struct CountRequestInternal</code></a></td></tr><tr><td>collection_manager</td><td>segments_updater.rs</td><td>0.5121002</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/collection_manager/segments_updater.rs#L339 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>pub(crate) fn upsert_points&lt;'a, T></code></a></td></tr><tr><td>collection</td><td>point_ops.rs</td><td>0.5063539</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/collection/point_ops.rs#L213 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>pub async fn count</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.49973983</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/segment/src/index/field_index/map_index/mod.rs#L88 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn get_points_with_value_count&lt;Q></code></a></td></tr></tbody></table></div><p>It seems we were able to find some relevant code structures. Let&rsquo;s try the same with the code embeddings:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>hits</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>query_points</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;qdrant-sources&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>query</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>Document</span><span class=p>(</span><span class=n>text</span><span class=o>=</span><span class=n>query</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&#34;jinaai/jina-embeddings-v2-base-code&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>using</span><span class=o>=</span><span class=s2>&#34;code&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>limit</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=o>.</span><span class=n>points</span>
</span></span></code></pre></div><p>Output:</p><div class=table-responsive><table class="table mb-5"><thead><tr><th>module</th><th>file_name</th><th>score</th><th>signature</th></tr></thead><tbody><tr><td>field_index</td><td>geo_index.rs</td><td>0.73278356</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/segment/src/index/field_index/geo_index.rs#L612 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>numeric_index</td><td>mod.rs</td><td>0.7254976</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/numeric_index/mod.rs#L322 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.7124739</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/map_index/mod.rs#L315 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.7124739</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/map_index/mod.rs#L429 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>fixtures</td><td>payload_context_fixture.rs</td><td>0.706204</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/fixtures/payload_context_fixture.rs#L122 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn total_point_count</code></a></td></tr></tbody></table></div><p>While the scores retrieved by different models are not comparable, but we can
see that the results are different. Code and text embeddings can capture
different aspects of the codebase. We can use both models to query the collection
and then combine the results to get the most relevant code snippets, from a single batch request.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>responses</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>query_batch_points</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>collection_name</span><span class=o>=</span><span class=s2>&#34;qdrant-sources&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>requests</span><span class=o>=</span><span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=n>models</span><span class=o>.</span><span class=n>QueryRequest</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>query</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>Document</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>text</span><span class=o>=</span><span class=n>query</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&#34;sentence-transformers/all-MiniLM-L6-v2&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>using</span><span class=o>=</span><span class=s2>&#34;text&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>with_payload</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>limit</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>models</span><span class=o>.</span><span class=n>QueryRequest</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>query</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>Document</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>text</span><span class=o>=</span><span class=n>query</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&#34;jinaai/jina-embeddings-v2-base-code&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>using</span><span class=o>=</span><span class=s2>&#34;code&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>with_payload</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>limit</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>results</span> <span class=o>=</span> <span class=p>[</span><span class=n>response</span><span class=o>.</span><span class=n>points</span> <span class=k>for</span> <span class=n>response</span> <span class=ow>in</span> <span class=n>responses</span><span class=p>]</span>
</span></span></code></pre></div><p>Output:</p><div class=table-responsive><table class="table mb-5"><thead><tr><th>module</th><th>file_name</th><th>score</th><th>signature</th></tr></thead><tbody><tr><td>toc</td><td>point_ops.rs</td><td>0.59448624</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/storage/src/content_manager/toc/point_ops.rs#L120 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>pub async fn count</code></a></td></tr><tr><td>operations</td><td>types.rs</td><td>0.5493385</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/operations/types.rs#L831 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>pub struct CountRequestInternal</code></a></td></tr><tr><td>collection_manager</td><td>segments_updater.rs</td><td>0.5121002</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/collection_manager/segments_updater.rs#L339 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>pub(crate) fn upsert_points&lt;'a, T></code></a></td></tr><tr><td>collection</td><td>point_ops.rs</td><td>0.5063539</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/collection/point_ops.rs#L213 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>pub async fn count</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.49973983</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/segment/src/index/field_index/map_index/mod.rs#L88 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn get_points_with_value_count&lt;Q></code></a></td></tr><tr><td>field_index</td><td>geo_index.rs</td><td>0.73278356</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/segment/src/index/field_index/geo_index.rs#L612 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>numeric_index</td><td>mod.rs</td><td>0.7254976</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/numeric_index/mod.rs#L322 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.7124739</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/map_index/mod.rs#L315 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.7124739</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/map_index/mod.rs#L429 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>fixtures</td><td>payload_context_fixture.rs</td><td>0.706204</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/fixtures/payload_context_fixture.rs#L122 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn total_point_count</code></a></td></tr></tbody></table></div><p>This is one example of how you can use different models and combine the results.
In a real-world scenario, you might run some reranking and deduplication, as
well as additional processing of the results.</p><h3 id=code-search-demo>Code search demo</h3><p>Our <a href=https://code-search.qdrant.tech/ target=_blank rel="noopener nofollow">Code search demo</a> uses the following process:</p><ol><li>The user sends a query.</li><li>Both models vectorize that query simultaneously. We get two different
vectors.</li><li>Both vectors are used in parallel to find relevant snippets. We expect
5 examples from the NLP search and 20 examples from the code search.</li><li>Once we retrieve results for both vectors, we merge them in one of the
following scenarios:<ol><li>If both methods return different results, we prefer the results from
the general usage model (NLP).</li><li>If there is an overlap between the search results, we merge overlapping
snippets.</li></ol></li></ol><p>In the screenshot, we search for <code>flush of wal</code>. The result
shows relevant code, merged from both models. Note the highlighted
code in lines 621-629. It&rsquo;s where both models agree.</p><p><img src=https://qdrant.tech/documentation/tutorials/code-search/code-search-demo-example.png alt="Results from both models, with overlap"></p><p>Now you see semantic code intelligence, in action.</p><h3 id=grouping-the-results>Grouping the results</h3><p>You can improve the search results, by grouping them by payload properties.
In our case, we can group the results by the module. If we use code embeddings,
we can see multiple results from the <code>map_index</code> module. Let&rsquo;s group the
results and assume a single result per module:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>results</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>query_points_groups</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>collection_name</span><span class=o>=</span><span class=s2>&#34;qdrant-sources&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>using</span><span class=o>=</span><span class=s2>&#34;code&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>query</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>Document</span><span class=p>(</span><span class=n>text</span><span class=o>=</span><span class=n>query</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&#34;jinaai/jina-embeddings-v2-base-code&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>group_by</span><span class=o>=</span><span class=s2>&#34;context.module&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>limit</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>group_size</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>Output:</p><div class=table-responsive><table class="table mb-5"><thead><tr><th>module</th><th>file_name</th><th>score</th><th>signature</th></tr></thead><tbody><tr><td>field_index</td><td>geo_index.rs</td><td>0.73278356</td><td><a href=https://github.com/qdrant/qdrant/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/segment/src/index/field_index/geo_index.rs#L612 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>numeric_index</td><td>mod.rs</td><td>0.7254976</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/numeric_index/mod.rs#L322 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.7124739</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/map_index/mod.rs#L315 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn count_indexed_points</code></a></td></tr><tr><td>fixtures</td><td>payload_context_fixture.rs</td><td>0.706204</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/fixtures/payload_context_fixture.rs#L122 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn total_point_count</code></a></td></tr><tr><td>hnsw_index</td><td>graph_links.rs</td><td>0.6998417</td><td><a href=https://github.com/qdrant/qdrant/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/hnsw_index/graph_links.rs#L477 target=_blank rel="noopener nofollow"><img src=https://qdrant.tech/documentation/tutorials/code-search/github-mark.png width=16 style=display:inline> <code>fn num_points</code></a></td></tr></tbody></table></div><p>With the grouping feature, we get more diverse results.</p><h2 id=summary>Summary</h2><p>This tutorial demonstrates how to use Qdrant to navigate a codebase. For an
end-to-end implementation, review the <a href=https://colab.research.google.com/github/qdrant/examples/blob/master/code-search/code-search.ipynb target=_blank rel="noopener nofollow">code search
notebook</a> and the
<a href=https://github.com/qdrant/demo-code-search target=_blank rel="noopener nofollow">code-search-demo</a>. You can also check out <a href=https://code-search.qdrant.tech/ target=_blank rel="noopener nofollow">a running version of the code
search demo</a> which exposes Qdrant codebase for search with a web interface.</p></article><section class="docs-feedback d-print-none"><h5 class=docs-feedback__title>Was this page useful?</h5><div class=docs-feedback__buttons><button class="button button_outlined button_sm docs-feedback__button" id=feedback__answer_yes>
<img src=https://qdrant.tech/icons/outline/thumb-up.svg alt="Thumb up icon">
Yes
</button>
<button class="button button_outlined button_sm docs-feedback__button" id=feedback__answer_no>
<img src=https://qdrant.tech/icons/outline/thumb-down.svg alt="Thumb down icon">
No</button></div></section><section class="docs-feedback__responses d-none"><p class="docs-feedback__response docs-feedback__response_yes" id=feedback__response_yes>Thank you for your feedback! üôè</p><p class="docs-feedback__response docs-feedback__response_no" id=feedback__response_no>We are sorry to hear that. üòî You can <a class=text-brand-p href=https:/github.com/qdrant/landing_page/tree/master/qdrant-landing/content/documentation/advanced-tutorials/code-search.md target=_blank>edit</a> this page on GitHub, or <a class=text-brand-p href=https://github.com/qdrant/landing_page/issues/new/choose target=_blank>create</a> a GitHub issue.</p></section><script>const buttonsSection=document.querySelector(".docs-feedback"),responsesSection=document.querySelector(".docs-feedback__responses"),yesButton=document.querySelector("#feedback__answer_yes"),noButton=document.querySelector("#feedback__answer_no"),yesResponse=document.querySelector("#feedback__response_yes"),noResponse=document.querySelector("#feedback__response_no"),toggleResponses=()=>{buttonsSection.classList.add("d-none"),responsesSection.classList.remove("d-none")};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback__response_visible"),toggleResponses()}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback__response_visible"),toggleResponses()})</script></div><div class=table-of-contents><p class=table-of-contents__head>On this page:</p><nav id=TableOfContents><ul><li><a href=#navigate-your-codebase-with-semantic-search-and-qdrant>Navigate Your Codebase with Semantic Search and Qdrant</a><ul><li><a href=#the-approach>The approach</a></li><li><a href=#data-preparation>Data preparation</a><ul><li><a href=#parsing-the-codebase>Parsing the codebase</a></li><li><a href=#code-to-natural-language-conversion>Code to <em>natural language</em> conversion</a></li></ul></li><li><a href=#ingestion-pipeline>Ingestion pipeline</a><ul><li><a href=#building-qdrant-collection>Building Qdrant collection</a></li></ul></li><li><a href=#querying-the-codebase>Querying the codebase</a><ul><li><a href=#code-search-demo>Code search demo</a></li><li><a href=#grouping-the-results>Grouping the results</a></li></ul></li><li><a href=#summary>Summary</a></li></ul></li></ul></nav><ul class=table-of-contents__external-links><li class=table-of-contents__link><a href=https://github.com/qdrant/landing_page/tree/master/qdrant-landing/content/documentation/advanced-tutorials/code-search.md target=_blank><svg width="16" height="17" viewBox="0 0 16 17" fill="none"><g clip-path="url(#clip0_6269_955)"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 .700012c-4.4.0-8 3.599998-8 7.999998C0 12.2333 2.26667 15.2333 5.46667 16.3 5.86667 16.3667 6 16.1 6 15.9S6 15.2333 6 14.5667C3.8 15.0333 3.33333 13.5 3.33333 13.5 3 12.5667 2.46667 12.3 2.46667 12.3 1.66667 11.8333 2.46667 11.8333 2.46667 11.8333 3.26667 11.9 3.66667 12.6333 3.66667 12.6333 4.4 13.8333 5.53333 13.5 6 13.3 6.06667 12.7667 6.26667 12.4333 6.53333 12.2333 4.73333 12.0333 2.86667 11.3667 2.86667 8.30001c0-.86666.33333-1.6.8-2.13333.0-.26667-.33334-1.06667.13333-2.13333.0.0.66667-.200000000000001 2.2.8.66667-.2 1.33333-.26667 2-.26667S9.33333 4.63335 10 4.83335c1.5333-1.06667 2.2-.8 2.2-.8C12.6667 5.16668 12.3333 5.96668 12.2667 6.16668 12.8 6.70001 13.0667 7.43335 13.0667 8.30001c0 3.06669-1.8667 3.73329-3.6667 3.93329C9.66667 12.5 9.93333 12.9667 9.93333 13.7c0 1.0667.0 1.9333.0 2.2C9.93333 16.1 10.0667 16.3667 10.4667 16.3c3.2-1.0667 5.4666-4.0667 5.4666-7.59999C16 4.30001 12.4.700012 8 .700012z" fill="#f0f3fa"/></g><defs><clipPath id="clip0_6269_955"><rect width="16" height="16" fill="#fff" transform="translate(0 0.5)"/></clipPath></defs></svg>
Edit on Github</a></li><li class=table-of-contents__link><a href=https://github.com/qdrant/landing_page/issues/new/choose target=_blank><svg width="16" height="17" viewBox="0 0 16 17" fill="none"><g clip-path="url(#clip0_6269_1540)"><path d="M16 9.83331V8.49998H13.9347C13.79 7.33465 13.3947 6.24065 12.8 5.31065l1.476-1.478L13.3327 2.89065 11.9633 4.26198c-.24-.248-.496600000000001-.474-.772-.676C11.0967 3.25665 10.9507 2.95398 10.7673 2.67598l1.038-1.038L10.8627.695312 9.82867 1.72931C9.29867 1.37798 8.672 1.16665 8 1.16665c-.672.0-1.29867.21133-1.828.56266L5.138.695312l-.94267.942668 1.038 1.038c-.18333.27733-.32933.58-.424.90867-.27533.202-.532.42933-.77266.67733L2.66733 2.89065l-.94333.942L3.2 5.30998c-.59467.93-.99 2.02467-1.13467 3.19H0V9.83331H2.01467C2.07333 11.276 2.50533 12.6026 3.204 13.688l-1.48 1.478L2.666 16.1093l1.37-1.368C4.93733 15.67 6.07667 16.288 7.33333 16.452V6.49998H8.66667V16.452C9.92333 16.2873 11.0627 15.67 11.964 14.7413l1.37 1.368L14.276 15.166l-1.48-1.478C13.4947 12.602 13.9267 11.2753 13.9853 9.83331H16z" fill="#f0f3fa"/></g><defs><clipPath id="clip0_6269_1540"><rect width="16" height="16" fill="#fff" transform="translate(0 0.5)"/></clipPath></defs></svg>
Create an issue</a></li></ul></div><footer class="docs-footer w-100 py-0 pt-0 pb-4 pb-xl-0"><div class=docs-footer__cta><h4>Ready to get started with Qdrant?</h4><a href=https://qdrant.to/cloud/ class="button button_outlined button_sm" target=_blank>Start Free</a></div><div class=docs-footer__bottom><div class=docs-footer__bottom-content><span>¬© 2025 Qdrant.</span><div class=footer__bottom-links><a href=https://qdrant.tech/legal/terms_and_conditions/>Terms</a>
<a href=https://qdrant.tech/legal/privacy-policy/>Privacy Policy</a>
<a href=https://qdrant.tech/legal/impressum/>Impressum</a></div></div></div></footer></div></div></div></div></section></main></body><script src=https://cdn.cookielaw.org/scripttemplates/otSDKStub.js type=text/javascript data-domain-script=01960152-5e40-782d-af01-f7f5768a214e></script><script async type=text/javascript>function OptanonWrapper(){const e=new CustomEvent("onetrust_loaded");document.dispatchEvent(e)}</script><script>!function(){const o="eQYi1nZE2zQSmnHuxjMRlDd2uLl65oHe";var n,s,t="analytics",e=window[t]=window[t]||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"],e.factory=function(n){return function(){if(window[t].initialized)return window[t][n].apply(window[t],arguments);var o,s=Array.prototype.slice.call(arguments);return["track","screen","alias","group","page","identify"].indexOf(n)>-1&&(o=document.querySelector("link[rel='canonical']"),s.push({__t:"bpc",c:o&&o.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})),s.unshift(n),e.push(s),e}};for(n=0;n<e.methods.length;n++)s=e.methods[n],e[s]=e.factory(s);e.load=function(n,s){var i,o=document.createElement("script");o.type="text/javascript",o.async=!0,o.setAttribute("data-global-segment-analytics-key",t),o.src="https://evs.analytics.qdrant.tech/5caWuitPgcGFN5Q7HMpTaj/vEkmzjuRSqeXGbhGAFTWex.min.js",i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(o,i),e._loadOptions=s},e._writeKey=o,e._cdn="https://evs.analytics.qdrant.tech",e.SNIPPET_VERSION="5.2.0",e.load(o)}}()</script><script src=https://qdrant.tech/js/google-setup.min.14728a3ae9bd931593645b6ddbfe801d400cd2970006e782cb67f3966654248ca962dbaf4cf371493a2d326861b3a691a99d6d8349c8b2752339ab91d3787069.js></script><script src=https://qdrant.tech/js/index.min.e37feda1952d752f5568e1ebc55e183629e4d361f4df09edeed70b4a4327d601161c4147bdbe4149b4a3cdc1ed43f1bf1a2f2340a421f1aa821103980dfe0bda.js></script><script src=https://qdrant.tech/js/search/search.min.e58e7ea98cb549ea9d3ed7e68876abe323cfb323432038820f38a71c40e309deed0fba615e2d3346825229a81e0a76bbadf6f8a816ddad3438abdabfef4ebc09.js type=module></script><script src=https://qdrant.tech/js/search/scroll.min.f4ed4453a3af0adb0d4f49333cbb7892ff5430483a567d0d2dfbd4655fb203d22f22f46aff3d9f38fa5fd96dde5f30227afd0ce1d9f838f5cd5295fc83856ec9.js></script><script src=https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js></script><script src=https://qdrant.tech/js/copy-code.min.95b03a45b2ab4b7a608ecfd4b5919c8572a5b2cd1463f52561cd10976abf3b74334f91324c0e620cb80afac46026a0b18cce6fb753d8495f74c6d478c8ca1d03.js></script><script src=https://qdrant.tech/js/lang-switcher.min.63da11cef09772078425b1ee56415b9c37842a9399f2ba2d2f5efbf72fb751686c410bd50e9bcd283c8231cb97c1973199d4923beef29d8b06e59d9983a6ba51.js></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src=https://qdrant.tech/js/vendor/anchor.min.0e138e17ebcf1c1147a7a3a81d9ac3c601622eedc479f1636470eb2552470f4e27c9a8efe6e8378995dedc1ab67029d8989536ea76f0857d45d1615ae772b8a1.js></script><script>document.addEventListener("keydown",function(e){if((e.metaKey||e.ctrlKey)&&e.key==="k"){e.preventDefault();let t=document.querySelector('[data-target="#searchModal"]');t&&t?.click()}})</script><script>window.addEventListener("message",e=>{if(e.data.type==="hsFormCallback"&&e.data.eventName==="onFormReady"){const t=document.querySelector(`form[data-form-id="${e.data.id}"]`);if(t){const e=t.querySelector('[name="last_form_fill_url"]');e&&(e.value=window.location.href);const n=t.querySelector('[name="referrer_url"]');n&&(n.value=document.referrer)}}})</script></html>