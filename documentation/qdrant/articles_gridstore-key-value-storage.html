<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta charset=UTF-8><title>Introducing Gridstore: Qdrant's Custom Key-Value Store - Qdrant</title>
<link rel=icon href=https://qdrant.tech/favicon/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=https://qdrant.tech/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://qdrant.tech/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://qdrant.tech/favicon/favicon-16x16.png><link rel=manifest href=https://qdrant.tech/favicon/site.webmanifest><link rel=mask-icon href=https://qdrant.tech/favicon/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#2b5797"><meta name=msapplication-config content="/favicon/browserconfig.xml"><meta name=theme-color content="#ffffff"><meta name=partition content="learn"><link href=https://qdrant.tech/css/search/search.min.09596ee2b3c94d0ac82a1c33199cabdb3e0210b1ee46aaf1515200e9e484d05dd9e27cc1e861c58cc2e582af162f63b8e180ff2a12f7a6592b7aeaa0a7125130.css rel=stylesheet integrity="sha512-CVlu4rPJTQrIKhwzGZyr2z4CELHuRqrxUVIA6eSE0F3Z4nzB6GHFjMLlgq8WL2O44YD/KhL3plkreuqgpxJRMA=="><link href=https://qdrant.tech/css/documentation.min.de204cdcfc410689a41c17bcdad0a34f2caaa50cc8505c820adaab481cef2d69a920b0a32e0d624701c29487e3271b694559d98c5047cbfaa5aa475f638011e5.css rel=stylesheet integrity="sha512-3iBM3PxBBomkHBe82tCjTyyqpQzIUFyCCtqrSBzvLWmpILCjLg1iRwHClIfjJxtpRVnZjFBHy/qlqkdfY4AR5Q=="><link href=https://qdrant.tech/css/main.min.c1e379ad4cf03647832f6a0f040754b0be3e79934db2c29f50b396327c1ec7ac45f778abadbd93f5a8bc431850d1b0d9c9eff34c0171cd4236e83c5e324c1a0e.css rel=stylesheet integrity crossorigin=anonymous><meta name=generator content="Hugo 0.141.0"><meta name=description content="Why and how we built our own key-value store. A short technical report on our procedure and results."><meta name=keywords content="vector search engine,neural network,matching,SaaS,approximate nearest neighbor search,image search,recommender system,vectors,knn algorithm,hnsw,vector search,embeddings,similarity,simaes networks,BERT,transformer,word2vec,fasttext,qdrant"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@id":"https://qdrant.tech/articles/gridstore-key-value-storage/#article","@type":"Article","abstract":"Why and how we built our own keyvalue store A short technical report on our procedure and results","author":{"@type":"Person","name":"Luis Cossio, Arnaud Gourlay \u0026amp; David Myriel"},"dateModified":"2025-02-05 00:00:00 +0000 UTC","datePublished":"2025-02-05 00:00:00 +0000 UTC","description":"Why and how we built our own keyvalue store A short technical report on our procedure and results","headline":"Introducing Gridstore: Qdrant\u0026#39;s Custom Key-Value Store","image":["https://qdrant.tech/articles_data/gridstore-key-value-storage/social_preview.png"],"name":"Introducing Gridstore: Qdrant\u0026#39;s Custom Key-Value Store","url":"https://qdrant.tech/articles/gridstore-key-value-storage/","wordCount":"2163"},{"@id":"https://qdrant.tech/articles/gridstore-key-value-storage/#organization","@type":"Organization","address":{"@type":"PostalAddress","addressCountry":"DE","addressLocality":"Berlin","addressRegion":"Berlin","postalCode":"10115","streetAddress":"Chausseestra√üe 86"},"contactPoint":{"@type":"ContactPoint","contactType":"customer support","email":"info@qdrant.com","telephone":"+49 3040797694"},"description":"Qdrant is an Open-Source Vector Database and Vector Search Engine written in Rust. It provides fast and scalable vector similarity search service with convenient API.","email":"info@qdrant.com","founders":[{"@type":"Person","name":"map[email:info@qdrant.tech name:Andrey Vasnetsov]"},{"@type":"Person","name":"Andre Zayarni"}],"foundingDate":"2021","keywords":["vector search engine","neural network","matching","SaaS","approximate nearest neighbor search","image search","recommender system","vectors","knn algorithm","hnsw","vector search","embeddings","similarity","simaes networks","BERT","transformer","word2vec","fasttext","Qdrant"],"legalName":"Qdrant Solutions GmbH","location":"Berlin, Germany","logo":"https://qdrant.tech/images/logo_with_text.png","name":"Qdrant","sameAs":["https://github.com/qdrant/qdrant","https://qdrant.to/discord","https://www.youtube.com/channel/UC6ftm8PwH1RU_LM1jwG0LQA","https://www.linkedin.com/company/qdrant/","https://twitter.com/qdrant_engine"],"url":"https://qdrant.tech"}]}</script><meta property="og:url" content="https://qdrant.tech/articles/gridstore-key-value-storage/"><meta property="og:type" content="website"><meta property="og:title" content="Introducing Gridstore: Qdrant's Custom Key-Value Store - Qdrant"><meta name=twitter:card content="summary_large_image"><meta name=twitter:domain content="qdrant"><meta name=twitter:url content="https://qdrant.tech/articles/gridstore-key-value-storage/"><meta name=twitter:title content="Introducing Gridstore: Qdrant's Custom Key-Value Store - Qdrant"><meta property="og:description" content="Why and how we built our own key-value store. A short technical report on our procedure and results."><meta name=twitter:description content="Why and how we built our own key-value store. A short technical report on our procedure and results."><meta name=image property="og:image" content="https://qdrant.tech/articles_data/gridstore-key-value-storage/social_preview.png"><meta name=image property="og:image:secure_url" content="https://qdrant.tech/articles_data/gridstore-key-value-storage/social_preview.png"><meta property="og:image:type" content="image/jpeg"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name=twitter:image:src content="https://qdrant.tech/articles_data/gridstore-key-value-storage/social_preview.png"><meta name=author content="Luis Cossio, Arnaud Gourlay & David Myriel"><link rel=canonical href=https://qdrant.tech/articles/gridstore-key-value-storage/><script type=text/javascript src=//js-eu1.hsforms.net/forms/embed/v2.js></script><script src=https://qdrant.tech/js/documentation.min.594fc9226f6fb87b8c3b0cafb9d5c0b0bcd95f47d292b929aab04315e0506706b2f376dc4fae9961dc3082138cb19d45b2a3370ee8e881bbf4b8c91dcb735c32.js></script></head><body><main><header class=docs-header><div class="main-menu z-5"><a href=https://qdrant.tech/><div class=logo><img class=logo__img src=https://qdrant.tech/img/qdrant-logo.svg alt=logo></div></a><div class="d-flex d-xl-none justify-content-end align-items-center gap-4"><div class="d-block d-xl-none"><button role=button class=theme-switch></button></div><button type=button class=main-menu__trigger><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M1 12H23" stroke="#e1e5f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M1 5H23" stroke="#e1e5f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M1 19H23" stroke="#e1e5f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button></div><ul class=main-menu__links><li class=main-menu__item><a class=menu-link href=https://qdrant.tech/documentation/>Qdrant</a></li><li class=main-menu__item><a class=menu-link href=https://qdrant.tech/documentation/cloud-intro/>Cloud</a></li><li class=main-menu__item><a class=menu-link href=https://qdrant.tech/documentation/build/>Build</a></li><li class=main-menu__item><a class=menu-linkactive href=https://qdrant.tech/articles/>Learn</a></li><li class=main-menu__item><a class=menu-link href=https://api.qdrant.tech/api-reference target=_blank>API Reference</a></li></ul><div class=main-menu__buttons><div class=main-menu__buttons-input><button class="qdr-search-input-btn q-input input_md input_light-bg" type=button name=search data-target=#searchModal>
Search</button></div><button role=button class=theme-switch></button>
<a data-metric-loc=nav href=https://cloud.qdrant.io/login class="menu-link mx-3" target=_blank>Log in</a>
<a data-metric-loc=nav href=https://cloud.qdrant.io/signup class="button button_contained button_sm" target=_blank>Start Free</a></div></div><div class=menu-mobile><div class=menu-mobile__header><div class=logo><img class=logo__img src=https://qdrant.tech/img/qdrant-logo.svg alt=logo></div><div class="d-flex d-xl-none justify-content-end align-items-center gap-4"><div class="d-block d-xl-none"><button role=button class=theme-switch></button></div><button type=button class=menu-mobile__close><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><g id="Close"><path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M19.778 5.63606C20.1685 5.24554 20.1685 4.61237 19.778 4.22185 19.3874 3.83132 18.7543 3.83132 18.3637 4.22185L11.9998 10.5858 5.63586 4.22185c-.39052-.39053-1.02369-.39053-1.41421.0C3.83112 4.61237 3.83112 5.24554 4.22165 5.63606L10.5856 12l-6.364 6.364C3.83108 18.7545 3.83108 19.3877 4.2216 19.7782 4.61213 20.1687 5.24529 20.1687 5.63582 19.7782l6.36398-6.364 6.364 6.364C18.7543 20.1687 19.3875 20.1687 19.778 19.7782 20.1685 19.3877 20.1685 18.7545 19.778 18.364L13.414 12l6.364-6.36394z" fill="#e1e5f0"/></g></svg></button></div></div><div class=main-menu__buttons-input><button class="qdr-search-input-btn q-input input_md input_light-bg" type=button name=search data-target=#searchModal>
Search</button></div><ul class=menu-mobile__items><li class=menu-mobile__item data-path=menu-0><div class=menu-mobile__item-content><a href=https://qdrant.tech/documentation/><svg width="16" height="16" viewBox="0 0 16 16" fill="#e1e5f0"><g id="Menu/Documentation"><path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M4.25 1c-1.10092.0-2.12247.23681-2.88689.64443C.620129 2.04063.0 2.67297.0 3.5v11c0 .2761.223858.5.5.5s.5-.2239.5-.5c0-.278.21937-.6456.83364-.9732C2.42647 13.2107 3.27992 13 4.25 13 5.22008 13 6.07353 13.2107 6.66636 13.5268c.61427.3276.83364.6952.83364.9732.0.2761.22386.5.5.5s.5-.2239.5-.5c0-.278.21937-.6456.833640000000001-.9732C9.92647 13.2107 10.7799 13 11.75 13S13.5735 13.2107 14.1664 13.5268C14.7806 13.8544 15 14.222 15 14.5c0 .2761.2239.5.5.5s.5-.2239.5-.5V3.5C16 2.67297 15.3799 2.04063 14.6369 1.64443 13.8725 1.23681 12.8509 1 11.75 1s-2.12247.23681-2.88689.64443C8.53799 1.8178 8.2364 2.03638 8 2.29671c-.2364-.26033-.53799-.47891-.86311-.65228C6.37247 1.23681 5.35092 1 4.25 1zM1.36311 12.6444C1.23778 12.7113 1.11595 12.7848 1 12.8649V3.5c0-.27797.21937-.64563.83364-.97318C2.42647 2.21069 3.27992 2 4.25 2c.97008.0 1.82353.21069 2.41636.52682C7.28063 2.85437 7.5 3.22203 7.5 3.5v9.3649C7.38405 12.7848 7.26222 12.7113 7.13689 12.6444 6.37247 12.2368 5.35092 12 4.25 12 3.14908 12 2.12753 12.2368 1.36311 12.6444zM8.5 12.8649C8.61595 12.7848 8.73778 12.7113 8.86311 12.6444 9.62753 12.2368 10.6491 12 11.75 12S13.8725 12.2368 14.6369 12.6444C14.7622 12.7113 14.8841 12.7848 15 12.8649V3.5C15 3.22203 14.7806 2.85437 14.1664 2.52682 13.5735 2.21069 12.7201 2 11.75 2s-1.82353.21069-2.41636.52682C8.71937 2.85437 8.5 3.22203 8.5 3.5v9.3649z"/></g></svg>
Qdrant</a></div></li><li class=menu-mobile__item data-path=menu-1><div class=menu-mobile__item-content><a href=https://qdrant.tech/documentation/cloud-intro/><svg width="16" height="16" viewBox="0 0 16 16" fill="#e1e5f0"><g id="Menu/Cloud"><path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M7.5 2C4.57416 2 2.18128 4.28566 2.00983 7.16851.8403 7.57763.0 8.68965.0 10c0 1.6571 1.34286 3 3 3H13c1.6571.0 3-1.3429 3-3 0-1.65714-1.3429-3-3-3L12.9776 7.00009C12.7249 4.19714 10.3686 2 7.5 2zM3.00107 7.48137 3.00008 7.47308C3.01457 5.0006 5.02412 3 7.5 3c2.47599.0 4.4856 2.00079 4.4999 4.47342L11.9987 7.4836C11.9969 7.50027 11.995 7.52348 11.995 7.551 11.995 7.701 12.0623 7.84308 12.1785 7.93804 12.2946 8.03301 12.4472 8.07082 12.5942 8.04106 12.726 8.01438 12.8617 8 13 8c1.1049.0 2 .89514 2 2C15 11.1049 14.1049 12 13 12H3C1.89514 12 1 11.1049 1 10 1 9.03225 1.68901 8.22422 2.60364 8.04017 2.83708 7.9932 3.005 7.78812 3.005 7.55 3.005 7.52154 3.00291 7.49773 3.00107 7.48137z"/></g></svg>
Cloud</a></div></li><li class=menu-mobile__item data-path=menu-2><div class=menu-mobile__item-content><a href=https://qdrant.tech/documentation/build/><svg width="16" height="16" viewBox="0 0 16 16" fill="#e1e5f0"><g id="Menu/Blog"><path id="Union" fill-rule="evenodd" clip-rule="evenodd" d="M0 1.5C0 1.22386.223858 1 .5 1h5c.27614.0.5.22386.5.5v5c0 .27614-.22386.5-.5.5H.5C.223858 7 0 6.77614.0 6.5v-5zM1 2V6H5V2H1zm7 .5c0-.27614.22386-.5.5-.5h7c.2761.0.5.22386.5.5s-.2239.5-.5.5h-7C8.22386 3 8 2.77614 8 2.5zM8.5 6c-.27614.0-.5.22386-.5.5s.22386.5.5.5h7c.2761.0.5-.22386.5-.5s-.2239-.5-.5-.5h-7zM0 10.5c0-.2761.223858-.5.5-.5h15c.2761.0.5.2239.5.5s-.2239.5-.5.5H.5c-.276142.0-.5-.2239-.5-.5zM.5 14c-.276142.0-.5.2239-.5.5s.223858.5.5.5h15c.2761.0.5-.2239.5-.5s-.2239-.5-.5-.5H.5z"/></g></svg>
Build</a></div></li><li class=menu-mobile__item data-path=menu-3><div class=menu-mobile__item-content><a class=active href=https://qdrant.tech/articles/><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="#e1e5f0"><g id="Group"><path id="Vector" d="M10.084 1.84094l4.059 4.059" stroke-linecap="round" stroke-linejoin="round"/><path id="Vector_2" d="M8.49188 2.72406c-1.22044-.53042-2.59304-.59475-3.85774-.1808-1.2647.41395-2.33363 1.27742-3.00426 2.4268l2.34 2.34" stroke-linecap="round" stroke-linejoin="round"/><path id="Vector_3" d="M13.2657 7.47302C13.8062 8.69691 13.8769 10.077 13.4645 11.3497c-.4125 1.2728-1.2792 2.3491-2.4348 3.0233l-2.35001-2.35" stroke-linecap="round" stroke-linejoin="round"/><path id="Vector_4" d="M6.81217 13.049l-3.861-3.861S6.24917.983 15.5002.5c-.523 9.211-8.68803 12.549-8.68803 12.549z" stroke-linecap="round" stroke-linejoin="round"/><path id="Vector_5" d="M3.59892 12.4008C3.34181 12.1441 2.99331 12 2.62995 12c-.36335.0-.71186.1441-.96897.4008-.46665.4664-.63131 1.941-.65931 2.2322C.997021 14.6793 1.0021 14.726 1.01659 14.7701 1.03108 14.8143 1.05465 14.8549 1.08579 14.8895 1.11693 14.924 1.15495 14.9516 1.19741 14.9705 1.23987 14.9895 1.28583 14.9994 1.33233 14.9995 1.34298 15.0002 1.35367 15.0002 1.36433 14.9995 1.65565 14.9715 3.1316 14.8063 3.59759 14.3405 3.85501 14.0834 3.99975 13.7346 4 13.3709 4.00025 13.0072 3.85599 12.6582 3.59892 12.4008z" stroke-linecap="round" stroke-linejoin="round"/><path id="Vector_6" d="M9 8c.55228.0 1-.44772 1-1S9.55228 6 9 6 8 6.44772 8 7s.44772 1 1 1z"/></g></svg>
Learn</a></div></li><li class=menu-mobile__item data-path=menu-4><div class=menu-mobile__item-content><a href=https://api.qdrant.tech/api-reference target=_blank><svg width="16" height="16" viewBox="0 0 16 16" fill="#e1e5f0"><g id="Menu/Roadmap" clip-path="url(#clip0_7182_4311)"><path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M13.5 1c-.8284.0-1.5.67157-1.5 1.5S12.6716 4 13.5 4 15 3.32843 15 2.5 14.3284 1 13.5 1zM11 2.5C11 1.11929 12.1193.0 13.5.0S16 1.11929 16 2.5 14.8807 5 13.5 5 11 3.88071 11 2.5zM2.5 12c-.82843.0-1.5.6716-1.5 1.5S1.67157 15 2.5 15 4 14.3284 4 13.5 3.32843 12 2.5 12zM0 13.5C0 12.1193 1.11929 11 2.5 11S5 12.1193 5 13.5 3.88071 16 2.5 16 0 14.8807.0 13.5zM3.65901 1.65901C4.08097 1.23705 4.65326 1 5.25 1s1.16903.23705 1.59099.65901C7.26295 2.08097 7.5 2.65326 7.5 3.25v9.5c0 .862.34241 1.6886.9519 2.2981C9.0614 15.6576 9.88805 16 10.75 16c.862.0 1.6886-.3424 2.2981-.9519S14 13.612 14 12.75V6.5c0-.27614-.2239-.5-.5-.5s-.5.22386-.5.5v6.25C13 13.3467 12.7629 13.919 12.341 14.341 11.919 14.7629 11.3467 15 10.75 15S9.58097 14.7629 9.15901 14.341C8.73705 13.919 8.5 13.3467 8.5 12.75V3.25C8.5 2.38805 8.15759 1.5614 7.5481.951903 6.9386.34241 6.11195.0 5.25.0S3.5614.34241 2.9519.951903C2.34241 1.5614 2 2.38805 2 3.25V9.5c0 .27614.22386.5.5.5s.5-.22386.5-.5V3.25c0-.59674.23705-1.16903.65901-1.59099z"/></g><defs><clipPath id="clip0_7182_4311"><rect width="16" height="16" fill="#fff"/></clipPath></defs></svg>
API Reference</a></div></li></ul><div class=docs-menu><div id=sidebar class=docs-menu__content><h3 class=docs-menu__links-title>Learn</h3><nav><div class=docs-menu__links-group><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/vector-search-manuals/>Vector Search Manuals</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/qdrant-internals/>Qdrant Internals</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/data-exploration/>Data Exploration</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/machine-learning/>Machine Learning</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/rag-and-genai/>RAG & GenAI</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/practicle-examples/>Practical Examples</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/ecosystem/>Ecosystem</a></div></div></nav></div></div></div></header><section class="docs documentation"><div class=documentation__container><div class="d-flex flex-column flex-xl-row"><div class=docs-menu><div id=sidebar class=docs-menu__content><h3 class=docs-menu__links-title>Learn</h3><nav><div class=docs-menu__links-group><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/vector-search-manuals/>Vector Search Manuals</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/qdrant-internals/>Qdrant Internals</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/data-exploration/>Data Exploration</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/machine-learning/>Machine Learning</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/rag-and-genai/>RAG & GenAI</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/practicle-examples/>Practical Examples</a></div><div class="docs-menu__articles-link docs-menu__links-group-heading"><a href=https://qdrant.tech/articles/ecosystem/>Ecosystem</a></div></div></nav></div></div><div class=documentation__content><div class=documentation__content-wrapper><div class=documentation__article-wrapper><ul class=docs-breadcrumbs><li class=docs-breadcrumbs__crumb><a href=https://qdrant.tech/articles/>Articles</a></li><li class=docs-breadcrumbs__crumb-separator></li><li class=docs-breadcrumbs__crumb>Introducing Gridstore: Qdrant's Custom Key-Value Store</li></ul><article class=documentation-article><div class=documentation-article__header><a href=https://qdrant.tech/articles/qdrant-internals/ class=documentation-article__header-link><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M14.6668 8.00004H1.3335m0 0L6.00016 12.6667M1.3335 8.00004 6.00016 3.33337" stroke="#8f98b3" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"/></svg>
Back to Qdrant Internals</a><h1 class=documentation-article__header-title>Introducing Gridstore: Qdrant's Custom Key-Value Store</h1><div class=documentation-article__header-about><p>Luis Cossio, Arnaud Gourlay & David Myriel</p><span>&#183;</span><p>February 05, 2025</p></div><picture class=documentation-article__header-preview><source srcset=https://qdrant.tech/articles_data/gridstore-key-value-storage/preview/title.webp type=image/webp><img alt="Introducing Gridstore: Qdrant's Custom Key-Value Store" src=https://qdrant.tech/articles_data/gridstore-key-value-storage/preview/title.jpg></picture></div><h2 id=why-we-built-our-own-storage-engine>Why We Built Our Own Storage Engine</h2><p>Databases need a place to store and retrieve data. That‚Äôs what Qdrant&rsquo;s <a href=https://en.wikipedia.org/wiki/Key%e2%80%93value_database target=_blank rel="noopener nofollow"><strong>key-value storage</strong></a> does‚Äîit links keys to values.</p><p>When we started building Qdrant, we needed to pick something ready for the task. So we chose <a href=https://rocksdb.org target=_blank rel="noopener nofollow"><strong>RocksDB</strong></a> as our embedded key-value store.</p><div style=text-align:center><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/rocksdb.jpg alt=RocksDB style=width:50%><p>It is mature, reliable, and well-documented.</p></div><p>Over time, we ran into issues. Its architecture required compaction (uses <a href=https://en.wikipedia.org/wiki/Log-structured_merge-tree target=_blank rel="noopener nofollow">LSMT</a>), which caused random latency spikes. It handles generic keys, while we only use it for sequential IDs. Having lots of configuration options makes it versatile, but accurately tuning it was a headache. Finally, interoperating with C++ slowed us down (although we will still support it for quite some time üò≠).</p><p>While there are already some good options written in Rust that we could leverage, we needed something custom. Nothing out there fit our needs in the way we wanted. We didn‚Äôt require generic keys. We wanted full control over when and which data was written and flushed. Our system already has crash recovery mechanisms built-in. Online compaction isn‚Äôt a priority, we already have optimizers for that. Debugging misconfigurations was not a great use of our time.</p><p>So we built our own storage. As of <a href=https://qdrant.tech/blog/qdrant-1.13.x/><strong>Qdrant Version 1.13</strong></a>, we are using Gridstore for <strong>payload and sparse vector storages</strong>.</p><div style=text-align:center><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/gridstore.png alt=Gridstore style=width:50%><p>Simple, efficient, and designed just for Qdrant.</p></div><h4 id=in-this-article-youll-learn-about>In this article, you‚Äôll learn about:</h4><ul><li><strong>How Gridstore works</strong> ‚Äì a deep dive into its architecture and mechanics.</li><li><strong>Why we built it this way</strong> ‚Äì the key design decisions that shaped it.</li><li><strong>Rigorous testing</strong> ‚Äì how we ensured the new storage is production-ready.</li><li><strong>Performance benchmarks</strong> ‚Äì official metrics that demonstrate its efficiency.</li></ul><p><strong>Our first challenge?</strong> Figuring out the best way to handle sequential keys and variable-sized data.</p><h2 id=gridstore-architecture-three-main-components>Gridstore Architecture: Three Main Components</h2><p><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/gridstore-2.png alt=gridstore></p><p>Gridstore‚Äôs architecture is built around three key components that enable fast lookups and efficient space management:</p><div class=table-responsive><table class="table mb-5"><thead><tr><th>Component</th><th>Description</th></tr></thead><tbody><tr><td>The Data Layer</td><td>Stores values in fixed-sized blocks and retrieves them using a pointer-based lookup system.</td></tr><tr><td>The Mask Layer</td><td>Uses a bitmask to track which blocks are in use and which are available.</td></tr><tr><td>The Gaps Layer</td><td>Manages block availability at a higher level, allowing for quick space allocation.</td></tr></tbody></table></div><h3 id=1-the-data-layer-for-fast-retrieval>1. The Data Layer for Fast Retrieval</h3><p>At the core of Gridstore is <strong>The Data Layer</strong>, which is designed to store and retrieve values quickly based on their keys. This layer allows us to do efficient reads and lets us store variable-sized data. The main two components of this layer are <strong>The Tracker</strong> and <strong>The Data Grid</strong>.</p><p>Since internal IDs are always sequential integers (0, 1, 2, 3, 4, &mldr;), the tracker is an array of pointers, where each pointer tells the system exactly where a value starts and how long it is.</p><figure><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/data-layer.png alt="The Data Layer"><figcaption><p>The Data Layer uses an array of pointers to quickly retrieve data.</p></figcaption></figure><p>This makes lookups incredibly fast. For example, finding key 3 is just a matter of jumping to the third position in the tracker, and following the pointer to find the value in the data grid.</p><p>However, because values are of variable size, the data itself is stored separately in a grid of fixed-sized blocks, which are grouped into larger page files. The fixed size of each block is usually 128 bytes. When inserting a value, Gridstore allocates one or more consecutive blocks to store it, ensuring that each block only holds data from a single value.</p><h3 id=2-the-mask-layer-reuses-space>2. The Mask Layer Reuses Space</h3><p><strong>The Mask Layer</strong> helps Gridstore handle updates and deletions without the need for expensive data compaction. Instead of maintaining complex metadata for each block, Gridstore tracks usage with a bitmask, where each bit represents a block, with 1 for used, 0 for free.</p><figure><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/mask-layer.png alt="The Mask Layer"><figcaption><p>The bitmask efficiently tracks block usage.</p></figcaption></figure><p>This makes it easy to determine where new values can be written. When a value is removed, it gets soft-deleted at its pointer, and the corresponding blocks in the bitmask are marked as available. Similarly, when updating a value, the new version is written elsewhere, and the old blocks are freed at the bitmask.</p><p>This approach ensures that Gridstore doesn‚Äôt waste space. As the storage grows, however, scanning for available blocks in the entire bitmask can become computationally expensive.</p><h3 id=3-the-gaps-layer-for-effective-updates>3. The Gaps Layer for Effective Updates</h3><p>To further optimize update handling, Gridstore introduces <strong>The Gaps Layer</strong>, which provides a higher-level view of block availability.</p><p>Instead of scanning the entire bitmask, Gridstore splits the bitmask into regions and keeps track of the largest contiguous free space within each region, known as <strong>The Region Gap</strong>. By also storing the leading and trailing gaps of each region, the system can efficiently combine multiple regions when needed for storing large values.</p><figure><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/architecture.png alt="The Gaps Layer"><figcaption><p>The complete architecture of Gridstore</p></figcaption></figure><p>This layered approach allows Gridstore to locate available space quickly, scaling down the work required for scans while keeping memory overhead minimal. With this system, finding storage space for new values requires scanning only a tiny fraction of the total metadata, making updates and insertions highly efficient, even in large segments.</p><p>Given the default configuration, the gaps layer is scoped out in a millionth fraction of the actual storage size. This means that for each 1GB of data, the gaps layer only requires scanning 6KB of metadata. With this mechanism, the other operations can be executed in virtually constant-time complexity.</p><h2 id=gridstore-in-production-maintaining-data-integrity>Gridstore in Production: Maintaining Data Integrity</h2><p><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/gridstore-1.png alt=gridstore></p><p>Gridstore‚Äôs architecture introduces multiple interdependent structures that must remain in sync to ensure data integrity:</p><ul><li><strong>The Data Layer</strong> holds the data and associates each key with its location in storage, including page ID, block offset, and the size of its value.</li><li><strong>The Mask Layer</strong> keeps track of which blocks are occupied and which are free.</li><li><strong>The Gaps Layer</strong> provides an indexed view of free blocks for efficient space allocation.</li></ul><p>Every time a new value is inserted or an existing value is updated, all these components need to be modified in a coordinated way.</p><h3 id=when-things-break-in-real-life>When Things Break in Real Life</h3><p>Real-world systems don‚Äôt operate in a vacuum. Failures happen: software bugs cause unexpected crashes, memory exhaustion forces processes to terminate, disks fail to persist data reliably, and power losses can interrupt operations at any moment.</p><p><em>The critical question is: what happens if a failure occurs while updating these structures?</em></p><p>If one component is updated but another isn‚Äôt, the entire system could become inconsistent. Worse, if an operation is only partially written to disk, it could lead to orphaned data, unusable space, or even data corruption.</p><h3 id=stability-through-idempotency-recovering-with-wal>Stability Through Idempotency: Recovering With WAL</h3><p>To guard against these risks, Qdrant relies on a <a href=https://qdrant.tech/documentation/concepts/storage/><strong>Write-Ahead Log (WAL)</strong></a>. Before committing an operation, Qdrant ensures that it is at least recorded in the WAL. If a crash happens before all updates are flushed, the system can safely replay operations from the log.</p><p>This recovery mechanism introduces another essential property: <a href=https://en.wikipedia.org/wiki/Idempotence target=_blank rel="noopener nofollow"><strong>idempotence</strong></a>.</p><p>The storage system must be designed so that reapplying the same operation after a failure leads to the same final state as if the operation had been applied just once.</p><h3 id=the-grand-solution-lazy-updates>The Grand Solution: Lazy Updates</h3><p>To achieve this, <strong>Gridstore completes updates lazily</strong>, prioritizing the most critical part of the write: the data itself.</p><div class=table-responsive><table class="table mb-5"><thead><tr><th></th></tr></thead><tbody><tr><td>üëâ Instead of immediately updating all metadata structures, it writes the new value first while keeping lightweight pending changes in a buffer.</td></tr><tr><td>üëâ The system only finalizes these updates when explicitly requested, ensuring that a crash never results in marking data as deleted before the update has been safely persisted.</td></tr><tr><td>üëâ In the worst-case scenario, Gridstore may need to write the same data twice, leading to a minor space overhead, but it will never corrupt the storage by overwriting valid data.</td></tr></tbody></table></div><h2 id=how-we-tested-the-final-product>How We Tested the Final Product</h2><p><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/gridstore-3.png alt=gridstore></p><h3 id=first-model-testing>First&mldr; Model Testing</h3><p>Gridstore can be tested efficiently using model testing, which compares its behavior to a simple in-memory hash map. Since Gridstore should function like a persisted hash map, this method quickly detects inconsistencies.</p><p>The process is straightforward:</p><ol><li>Initialize a Gridstore instance and an empty hash map.</li><li>Run random operations (put, delete, update) on both.</li><li>Verify that results match after each operation.</li><li>Compare all keys and values to ensure consistency.</li></ol><p>This approach provides high test coverage, exposing issues like incorrect persistence or faulty deletions. Running large-scale model tests ensures Gridstore remains reliable in real-world use.</p><p>Here is a naive way to generate operations in Rust.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>enum</span> <span class=nc>Operation</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Put</span><span class=p>(</span><span class=n>PointOffset</span><span class=p>,</span><span class=w> </span><span class=n>Payload</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Delete</span><span class=p>(</span><span class=n>PointOffset</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Update</span><span class=p>(</span><span class=n>PointOffset</span><span class=p>,</span><span class=w> </span><span class=n>Payload</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>impl</span><span class=w> </span><span class=n>Operation</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>fn</span> <span class=nf>random</span><span class=p>(</span><span class=n>rng</span>: <span class=kp>&amp;</span><span class=nc>mut</span><span class=w> </span><span class=k>impl</span><span class=w> </span><span class=n>Rng</span><span class=p>,</span><span class=w> </span><span class=n>max_point_offset</span>: <span class=kt>u32</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>Self</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=n>point_offset</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rng</span><span class=p>.</span><span class=n>random_range</span><span class=p>(</span><span class=mi>0</span><span class=o>..=</span><span class=n>max_point_offset</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=n>operation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rng</span><span class=p>.</span><span class=n>gen_range</span><span class=p>(</span><span class=mi>0</span><span class=o>..</span><span class=mi>3</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>match</span><span class=w> </span><span class=n>operation</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=mi>0</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=n>size_factor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rng</span><span class=p>.</span><span class=n>random_range</span><span class=p>(</span><span class=mi>1</span><span class=o>..</span><span class=mi>10</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=n>payload</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>random_payload</span><span class=p>(</span><span class=n>rng</span><span class=p>,</span><span class=w> </span><span class=n>size_factor</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Operation</span>::<span class=n>Put</span><span class=p>(</span><span class=n>point_offset</span><span class=p>,</span><span class=w> </span><span class=n>payload</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=mi>1</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>Operation</span>::<span class=n>Delete</span><span class=p>(</span><span class=n>point_offset</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=mi>2</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=n>size_factor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rng</span><span class=p>.</span><span class=n>random_range</span><span class=p>(</span><span class=mi>1</span><span class=o>..</span><span class=mi>10</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>let</span><span class=w> </span><span class=n>payload</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>random_payload</span><span class=p>(</span><span class=n>rng</span><span class=p>,</span><span class=w> </span><span class=n>size_factor</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Operation</span>::<span class=n>Update</span><span class=p>(</span><span class=n>point_offset</span><span class=p>,</span><span class=w> </span><span class=n>payload</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>_</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=fm>unreachable!</span><span class=p>(),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>Model testing is a high-value way to catch bugs, especially when your system mimics a well-defined component like a hash map. If your component behaves the same as another one, using model testing brings a lot of value for a bit of effort.</p><p>We could have tested against RocksDB, but simplicity matters more. A simple hash map lets us run massive test sequences quickly, exposing issues faster.</p><p>For even sharper debugging, Property-Based Testing adds automated test generation and shrinking. It pinpoints failures with minimalized test cases, making bug hunting faster and more effective.</p><h3 id=crash-testing-can-gridstore-handle-the-pressure>Crash Testing: Can Gridstore Handle the Pressure?</h3><p>Designing for crash resilience is one thing, and proving it works under stress is another. To push Qdrant‚Äôs data integrity to the limit, we built <a href=https://github.com/qdrant/crasher target=_blank rel="noopener nofollow"><strong>Crasher</strong></a>, a test bench that brutally kills and restarts Qdrant while it handles a heavy update workload.</p><p>Crasher runs a loop that continuously writes data, then randomly crashes Qdrant. On each restart, Qdrant replays its <a href=https://qdrant.tech/documentation/concepts/storage/><strong>Write-Ahead Log (WAL)</strong></a>, and we verify if data integrity holds. Possible anomalies include:</p><ul><li>Missing data (points, vectors, or payloads)</li><li>Corrupt payload values</li></ul><p>This aggressive yet simple approach has uncovered real-world issues when run for extended periods. While we also use chaos testing for distributed setups, Crasher excels at fast, repeatable failure testing in a local environment.</p><h2 id=testing-gridstore-performance-benchmarks>Testing Gridstore Performance: Benchmarks</h2><p><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/gridstore-4.png alt=gridstore></p><p>To measure the impact of our new storage engine, we used <a href=https://github.com/jonhoo/bustle target=_blank rel="noopener nofollow"><strong>Bustle, a key-value storage benchmarking framework</strong></a>, to compare Gridstore against RocksDB. We tested three workloads:</p><div class=table-responsive><table class="table mb-5"><thead><tr><th>Workload Type</th><th>Operation Distribution</th></tr></thead><tbody><tr><td>Read-heavy</td><td>95% reads</td></tr><tr><td>Insert-heavy</td><td>80% inserts</td></tr><tr><td>Update-heavy</td><td>50% updates</td></tr></tbody></table></div><h4 id=the-results-speak-for-themselves>The results speak for themselves:</h4><p>Average latency for all kinds of workloads is lower across the board, particularly for inserts.</p><p><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/1.png alt=image.png></p><p>This shows a clear boost in performance. As we can see, the investment in Gridstore is paying off.</p><h3 id=end-to-end-benchmarking>End-to-End Benchmarking</h3><p>Now, let‚Äôs test the impact on a real Qdrant instance. So far, we‚Äôve only integrated Gridstore for <a href=https://qdrant.tech/documentation/concepts/payload/><strong>payloads</strong></a> and <a href=https://qdrant.tech/documentation/concepts/vectors/#sparse-vectors><strong>sparse vectors</strong></a>, but even this partial switch should show noticeable improvements.</p><p>For benchmarking, we used our in-house <a href=https://github.com/qdrant/bfb target=_blank rel="noopener nofollow"><strong>bfb tool</strong></a> to generate a workload. Our configuration:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>bfb</span> <span class=err>-n</span> <span class=mi>2000000</span> <span class=err>--max-id</span> <span class=mi>1000000</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--sparse-vectors</span> <span class=mf>0.02</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--set-payload</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--on-disk-payload</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--dim</span> <span class=mi>1</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--sparse-dim</span> <span class=mi>5000</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--bool-payloads</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--keywords</span> <span class=mi>100</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--float-payloads</span> <span class=kc>true</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--int-payloads</span> <span class=mi>100000</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--text-payloads</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--text-payload-length</span> <span class=mi>512</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--skip-field-indices</span> <span class=err>\</span>
</span></span><span class=line><span class=cl>    <span class=err>--jsonl-updates</span> <span class=err>./rps.jsonl</span>
</span></span></code></pre></div><p>This benchmark upserts 1 million points twice. Each point has:</p><ul><li>A medium to large payload</li><li>A tiny dense vector (dense vectors use a different storage type)</li><li>A sparse vector</li></ul><hr><h4 id=additional-configuration>Additional configuration:</h4><ol><li><p>The test we conducted updated payload data separately in another request.</p></li><li><p>There were no payload indices, which ensured we measured pure ingestion speed.</p></li><li><p>Finally, we gathered request latency metrics for analysis.</p></li></ol><hr><p>We ran this against Qdrant 1.12.6, toggling between the old and new storage backends.</p><h3 id=final-result>Final Result</h3><p>Data ingestion is <strong>twice as fast and with a smoother throughput</strong> ‚Äî a massive win! üòç</p><p><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/2.png alt=image.png></p><p>We optimized for speed, and it paid off‚Äîbut what about storage size?</p><ul><li>Gridstore: 2333MB</li><li>RocksDB: 2319MB</li></ul><p>Strictly speaking, RocksDB is slightly smaller, but the difference is negligible compared to the 2x faster ingestion and more stable throughput. A small trade-off for a big performance gain!</p><h2 id=trying-out-gridstore>Trying Out Gridstore</h2><p>Gridstore represents a significant advancement in how Qdrant manages its <strong>key-value storage</strong> needs. It offers great performance and streamlined updates tailored specifically for our use case. We have managed to achieve faster, more reliable data ingestion while maintaining data integrity, even under heavy workloads and unexpected failures. It is already used as a storage backend for on-disk payloads and sparse vectors.</p><p>üëâ It‚Äôs important to note that Gridstore remains tightly integrated with Qdrant and, as such, has not been released as a standalone crate.</p><p>Its API is still evolving, and we are focused on refining it within our ecosystem to ensure maximum stability and performance. That said, we recognize the value this innovation could bring to the wider Rust community. In the future, once the API stabilizes and we decouple it enough from Qdrant, we will consider publishing it as a contribution to the community ‚ù§Ô∏è.</p><p>For now, Gridstore continues to drive improvements in Qdrant, demonstrating the benefits of a custom-tailored storage engine designed with modern demands in mind. Stay tuned for further updates and potential community releases as we keep pushing the boundaries of performance and reliability.</p><div style=text-align:center><img src=https://qdrant.tech/articles_data/gridstore-key-value-storage/gridstore.png alt=Gridstore style=width:50%><p>Simple, efficient, and designed just for Qdrant.</p></div></article><section class="docs-feedback d-print-none"><h5 class=docs-feedback__title>Was this page useful?</h5><div class=docs-feedback__buttons><button class="button button_outlined button_sm docs-feedback__button" id=feedback__answer_yes>
<img src=https://qdrant.tech/icons/outline/thumb-up.svg alt="Thumb up icon">
Yes
</button>
<button class="button button_outlined button_sm docs-feedback__button" id=feedback__answer_no>
<img src=https://qdrant.tech/icons/outline/thumb-down.svg alt="Thumb down icon">
No</button></div></section><section class="docs-feedback__responses d-none"><p class="docs-feedback__response docs-feedback__response_yes" id=feedback__response_yes>Thank you for your feedback! üôè</p><p class="docs-feedback__response docs-feedback__response_no" id=feedback__response_no>We are sorry to hear that. üòî You can <a class=text-brand-p href=https:/github.com/qdrant/landing_page/tree/master/qdrant-landing/content/articles/gridstore-key-value-storage.md target=_blank>edit</a> this page on GitHub, or <a class=text-brand-p href=https://github.com/qdrant/landing_page/issues/new/choose target=_blank>create</a> a GitHub issue.</p></section><script>const buttonsSection=document.querySelector(".docs-feedback"),responsesSection=document.querySelector(".docs-feedback__responses"),yesButton=document.querySelector("#feedback__answer_yes"),noButton=document.querySelector("#feedback__answer_no"),yesResponse=document.querySelector("#feedback__response_yes"),noResponse=document.querySelector("#feedback__response_no"),toggleResponses=()=>{buttonsSection.classList.add("d-none"),responsesSection.classList.remove("d-none")};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback__response_visible"),toggleResponses()}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback__response_visible"),toggleResponses()})</script></div><div class=table-of-contents><p class=table-of-contents__head>On this page:</p><nav id=TableOfContents><ul><li><a href=#why-we-built-our-own-storage-engine>Why We Built Our Own Storage Engine</a><ul><li></li></ul></li><li><a href=#gridstore-architecture-three-main-components>Gridstore Architecture: Three Main Components</a><ul><li><a href=#1-the-data-layer-for-fast-retrieval>1. The Data Layer for Fast Retrieval</a></li><li><a href=#2-the-mask-layer-reuses-space>2. The Mask Layer Reuses Space</a></li><li><a href=#3-the-gaps-layer-for-effective-updates>3. The Gaps Layer for Effective Updates</a></li></ul></li><li><a href=#gridstore-in-production-maintaining-data-integrity>Gridstore in Production: Maintaining Data Integrity</a><ul><li><a href=#when-things-break-in-real-life>When Things Break in Real Life</a></li><li><a href=#stability-through-idempotency-recovering-with-wal>Stability Through Idempotency: Recovering With WAL</a></li><li><a href=#the-grand-solution-lazy-updates>The Grand Solution: Lazy Updates</a></li></ul></li><li><a href=#how-we-tested-the-final-product>How We Tested the Final Product</a><ul><li><a href=#first-model-testing>First&mldr; Model Testing</a></li><li><a href=#crash-testing-can-gridstore-handle-the-pressure>Crash Testing: Can Gridstore Handle the Pressure?</a></li></ul></li><li><a href=#testing-gridstore-performance-benchmarks>Testing Gridstore Performance: Benchmarks</a><ul><li></li><li><a href=#end-to-end-benchmarking>End-to-End Benchmarking</a></li><li><a href=#final-result>Final Result</a></li></ul></li><li><a href=#trying-out-gridstore>Trying Out Gridstore</a></li></ul></nav><ul class=table-of-contents__external-links><li class=table-of-contents__link><a href=https://github.com/qdrant/landing_page/tree/master/qdrant-landing/content/articles/gridstore-key-value-storage.md target=_blank><svg width="16" height="17" viewBox="0 0 16 17" fill="none"><g clip-path="url(#clip0_6269_955)"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 .700012c-4.4.0-8 3.599998-8 7.999998C0 12.2333 2.26667 15.2333 5.46667 16.3 5.86667 16.3667 6 16.1 6 15.9S6 15.2333 6 14.5667C3.8 15.0333 3.33333 13.5 3.33333 13.5 3 12.5667 2.46667 12.3 2.46667 12.3 1.66667 11.8333 2.46667 11.8333 2.46667 11.8333 3.26667 11.9 3.66667 12.6333 3.66667 12.6333 4.4 13.8333 5.53333 13.5 6 13.3 6.06667 12.7667 6.26667 12.4333 6.53333 12.2333 4.73333 12.0333 2.86667 11.3667 2.86667 8.30001c0-.86666.33333-1.6.8-2.13333.0-.26667-.33334-1.06667.13333-2.13333.0.0.66667-.200000000000001 2.2.8.66667-.2 1.33333-.26667 2-.26667S9.33333 4.63335 10 4.83335c1.5333-1.06667 2.2-.8 2.2-.8C12.6667 5.16668 12.3333 5.96668 12.2667 6.16668 12.8 6.70001 13.0667 7.43335 13.0667 8.30001c0 3.06669-1.8667 3.73329-3.6667 3.93329C9.66667 12.5 9.93333 12.9667 9.93333 13.7c0 1.0667.0 1.9333.0 2.2C9.93333 16.1 10.0667 16.3667 10.4667 16.3c3.2-1.0667 5.4666-4.0667 5.4666-7.59999C16 4.30001 12.4.700012 8 .700012z" fill="#f0f3fa"/></g><defs><clipPath id="clip0_6269_955"><rect width="16" height="16" fill="#fff" transform="translate(0 0.5)"/></clipPath></defs></svg>
Edit on Github</a></li><li class=table-of-contents__link><a href=https://github.com/qdrant/landing_page/issues/new/choose target=_blank><svg width="16" height="17" viewBox="0 0 16 17" fill="none"><g clip-path="url(#clip0_6269_1540)"><path d="M16 9.83331V8.49998H13.9347C13.79 7.33465 13.3947 6.24065 12.8 5.31065l1.476-1.478L13.3327 2.89065 11.9633 4.26198c-.24-.248-.496600000000001-.474-.772-.676C11.0967 3.25665 10.9507 2.95398 10.7673 2.67598l1.038-1.038L10.8627.695312 9.82867 1.72931C9.29867 1.37798 8.672 1.16665 8 1.16665c-.672.0-1.29867.21133-1.828.56266L5.138.695312l-.94267.942668 1.038 1.038c-.18333.27733-.32933.58-.424.90867-.27533.202-.532.42933-.77266.67733L2.66733 2.89065l-.94333.942L3.2 5.30998c-.59467.93-.99 2.02467-1.13467 3.19H0V9.83331H2.01467C2.07333 11.276 2.50533 12.6026 3.204 13.688l-1.48 1.478L2.666 16.1093l1.37-1.368C4.93733 15.67 6.07667 16.288 7.33333 16.452V6.49998H8.66667V16.452C9.92333 16.2873 11.0627 15.67 11.964 14.7413l1.37 1.368L14.276 15.166l-1.48-1.478C13.4947 12.602 13.9267 11.2753 13.9853 9.83331H16z" fill="#f0f3fa"/></g><defs><clipPath id="clip0_6269_1540"><rect width="16" height="16" fill="#fff" transform="translate(0 0.5)"/></clipPath></defs></svg>
Create an issue</a></li></ul></div><footer class="docs-footer w-100 py-0 pt-0 pb-4 pb-xl-0"><div class=docs-footer__cta><h4>Ready to get started with Qdrant?</h4><a href=https://qdrant.to/cloud/ class="button button_outlined button_sm" target=_blank>Start Free</a></div><div class=docs-footer__bottom><div class=docs-footer__bottom-content><span>¬© 2025 Qdrant.</span><div class=footer__bottom-links><a href=https://qdrant.tech/legal/terms_and_conditions/>Terms</a>
<a href=https://qdrant.tech/legal/privacy-policy/>Privacy Policy</a>
<a href=https://qdrant.tech/legal/impressum/>Impressum</a></div></div></div></footer></div></div></div></div></section></main></body><script src=https://cdn.cookielaw.org/scripttemplates/otSDKStub.js type=text/javascript data-domain-script=01960152-5e40-782d-af01-f7f5768a214e></script><script async type=text/javascript>function OptanonWrapper(){const e=new CustomEvent("onetrust_loaded");document.dispatchEvent(e)}</script><script>!function(){const o="eQYi1nZE2zQSmnHuxjMRlDd2uLl65oHe";var n,s,t="analytics",e=window[t]=window[t]||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"],e.factory=function(n){return function(){if(window[t].initialized)return window[t][n].apply(window[t],arguments);var o,s=Array.prototype.slice.call(arguments);return["track","screen","alias","group","page","identify"].indexOf(n)>-1&&(o=document.querySelector("link[rel='canonical']"),s.push({__t:"bpc",c:o&&o.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})),s.unshift(n),e.push(s),e}};for(n=0;n<e.methods.length;n++)s=e.methods[n],e[s]=e.factory(s);e.load=function(n,s){var i,o=document.createElement("script");o.type="text/javascript",o.async=!0,o.setAttribute("data-global-segment-analytics-key",t),o.src="https://evs.analytics.qdrant.tech/5caWuitPgcGFN5Q7HMpTaj/vEkmzjuRSqeXGbhGAFTWex.min.js",i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(o,i),e._loadOptions=s},e._writeKey=o,e._cdn="https://evs.analytics.qdrant.tech",e.SNIPPET_VERSION="5.2.0",e.load(o)}}()</script><script src=https://qdrant.tech/js/google-setup.min.14728a3ae9bd931593645b6ddbfe801d400cd2970006e782cb67f3966654248ca962dbaf4cf371493a2d326861b3a691a99d6d8349c8b2752339ab91d3787069.js></script><script src=https://qdrant.tech/js/index.min.e37feda1952d752f5568e1ebc55e183629e4d361f4df09edeed70b4a4327d601161c4147bdbe4149b4a3cdc1ed43f1bf1a2f2340a421f1aa821103980dfe0bda.js></script><script src=https://qdrant.tech/js/search/search.min.e58e7ea98cb549ea9d3ed7e68876abe323cfb323432038820f38a71c40e309deed0fba615e2d3346825229a81e0a76bbadf6f8a816ddad3438abdabfef4ebc09.js type=module></script><script src=https://qdrant.tech/js/search/scroll.min.f4ed4453a3af0adb0d4f49333cbb7892ff5430483a567d0d2dfbd4655fb203d22f22f46aff3d9f38fa5fd96dde5f30227afd0ce1d9f838f5cd5295fc83856ec9.js></script><script src=https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js></script><script src=https://qdrant.tech/js/copy-code.min.95b03a45b2ab4b7a608ecfd4b5919c8572a5b2cd1463f52561cd10976abf3b74334f91324c0e620cb80afac46026a0b18cce6fb753d8495f74c6d478c8ca1d03.js></script><script src=https://qdrant.tech/js/lang-switcher.min.63da11cef09772078425b1ee56415b9c37842a9399f2ba2d2f5efbf72fb751686c410bd50e9bcd283c8231cb97c1973199d4923beef29d8b06e59d9983a6ba51.js></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src=https://qdrant.tech/js/vendor/anchor.min.0e138e17ebcf1c1147a7a3a81d9ac3c601622eedc479f1636470eb2552470f4e27c9a8efe6e8378995dedc1ab67029d8989536ea76f0857d45d1615ae772b8a1.js></script><script>document.addEventListener("keydown",function(e){if((e.metaKey||e.ctrlKey)&&e.key==="k"){e.preventDefault();let t=document.querySelector('[data-target="#searchModal"]');t&&t?.click()}})</script><script>window.addEventListener("message",e=>{if(e.data.type==="hsFormCallback"&&e.data.eventName==="onFormReady"){const t=document.querySelector(`form[data-form-id="${e.data.id}"]`);if(t){const e=t.querySelector('[name="last_form_fill_url"]');e&&(e.value=window.location.href);const n=t.querySelector('[name="referrer_url"]');n&&(n.value=document.referrer)}}})</script></html>