<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Building Better Tools for LLM Agents — LlamaIndex - Build Knowledge Assistants over your Enterprise Data</title><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="theme-color" content="#ffffff"/><meta name="title" content="Building Better Tools for LLM Agents — LlamaIndex - Build Knowledge Assistants over your Enterprise Data"/><meta name="description" content="LlamaIndex is a simple, flexible framework for building knowledge assistants using LLMs connected to your enterprise data."/><meta property="og:title" content="Building Better Tools for LLM Agents — LlamaIndex - Build Knowledge Assistants over your Enterprise Data"/><meta property="og:description" content="LlamaIndex is a simple, flexible framework for building knowledge assistants using LLMs connected to your enterprise data."/><meta property="og:image" content="https://cdn.sanity.io/images/7m9jw85w/production/d69d0025829fae4ad65ae7a80c08d5f73206e47f-2996x1412.png"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:title" content="Building Better Tools for LLM Agents — LlamaIndex - Build Knowledge Assistants over your Enterprise Data"/><meta property="twitter:description" content="LlamaIndex is a simple, flexible framework for building knowledge assistants using LLMs connected to your enterprise data."/><meta property="twitter:image" content="https://cdn.sanity.io/images/7m9jw85w/production/d69d0025829fae4ad65ae7a80c08d5f73206e47f-2996x1412.png"/><link rel="alternate" type="application/rss+xml" href="https://www.llamaindex.ai/blog/feed"/><meta name="next-head-count" content="20"/><script>
            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WWRFB36R');
            </script><link rel="preload" href="/_next/static/css/41c9222e47d080c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/41c9222e47d080c9.css" data-n-g=""/><link rel="preload" href="/_next/static/css/97c33c8d95f1230e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/97c33c8d95f1230e.css" data-n-p=""/><link rel="preload" href="/_next/static/css/e009059e80bf60c5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e009059e80bf60c5.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-1b629d9c8fb16f34.js" defer=""></script><script src="/_next/static/chunks/framework-df1f68dff096b68a.js" defer=""></script><script src="/_next/static/chunks/main-eca7952a704663f8.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c7c49437be49d2ad.js" defer=""></script><script src="/_next/static/chunks/d9067523-4985945b21298365.js" defer=""></script><script src="/_next/static/chunks/41155975-60c12da9ce9fa0b2.js" defer=""></script><script src="/_next/static/chunks/cb355538-cee2ea45674d9de3.js" defer=""></script><script src="/_next/static/chunks/9494-dff62cb53535dd7d.js" defer=""></script><script src="/_next/static/chunks/4063-39a391a51171ff87.js" defer=""></script><script src="/_next/static/chunks/6889-edfa85b69b88a372.js" defer=""></script><script src="/_next/static/chunks/5575-11ee0a29eaffae61.js" defer=""></script><script src="/_next/static/chunks/3444-95c636af25a42734.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-82c8e764e69afd2c.js" defer=""></script><script src="/_next/static/C8J-EMc_4OCN1ch65l4fl/_buildManifest.js" defer=""></script><script src="/_next/static/C8J-EMc_4OCN1ch65l4fl/_ssgManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WWRFB36R" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="__variable_d65c78 __variable_b1ea77 __variable_eb7534"><a class="Announcement_announcement__2ohK8" href="http://48755185.hs-sites.com/llamaindex-0">Meet LlamaIndex at the Databricks Data + AI Summit!<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M8.293 5.293a1 1 0 0 1 1.414 0l6 6a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414L13.586 12 8.293 6.707a1 1 0 0 1 0-1.414Z" clip-rule="evenodd"></path></svg></a><header class="Header_header__hO3lJ"><button class="Hamburger_hamburger__17auO Header_hamburger__lUulX"><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 14H24.5" stroke="#212121" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="hamburger-stroke-top" class="Hamburger_hamburgerStrokeMiddle__I7VpD"></path><path d="M3.5 7H24.5" stroke="#212121" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="Hamburger_hamburgerStrokeTop__oOhFM"></path><path d="M3.5 21H24.5" stroke="#212121" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="Hamburger_hamburgerStrokeBottom__GIQR2"></path></svg></button><a aria-label="Homepage" href="/"><img alt="LlamaIndex" loading="lazy" width="213" height="42" decoding="async" data-nimg="1" class="Header_logo__e5KhT" style="color:transparent" src="/llamaindex.svg"/></a><nav aria-label="Main" data-orientation="horizontal" dir="ltr" style="--content-position:0px"><div style="position:relative"><ul data-orientation="horizontal" class="Nav_MenuList__PrCDJ" dir="ltr"><li><button id="radix-:R6tm:-trigger-radix-:R5mtm:" data-state="closed" aria-expanded="false" aria-controls="radix-:R6tm:-content-radix-:R5mtm:" class="Nav_Trigger__ws43x" data-radix-collection-item="">Products</button></li><li><button id="radix-:R6tm:-trigger-radix-:R9mtm:" data-state="closed" aria-expanded="false" aria-controls="radix-:R6tm:-content-radix-:R9mtm:" class="Nav_Trigger__ws43x" data-radix-collection-item="">Solutions</button></li><li><a class="Nav_Link__ZrzFc" href="/community" data-radix-collection-item="">Community</a></li><li><a class="Nav_Link__ZrzFc" href="/pricing" data-radix-collection-item="">Pricing</a></li><li><a class="Nav_Link__ZrzFc" href="/blog" data-radix-collection-item="">Blog</a></li><li><a class="Nav_Link__ZrzFc" href="/customers" data-radix-collection-item="">Customer stories</a></li><li><a class="Nav_Link__ZrzFc" href="/careers" data-radix-collection-item="">Careers</a></li></ul></div><div class="Nav_ViewportPosition__jmyHM"></div></nav><div class="Header_secondNav__YJvm8"><nav><a href="/contact" class="Link_link__71cl8 Link_link-variant-tertiary__BYxn_ Header_bookADemo__qCuxV">Book a demo</a></nav><a href="https://cloud.llamaindex.ai/" class="Button_button-variant-default__Oi__n Button_button__aJ0V6 Header_button__1HFhY" data-tracking-variant="default"> <!-- -->Get started</a></div><div class="MobileMenu_mobileMenu__g5Fa6"><nav class="MobileMenu_nav__EmtTw"><ul><li><details class="MobileMenu_ListItem__yMtVi"><summary class="MobileMenu_ListItemHeading___yPC6">Products<!-- --> <span class="MobileMenu_icon__6gmaF"><svg width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 1L5.5 5L1 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></span></summary><ul class="MobileMenu_List__XjJr0"><li><a class="MobileMenu_ListItemLink__dnvmV" href="/llamaparse"><div class="MobileMenu_ListItemHeading___yPC6"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.6654 1.66675V6.66675H16.6654M8.33203 10.8334L6.66536 12.5001L8.33203 14.1667M11.6654 14.1667L13.332 12.5001L11.6654 10.8334M12.082 1.66675H4.9987C4.55667 1.66675 4.13275 1.84234 3.82019 2.1549C3.50763 2.46746 3.33203 2.89139 3.33203 3.33341V16.6667C3.33203 17.1088 3.50763 17.5327 3.82019 17.8453C4.13275 18.1578 4.55667 18.3334 4.9987 18.3334H14.9987C15.4407 18.3334 15.8646 18.1578 16.1772 17.8453C16.4898 17.5327 16.6654 17.1088 16.6654 16.6667V6.25008L12.082 1.66675Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>Document parsing</div><p class="MobileMenu_ListItemText__n_MHY">The first and leading GenAI-native parser over your most complex data.</p></a></li><li><a class="MobileMenu_ListItemLink__dnvmV" href="/llamaextract"><div class="MobileMenu_ListItemHeading___yPC6"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.668 1.66675V5.00008C11.668 5.44211 11.8436 5.86603 12.1561 6.17859C12.4687 6.49115 12.8926 6.66675 13.3346 6.66675H16.668M3.33464 5.83341V3.33341C3.33464 2.89139 3.51023 2.46746 3.82279 2.1549C4.13535 1.84234 4.55927 1.66675 5.0013 1.66675H12.5013L16.668 5.83341V16.6667C16.668 17.1088 16.4924 17.5327 16.1798 17.8453C15.8672 18.1578 15.4433 18.3334 15.0013 18.3334L5.05379 18.3326C4.72458 18.3755 4.39006 18.3191 4.09312 18.1706C3.79618 18.0221 3.55034 17.7884 3.38713 17.4992M4.16797 9.16675L1.66797 11.6667M1.66797 11.6667L4.16797 14.1667M1.66797 11.6667H10.0013" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>Data extraction</div><p class="MobileMenu_ListItemText__n_MHY">Extract structured data from documents using a schema-driven engine.</p></a></li><li><a class="MobileMenu_ListItemLink__dnvmV" href="/enterprise"><div class="MobileMenu_ListItemHeading___yPC6"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.16667 15.8333C12.8486 15.8333 15.8333 12.8486 15.8333 9.16667C15.8333 5.48477 12.8486 2.5 9.16667 2.5C5.48477 2.5 2.5 5.48477 2.5 9.16667C2.5 12.8486 5.48477 15.8333 9.16667 15.8333Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.5 17.5L13.875 13.875" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>Knowledge Management</div><p class="MobileMenu_ListItemText__n_MHY">Connect, transform, and index your enterprise data into an agent-accessible knowledge base</p></a></li><li><a class="MobileMenu_ListItemLink__dnvmV" href="/framework"><div class="MobileMenu_ListItemHeading___yPC6"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.0013 6.66659V3.33325H6.66797M1.66797 11.6666H3.33464M16.668 11.6666H18.3346M12.5013 10.8333V12.4999M7.5013 10.8333V12.4999M5.0013 6.66659H15.0013C15.9218 6.66659 16.668 7.41278 16.668 8.33325V14.9999C16.668 15.9204 15.9218 16.6666 15.0013 16.6666H5.0013C4.08083 16.6666 3.33464 15.9204 3.33464 14.9999V8.33325C3.33464 7.41278 4.08083 6.66659 5.0013 6.66659Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>Agent Framework</div><p class="MobileMenu_ListItemText__n_MHY">Orchestrate and deploy multi-agent applications over your data with the #1 agent framework.</p></a></li></ul></details></li><li><details class="MobileMenu_ListItem__yMtVi"><summary class="MobileMenu_ListItemHeading___yPC6">Solutions<!-- --> <span class="MobileMenu_icon__6gmaF"><svg width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 1L5.5 5L1 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></span></summary><ul class="MobileMenu_List__XjJr0"><li><a class="MobileMenu_ListItemLink__dnvmV" href="/solutions/finance"><div class="MobileMenu_ListItemHeading___yPC6"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.3307 6.66675H8.33073C7.8887 6.66675 7.46478 6.84234 7.15222 7.1549C6.83966 7.46746 6.66406 7.89139 6.66406 8.33342C6.66406 8.77544 6.83966 9.19937 7.15222 9.51193C7.46478 9.82449 7.8887 10.0001 8.33073 10.0001H11.6641C12.1061 10.0001 12.53 10.1757 12.8426 10.4882C13.1551 10.8008 13.3307 11.2247 13.3307 11.6667C13.3307 12.1088 13.1551 12.5327 12.8426 12.8453C12.53 13.1578 12.1061 13.3334 11.6641 13.3334H6.66406M9.9974 15.0001V5.00008M18.3307 10.0001C18.3307 14.6025 14.5998 18.3334 9.9974 18.3334C5.39502 18.3334 1.66406 14.6025 1.66406 10.0001C1.66406 5.39771 5.39502 1.66675 9.9974 1.66675C14.5998 1.66675 18.3307 5.39771 18.3307 10.0001Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>Financial Analysts</div></a></li><li><a class="MobileMenu_ListItemLink__dnvmV" href="/solutions/administrative-operations"><div class="MobileMenu_ListItemHeading___yPC6"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.66406 6.66659V15.8333C1.66406 16.2753 1.83966 16.6992 2.15222 17.0118C2.46478 17.3243 2.8887 17.4999 3.33073 17.4999H14.9974M16.6641 14.1666C17.1061 14.1666 17.53 13.991 17.8426 13.6784C18.1551 13.3659 18.3307 12.9419 18.3307 12.4999V7.49992C18.3307 7.05789 18.1551 6.63397 17.8426 6.32141C17.53 6.00885 17.1061 5.83325 16.6641 5.83325H13.4141C13.1353 5.83598 12.8604 5.76876 12.6143 5.63774C12.3683 5.50671 12.159 5.31606 12.0057 5.08325L11.3307 4.08325C11.179 3.85281 10.9724 3.66365 10.7295 3.53275C10.4866 3.40185 10.215 3.3333 9.93906 3.33325H6.66406C6.22204 3.33325 5.79811 3.50885 5.48555 3.82141C5.17299 4.13397 4.9974 4.55789 4.9974 4.99992V12.4999C4.9974 12.9419 5.17299 13.3659 5.48555 13.6784C5.79811 13.991 6.22204 14.1666 6.66406 14.1666H16.6641Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>Administrative Operations</div></a></li><li><a class="MobileMenu_ListItemLink__dnvmV" href="/solutions/engineering"><div class="MobileMenu_ListItemHeading___yPC6"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.3307 15L18.3307 10L13.3307 5M6.66406 5L1.66406 10L6.66406 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>Engineering &amp; R&amp;D</div></a></li><li><a class="MobileMenu_ListItemLink__dnvmV" href="/solutions/customer-support"><div class="MobileMenu_ListItemHeading___yPC6"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.9974 7.50008H16.6641C17.1061 7.50008 17.53 7.67568 17.8426 7.98824C18.1551 8.3008 18.3307 8.72472 18.3307 9.16675V18.3334L14.9974 15.0001H9.9974C9.55537 15.0001 9.13145 14.8245 8.81888 14.5119C8.50632 14.1994 8.33073 13.7754 8.33073 13.3334V12.5001M11.6641 7.50008C11.6641 7.94211 11.4885 8.36603 11.1759 8.67859C10.8633 8.99115 10.4394 9.16675 9.9974 9.16675H4.9974L1.66406 12.5001V3.33341C1.66406 2.41675 2.41406 1.66675 3.33073 1.66675H9.9974C10.4394 1.66675 10.8633 1.84234 11.1759 2.1549C11.4885 2.46746 11.6641 2.89139 11.6641 3.33341V7.50008Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>Customer Support</div></a></li><li><a class="MobileMenu_ListItemLink__dnvmV" href="/solutions/healthcare-pharma"><div class="MobileMenu_ListItemHeading___yPC6"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.0128 3.81671C16.5948 3.39719 16.098 3.06433 15.551 2.8372C15.004 2.61008 14.4176 2.49316 13.8253 2.49316C13.2331 2.49316 12.6466 2.61008 12.0996 2.8372C11.5527 3.06433 11.0559 3.39719 10.6378 3.81671L9.99617 4.46671L9.3545 3.81671C8.93643 3.39719 8.43967 3.06433 7.89268 2.8372C7.3457 2.61008 6.75926 2.49316 6.167 2.49316C5.57474 2.49316 4.9883 2.61008 4.44132 2.8372C3.89433 3.06433 3.39756 3.39719 2.9795 3.81671C1.21283 5.58338 1.1045 8.56671 3.3295 10.8334L9.99617 17.5L16.6628 10.8334C18.8878 8.56671 18.7795 5.58338 17.0128 3.81671Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.91406 9.99992H7.91406L8.33073 9.16659L9.9974 12.9166L11.6641 7.08325L12.9141 9.99992H17.0807" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>Healthcare / Pharma</div></a></li></ul></details></li><li><a class="MobileMenu_Link__5frcx" href="/community">Community</a></li><li><a class="MobileMenu_Link__5frcx" href="/pricing">Pricing</a></li><li><a class="MobileMenu_Link__5frcx" href="/blog">Blog</a></li><li><a class="MobileMenu_Link__5frcx" href="/customers">Customer stories</a></li><li><a class="MobileMenu_Link__5frcx" href="/careers">Careers</a></li></ul></nav><a href="/contact" class="Button_button-variant-ghost__o2AbG Button_button__aJ0V6" data-tracking-variant="ghost"> <!-- -->Talk to us</a><ul class="Socials_socials__8Y_s5 Socials_socials-theme-dark__Hq8lc MobileMenu_socials__JykCO"><li><a href="https://github.com/run-llama/llama_index"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li><a href="https://discord.com/invite/eN6D2HQ4aX"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path></svg></a></li><li><a href="https://twitter.com/llama_index"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></a></li><li><a href="https://www.linkedin.com/company/91154103/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li><a href="https://www.youtube.com/@LlamaIndex"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></li></ul><p class="Text_text__zPO0D Text_text-size-16__PkjFu MobileMenu_copyright__nKVOs">© <!-- -->2025<!-- --> LlamaIndex</p></div></header><main><section class="BlogPost_post__JHNzd"><img alt="" loading="lazy" width="800" height="706" decoding="async" data-nimg="1" class="BlogPost_featuredImage__KGxwX" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2Fd69d0025829fae4ad65ae7a80c08d5f73206e47f-2996x1412.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=828&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2Fd69d0025829fae4ad65ae7a80c08d5f73206e47f-2996x1412.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=1920&amp;q=75 2x" src="/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2Fd69d0025829fae4ad65ae7a80c08d5f73206e47f-2996x1412.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=1920&amp;q=75"/><p class="Text_text__zPO0D Text_text-size-16__PkjFu Text_text-weight-600__fKYth BlogPost_date__6uxQw"><a class="BlogPost_author__mesdl" href="/blog/author/adam-hofmann">Adam Hofmann</a> <!-- -->•<!-- --> <!-- -->2023-07-17</p><h1 class="Text_text__zPO0D Text_text-size-32__koGps BlogPost_title__b2lqJ">Building Better Tools for LLM Agents</h1><ul class="BlogPost_tags__13pBH"><li><a class="Badge_badge___1ssn" href="/blog/tag/ai"><span class="Text_text__zPO0D Text_text-size-16__PkjFu Text_text-weight-500__f2npw">AI</span></a></li><li><a class="Badge_badge___1ssn" href="/blog/tag/llamaindex"><span class="Text_text__zPO0D Text_text-size-16__PkjFu Text_text-weight-500__f2npw">Llamaindex</span></a></li><li><a class="Badge_badge___1ssn" href="/blog/tag/llm"><span class="Text_text__zPO0D Text_text-size-16__PkjFu Text_text-weight-500__f2npw">LLM</span></a></li><li><a class="Badge_badge___1ssn" href="/blog/tag/agents"><span class="Text_text__zPO0D Text_text-size-16__PkjFu Text_text-weight-500__f2npw">Agents</span></a></li><li><a class="Badge_badge___1ssn" href="/blog/tag/nlp"><span class="Text_text__zPO0D Text_text-size-16__PkjFu Text_text-weight-500__f2npw">NLP</span></a></li></ul><div class="BlogPost_htmlPost__Z5oDL"><p>Over the past month I’ve been diving into the world of Large Language Model (LLM) Agents and building out LlamaIndex’s library of tools for use with agents. I helped to lead the LlamaHub Tools effort as part of broader <a href="https://medium.com/llamaindex-blog/data-agents-eed797d7972f" rel="noopener">Data Agents launch</a> last week.</p><p>In the process of building out LlamaHub Tools I’ve collected some techniques for creating effective and easy to use tools, and want to share some of my thoughts.</p><h1>Context on LlamaHub Tools</h1><p><a href="https://llamahub.ai/" rel="noopener ugc nofollow" target="_blank">LlamaHub Tools</a> allow LLMs like ChatGPT to connect to APIs and act on a user’s behalf to create, read, update and delete data. Examples of tools that we’ve put together include <a href="https://llamahub.ai/l/tools-gmail" rel="noopener ugc nofollow" target="_blank">drafting and sending emails</a>, <a href="https://llamahub.ai/l/tools-google_calendar" rel="noopener ugc nofollow" target="_blank">reading and creating Google Calendar invite</a>s, <a href="https://llamahub.ai/l/tools-wikipedia" rel="noopener ugc nofollow" target="_blank">searching Wikipedia</a>, and that’s just a few of the 15 tools we are releasing on launch.</p><h2>Overview of tool abstractions</h2><p>So how exactly do LlamaHub Tools work? The LlamaHub tool abstractions allow you to easily write Python functions that can be understood and called by Agents. Instead of trying to make an Agent do complicated mathematics for example, we can provide the Agent with a Tool that calls Wolfram Alpha and provides the result to the Agent:</p><pre><span id="14b4" class="qn on gt qk b bf qo qp l qq qr"><span class="hljs-keyword">from</span> llama_index.tools.base <span class="hljs-keyword">import</span> BaseToolSpec

QUERY_URL_TMPL = <span class="hljs-string">"http://api.wolframalpha.com/v1/result?appid={app_id}&amp;amp;i={query}"</span>

<span class="hljs-comment"># Inherit from the LlamaIndex BaseToolSpec abstraction</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WolframAlphaToolSpec</span>(<span class="hljs-title class_ inherited__">BaseToolSpec</span>):

  <span class="hljs-comment"># Define the functions that we export to the LLM</span>
    spec_functions = [<span class="hljs-string">"wolfram_alpha_query"</span>]

  <span class="hljs-comment"># Initialize with our wolfram alpha API key</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, app_id: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span></span>) -&amp;gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""Initialize with parameters."""</span>
        self.token = app_id
  
  <span class="hljs-comment"># Our function to be called by the Agent</span>
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">wolfram_alpha_query</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span></span>):
          <span class="hljs-string">"""
          Make a query to wolfram alpha about a mathematical or scientific problem.
  
          Example inputs:
              "(7 * 12 ^ 10) / 321"
              "How many calories are there in a pound of strawberries"
  
          Args:
              query (str): The query to be passed to wolfram alpha.
  
          """</span>
          response = requests.get(QUERY_URL_TMPL.<span class="hljs-built_in">format</span>(app_id=self.token, query=urllib.parse.quote_plus(query)))
          <span class="hljs-keyword">return</span> response.text</span></pre><p>The above code is enough to define a LlamaIndex Tool that allows the Agent to query to Wolfram Alpha. No more incorrect guesses at math problems! We can initialize an instance of the Tool Spec like this:</p><pre><span id="c47c" class="qn on gt qk b bf qo qp l qq qr"># Initialize an instance of the Tool
wolfram_spec = WolframAlphaToolSpec(app_id="your-key")
# Convert the Tool Spec to a list of tools. In this case we just have one tool.
tools = wolfram_spec.to_tool_list()
# Convert the tool to an OpenAI function and inspect
print(tools[0].metadata.to_openai_function())</span></pre><p>Here’s the cleaned up output of the print statement:</p><pre><span id="5f4f" class="qn on gt qk b bf qo qp l qq qr">{
  <span class="hljs-string">'description'</span>: <span class="hljs-string">'
    Make a query to wolfram alpha about a mathematical or scientific problem.
  
          Example inputs:
              "(7 * 12 ^ 10) / 321"
              "How many calories are there in a pound of strawberries"
  
          Args:
              query (str): The query to be passed to wolfram alpha.'</span>,
  <span class="hljs-string">'name'</span>: <span class="hljs-string">'wolfram_alpha_query'</span>,
  <span class="hljs-string">'parameters'</span>: {
    <span class="hljs-string">'properties'</span>: {<span class="hljs-string">'query'</span>: {<span class="hljs-string">'title'</span>: <span class="hljs-string">'Query'</span>, <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>}},
    <span class="hljs-string">'title'</span>: <span class="hljs-string">'wolfram_alpha_query'</span>,
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'object'</span>
  }
}</span></pre><p>We can see that the <a href="https://en.wikipedia.org/wiki/Docstring" rel="noopener ugc nofollow" target="_blank">docstring</a> describing how to use the Tool get passed to the Agent. Additionally, the parameters, type info and function name are passed along to give the Agent a strong idea on how it can use this function. All of this information is essentially acting as the prompt for how the agent understands the tool.</p><p>Inheriting from the BaseToolSpec class means it’s very simple to write Tools for Agents to use. In fact, the above tool definition is only 9 lines of code, ignoring white space, imports and comments. We can easily get the function ready for Agents to use without any heavy boilerplate or modifications. Let’s look at loading the Tool into an OpenAI Agent:</p><pre><span id="bbe7" class="qn on gt qk b bf qo qp l qq qr">agent = OpenAIAgent.from_tools(tools, verbose=True)
agent.chat(<span class="hljs-string">'What is (7 * 12 ^ 10) / 321'</span>)
<span class="hljs-string">""</span><span class="hljs-string">" OUTPUT:
=== Calling Function ===
Calling function: wolfram_alpha_query with args: {
  "</span>query<span class="hljs-string">": "</span>(<span class="hljs-number">7</span> * <span class="hljs-number">12</span> ^ <span class="hljs-number">10</span>) / <span class="hljs-number">14</span><span class="hljs-string">"
}
Got output: 30958682112
========================
Response(response='The result of the expression (7 * 12 ^ 10) / 14 is 30,958,682,112.', source_nodes=[], metadata=None)
"</span><span class="hljs-string">""</span></span></pre><p>And we can test out passing this query to ChatGPT without the tools:</p><pre><span id="46fd" class="qn on gt qk b bf qo qp l qq qr">&amp;gt; <span class="hljs-string">'What is (7 * 12 ^ 10) / 321'</span>
<span class="hljs-string">""</span><span class="hljs-string">"
To calculate the expression (7 * 12^10) / 14, you need to follow the order of operations, which is parentheses, exponents, multiplication, and division (from left to right).

Step 1: Calculate the exponent 12^10.
12^10 = 619,173,642,24.

Step 2: Multiply 7 by the result from Step 1.
7 * 619,173,642,24 = 4,333,215,496,68.

Step 3: Divide the result from Step 2 by 14.
4,333,215,496,68 / 14 = 309,515,392,62.

Therefore, the result of the expression (7 * 12^10) / 14 is 309,515,392,62.
"</span><span class="hljs-string">""</span></span></pre><p>This example should show how easily you can write new Tools for use with Agents. For the rest of the blog post I’ll be talking about tips and tricks I’ve found to write more functional and effective tools. Hopefully by the end of the blog post you are excited to write and contribute some Tools of your own!</p><h1>Techniques for building better tools</h1><p>Below are a variety of tactics for writing more usable and functional tools to minimize friction when interfacing with the Agent. Not all of the tactics apply to every tool, but usually at least a few of the techniques below will prove valuable.</p><h2>Writing useful tool prompts</h2><p>Here’s an example of the function signature and docstring for a tool that an Agent can call to create a draft email.</p><pre><span id="bde1" class="qn on gt qk b bf qo qp l qq qr"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_draft</span>(<span class="hljs-params">
        <span class="hljs-variable language_">self</span>,
        <span class="hljs-symbol">to:</span> <span class="hljs-title class_">List</span>[str],
        <span class="hljs-symbol">subject:</span> str,
        <span class="hljs-symbol">message:</span> str
    </span>) -&amp;gt; <span class="hljs-symbol">str:</span>
        <span class="hljs-string">""</span><span class="hljs-string">"Create and insert a draft email.
           Print the returned draft's message and id.
           Returns: Draft object, including draft id and message meta data.

        Args:
            to (List[str]): The email addresses to send the message to, eg ['adam@example.com']
            subject (str): The subject for the event
            message (str): The message for the event
        "</span><span class="hljs-string">""</span></span></pre><p>This prompt takes advantage of a few different patterns to ensure that the agent can use the tool effectively:</p><ul><li>Give a concise description of the function and its purpose</li><li>Inform the Agent on what data will be returned from this function</li><li>List the arguments that the function accepts, with descriptions and type information</li><li>Give example values for arguments with a specific format, eg adam@example.com</li></ul><p>Tool prompts should be concise as to not take up too much length in context, but also informative enough that the agent can use the tool without making mistakes.</p><h2>Making tools tolerant of partial inputs</h2><p>One way to help Agents make fewer mistakes is to write tools that are more <em class="ra">tolerant</em> of their inputs, for example by making inputs optional when the value can be inferred from somewhere else. Take the example of drafting an email, but this time let’s consider a tool that updates a draft email:</p><pre><span id="77ab" class="qn on gt qk b bf qo qp l qq qr">def <span class="hljs-title function_">update_draft</span><span class="hljs-params">(
        self,
        draft_id: str,
        to: Optional[List[str]] = None,
        subject: Optional[str] = None,
        message: Optional[str] = None,
    )</span> -&amp;gt; str:
        <span class="hljs-string">""</span><span class="hljs-string">"Update a draft email.
           Print the returned draft's message and id.
           This function is required to be passed a draft_id that is obtained when creating messages
           Returns: Draft object, including draft id and message meta data.

        Args:
            draft_id (str): the id of the draft to be updated
            to (Optional[str]): The email addresses to send the message to
            subject (Optional[str]): The subject for the event
            message (Optional[str]): The message for the event
        "</span><span class="hljs-string">""</span></span></pre><p>The Gmail API <strong>requires</strong> all of the above values when updating a draft, however using just the <code class="cw rb rc rd qk b">draft_id</code> we can fetch the current content of the draft and use the existing values as defaults if the Agent did not provide the values when updating the draft:</p><pre><span id="4342" class="qn on gt qk b bf qo qp l qq qr"><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_draft</span>(<span class="hljs-params">...</span>):
  ...
  draft = self.get_draft(draft_id)
  headers = draft[<span class="hljs-string">'message'</span>][<span class="hljs-string">'payload'</span>][<span class="hljs-string">'headers'</span>]
  <span class="hljs-keyword">for</span> header <span class="hljs-keyword">in</span> headers:
      <span class="hljs-keyword">if</span> header[<span class="hljs-string">'name'</span>] == <span class="hljs-string">'To'</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> to:
          to = header[<span class="hljs-string">'value'</span>]
      <span class="hljs-keyword">elif</span> header[<span class="hljs-string">'name'</span>] == <span class="hljs-string">'Subject'</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> subject:
          subject = header[<span class="hljs-string">'value'</span>]
    <span class="hljs-keyword">elif</span> header[<span class="hljs-string">'name'</span>] == <span class="hljs-string">'Message'</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> message:
      message = header[<span class="hljs-string">'values'</span>]
  ...</span></pre><p>By providing the above logic in the <code class="cw rb rc rd qk b">update_draft</code> function, the Agent can invoke <code class="cw rb rc rd qk b">update_draft</code> with only one of the fields (and the <code class="cw rb rc rd qk b">draft_id</code>), and we can update the draft as the user expects. This means that in more circumstances the Agent can complete the task successfully, instead of returning an error or needing to ask for more information.</p><h2>Validating input and Agent error handling</h2><p>Despite best efforts at prompting and tolerance, we can end up in circumstances where the Agent invokes a tool in a way that it can’t complete the task at hand. However, we can detect this and prompt the Agent to recover the error on its own.</p><p>For example, in the <code class="cw rb rc rd qk b">update_draft</code> example above, what do we do if the agent calls the function without a <code class="cw rb rc rd qk b">draft_id</code>? We could simply pass along the null value and return an error from the Gmail API library, but we could also detect that a null <code class="cw rb rc rd qk b">draft_id</code> will invariably cause an error, and return a prompt for the agent instead:</p><pre><span id="42b1" class="qn on gt qk b bf qo qp l qq qr"><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_draft</span>(<span class="hljs-params">...</span>):
  <span class="hljs-keyword">if</span> draft_id == <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">"You did not provide a draft id when calling this function. If you previously created or retrieved the draft, the id is available in context"</span></span></pre><p>Now, if the Agent invokes <code class="cw rb rc rd qk b">update_draft</code> without a <code class="cw rb rc rd qk b">draft_id</code> , it is made aware of the exact mistake it made and given instructions on how it can correct the issue.</p><p>In my experience working with this tool, the Agent will often immediately call the <code class="cw rb rc rd qk b">update_draft</code> function in the correct way when receiving this prompt, or if there is no <code class="cw rb rc rd qk b">draft_id</code> available, it will inform the user of the issue and ask the user for a <code class="cw rb rc rd qk b">draft_id</code>. Either scenario is much better than crashing or returning an opaque error from a library to the user.</p><h2>Providing simple functions related to the tool</h2><p>Agents can struggle at what would otherwise be simple functions for a computer to calculate. For example, when building a tool for creating events in Google Calendar, a user may prompt the Agent with something like this:</p><blockquote><p id="fca1" class="nn no ra np b nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok gm bj"><em class="gt">Create an event on my Calendar to discuss the Tools PR with </em><a href="mailto:adam@example.com" rel="noopener ugc nofollow" target="_blank"><em class="gt">adam@example.com</em></a><em class="gt"> tomorrow at 4pm</em></p></blockquote><p>Can you see the problem? If we try asking ChatGPT what day it is:</p><pre><span id="b470" class="qn on gt qk b bf qo qp l qq qr">agent.chat('what day is it?')
# &gt; I apologize for the confusion. As an AI language model, I don't have real-time data or access to the current date. My responses are based on the information I was last trained on, which is up until September 2021. To find out the current day, I recommend checking your device's clock, referring to a calendar, or checking an online source for the current date.</span></pre><p>Agents won’t know what the current date is, and so the Agent would either call the function incorrectly, providing a string like <code class="cw rb rc rd qk b">tomorrow</code> for the date, hallucinate a date sometime in the past based on when it was trained, or put the burden on the user to tell it the date. All of the above actions cause friction and frustration for the user.</p><p>Instead, in the Google Calendar Tool Spec we provide a simple deterministic function for the agent to call if it needs to fetch the date:</p><pre><span id="3a97" class="qn on gt qk b bf qo qp l qq qr"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_date</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""
        A function to return todays date.
        Call this before any other functions if you are unaware of the current date
        """</span>
        <span class="hljs-keyword">return</span> datetime.date.today()</span></pre><p>Now, when the Agent tries to handle the prompt above, it can first call the function to get the date and then create the event as the user requested, inferring the date for “tomorrow” or “a week from now”. No errors, no guesses and no need for further user interaction!</p><h2>Returning prompts from functions that perform mutations</h2><p>Some functions perform mutations to data in a way that it isn’t clear what useful data can be returned from the function, back to the agent. For example, in the Google Calendar tool if an event is successfully created it doesn’t make sense to return the content of the event back to the Agent, as the agent just passed in all of the information and thus has it in context.</p><p>Generally with functions that are focused on mutations (create, update, delete) we can help the Agent understand its actions better by using the return value of these functions to further prompt the agent. For example, from the Google Calendar <code class="cw rb rc rd qk b">create_event</code> tool we could do the following:</p><pre><span id="ae80" class="qn on gt qk b bf qo qp l qq qr"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_event</span>(<span class="hljs-params">...</span>):
  ...
  <span class="hljs-keyword">return</span> <span class="hljs-string">'Event created succesfully! You can move onto the next step.'</span>  </span></pre><p>This helps the agent register that the action succeeded and encourages it to complete the action it was prompted for, especially if creating the google calendar event is only a single step in a multiple step instruction. We can still return ids as part of these prompts as well:</p><pre><span id="5af9" class="qn on gt qk b bf qo qp l qq qr"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_event</span>(<span class="hljs-params">...</span>):
  ...
  event = service.events().insert(...).execute()
  <span class="hljs-keyword">return</span> <span class="hljs-string">'Event created with id {event.id}! You can move onto the next step.'</span></span></pre><h2>Storing large responses in indices for the Agent to read</h2><p>One consideration when building tools that has been mentioned already is the size of the context window the Agent has. Currently, LLMs tend to have context windows from 4k-16k tokens, however it can certainly be larger or smaller. If the size of the data that a tool would return is larger than the context window, the Agent will be unable to process the data and error out.</p><p>One consideration when building tools that has been mentioned already is the size of the context window the Agent has. Currently, LLMs tend to have context windows from 4k-16k tokens, however it can certainly be larger or smaller. If the size of the data that a tool would return is larger than the context window, the Agent will be unable to process the data and error out.</p><p>The only consideration that needs to be made when creating tools that might need to be wrapped by the LoadAndSearchTool, is they need to return a list of LlamaIndex documents. For a tool that returns a string, the only modification you need to make to have it be compatible with the LoadAndSearchTool is wrapping it in a document and an array:</p><pre><span id="b54f" class="qn on gt qk b bf qo qp l qq qr"><span class="hljs-keyword">from</span> llama_index.readers.schema.base <span class="hljs-keyword">import</span> Document

<span class="hljs-comment"># Not compatible</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">large_text_response_function</span>():
  ...
  <span class="hljs-keyword">return</span> result

<span class="hljs-comment"># LoadAndSearch compatible</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">large_text_response_function</span>():
  ...
  <span class="hljs-keyword">return</span> [Document(text=result)]</span></pre><h2>Verify how the Agent understands the tool</h2><p>A useful technique for debugging tools in development is to <strong>ask the Agent about its own tools</strong>: the tools it has available, what arguments the tools accept, what those arguments represent, and what the tool is used for. The responses of the Agent are useful in determining where your prompts might be lacking or helping pinpoint why an Agent is failing to successfully use a tool that you are developing.</p><p>An example conversation debugging the Google Calendar Tool Spec, assuming you have setup an Agent similar to the example notebook:</p><pre><span id="fad1" class="qn on gt qk b bf qo qp l qq qr">agent.<span class="hljs-title function_">chat</span>(<span class="hljs-string">'what tools do you have available'</span>)
# I have the following tools available
#   <span class="hljs-number">1.</span> <span class="hljs-string">`load_data`</span>: <span class="hljs-title class_">This</span> tool allows me to load data <span class="hljs-keyword">from</span> your calendar. <span class="hljs-title class_">It</span> can retrieve a specified number <span class="hljs-keyword">of</span> events starting <span class="hljs-keyword">from</span> a given date.
#   <span class="hljs-number">2.</span> <span class="hljs-string">`create_event`</span>: <span class="hljs-title class_">This</span> tool allows me to create an event on your calendar. <span class="hljs-title class_">You</span> can provide details such <span class="hljs-keyword">as</span> the title, description, location, start datetime, end datetime, and attendees.
#   <span class="hljs-number">3.</span> <span class="hljs-string">`get_date`</span>: <span class="hljs-title class_">This</span> tool returns today<span class="hljs-string">'s date. It can be used to ensure that the correct date is used when working with other tools.
# Please let me know if you would like more information about any of these tools or if you have any specific requests.
agent.chat('</span>what <span class="hljs-variable language_">arguments</span> does the load_data tool take<span class="hljs-string">')
# '</span><span class="hljs-title class_">The</span> <span class="hljs-string">`load_data`</span> tool takes the following <span class="hljs-attr">arguments</span>:
#   <span class="hljs-number">1.</span> <span class="hljs-string">`number_of_results`</span> (optional, <span class="hljs-attr">default</span>: <span class="hljs-number">100</span>): <span class="hljs-title class_">Specifies</span> the number <span class="hljs-keyword">of</span> events to <span class="hljs-keyword">return</span> <span class="hljs-keyword">from</span> your calendar.
#   <span class="hljs-number">2.</span> <span class="hljs-string">`start_date`</span> (optional): <span class="hljs-title class_">Specifies</span> the start date <span class="hljs-keyword">from</span> which to retrieve events. <span class="hljs-title class_">It</span> can be provided <span class="hljs-keyword">as</span> a string <span class="hljs-keyword">in</span> <span class="hljs-variable constant_">ISO</span> format (e.<span class="hljs-property">g</span>., <span class="hljs-string">"2023-07-05"</span>) or <span class="hljs-keyword">as</span> a <span class="hljs-string">`datetime.date`</span> object.
# <span class="hljs-title class_">You</span> can use these <span class="hljs-variable language_">arguments</span> to customize the number <span class="hljs-keyword">of</span> events and the start date <span class="hljs-keyword">for</span> retrieving data <span class="hljs-keyword">from</span> your calendar.</span></pre><h1>Concluding thoughts</h1><p>Building tools for Agents requires you to think critically about how users will interact with the Agent, and to try and anticipate any possible usage patterns. Building well thought out tools that can be resilient to errors and issues requires careful consideration and testing of possible use cases. I hope that these reflections and techniques assist you in creating new tools for Agents, and don’t forget to share your tools on <a href="https://llama-hub-ui.vercel.app/" rel="noopener ugc nofollow" target="_blank">LlamaHub</a>.</p></div><div class="BlogPost_relatedPosts__0z6SN"><h2 class="Text_text__zPO0D Text_text-align-center__HhKqo Text_text-size-16__PkjFu Text_text-weight-400__5ENkK Text_text-family-spaceGrotesk__E4zcE BlogPost_relatedPostsTitle___JIrW">Related articles</h2><ul class="BlogPost_relatedPostsList__uOKzB"><li><div class="CardBlog_card__mm0Zw"><div class="CardBlog_thumbnail__XCu_R"><img alt="" loading="lazy" width="400" height="280" decoding="async" data-nimg="1" class="CardBlog_image__I2Asd" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2F89380b5946452462d6c4a91f8109f705dc044c82-1080x1080.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=640&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2F89380b5946452462d6c4a91f8109f705dc044c82-1080x1080.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=828&amp;q=75 2x" src="/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2F89380b5946452462d6c4a91f8109f705dc044c82-1080x1080.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=828&amp;q=75"/></div><p class="Text_text__zPO0D Text_text-size-20__LNa6Q Text_text-weight-600__fKYth CardBlog_title__qC51U"><a href="/blog/introducing-the-spreadsheet-agent-in-private-preview">Introducing the Spreadsheet Agent, in private preview</a></p><p class="Text_text__zPO0D Text_text-size-16__PkjFu">2025-06-05</p></div></li><li><div class="CardBlog_card__mm0Zw"><div class="CardBlog_thumbnail__XCu_R"><img alt="" loading="lazy" width="400" height="280" decoding="async" data-nimg="1" class="CardBlog_image__I2Asd" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2F9fdb15bafdf8c0921f36c6cd8cdac43c8ca87e27-2232x1562.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=640&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2F9fdb15bafdf8c0921f36c6cd8cdac43c8ca87e27-2232x1562.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=828&amp;q=75 2x" src="/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2F9fdb15bafdf8c0921f36c6cd8cdac43c8ca87e27-2232x1562.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=828&amp;q=75"/></div><p class="Text_text__zPO0D Text_text-size-20__LNa6Q Text_text-weight-600__fKYth CardBlog_title__qC51U"><a href="/blog/rag-is-dead-long-live-agentic-retrieval">RAG is dead, long live agentic retrieval</a></p><p class="Text_text__zPO0D Text_text-size-16__PkjFu">2025-05-29</p></div></li><li><div class="CardBlog_card__mm0Zw"><div class="CardBlog_thumbnail__XCu_R"><img alt="" loading="lazy" width="400" height="280" decoding="async" data-nimg="1" class="CardBlog_image__I2Asd" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2Fadd5d90d8aa67ca128a834e2b8fcbb7746c585cd-734x379.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=640&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2Fadd5d90d8aa67ca128a834e2b8fcbb7746c585cd-734x379.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=828&amp;q=75 2x" src="/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2Fadd5d90d8aa67ca128a834e2b8fcbb7746c585cd-734x379.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=828&amp;q=75"/></div><p class="Text_text__zPO0D Text_text-size-20__LNa6Q Text_text-weight-600__fKYth CardBlog_title__qC51U"><a href="/blog/improved-long-and-short-term-memory-for-llamaindex-agents">Improved Long &amp; Short-Term Memory for LlamaIndex Agents</a></p><p class="Text_text__zPO0D Text_text-size-16__PkjFu">2025-05-13</p></div></li><li><div class="CardBlog_card__mm0Zw"><div class="CardBlog_thumbnail__XCu_R"><img alt="" loading="lazy" width="400" height="280" decoding="async" data-nimg="1" class="CardBlog_image__I2Asd" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2Fdde8a9c277605647a344c6f4cd83d1ad192e1a09-1024x1536.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=640&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2Fdde8a9c277605647a344c6f4cd83d1ad192e1a09-1024x1536.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=828&amp;q=75 2x" src="/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2F7m9jw85w%2Fproduction%2Fdde8a9c277605647a344c6f4cd83d1ad192e1a09-1024x1536.png%3Ffit%3Dmax%26auto%3Dformat&amp;w=828&amp;q=75"/></div><p class="Text_text__zPO0D Text_text-size-20__LNa6Q Text_text-weight-600__fKYth CardBlog_title__qC51U"><a href="/blog/bending-without-breaking-optimal-design-patterns-for-effective-agents">Bending without breaking: optimal design patterns for effective agents</a></p><p class="Text_text__zPO0D Text_text-size-16__PkjFu">2025-04-25</p></div></li></ul></div></section></main><footer class="Footer_footer__eNA9m"><div class="Footer_navContainer__7bvx4"><div class="Footer_logoContainer__3EpzI"><img alt="LlamaIndex" loading="lazy" width="213" height="42" decoding="async" data-nimg="1" style="color:transparent" src="/llamaindex.svg"/><div class="Footer_socialContainer__GdOgk"><ul class="Socials_socials__8Y_s5"><li><a href="https://github.com/run-llama/llama_index"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li><a href="https://discord.com/invite/eN6D2HQ4aX"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path></svg></a></li><li><a href="https://twitter.com/llama_index"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></a></li><li><a href="https://www.linkedin.com/company/91154103/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li><a href="https://www.youtube.com/@LlamaIndex"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></li></ul></div></div><div class="Footer_nav__BLEuE"><div><h3 class="Text_text__zPO0D Text_text-size-20__LNa6Q Text_text-weight-600__fKYth Footer_navHeader__9o83e"><a href="/">LlamaIndex</a></h3><ul><li><a href="/blog"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Blog</span></a></li><li><a href="/partners"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Partners</span></a></li><li><a href="/careers"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Careers</span></a></li><li><a href="/contact"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Contact</span></a></li><li><a href="/brand"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Brand</span></a></li><li><a href="https://llamaindex.statuspage.io" target="_blank"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Status</span></a></li><li><a href="https://app.vanta.com/runllama.ai/trust/pkcgbjf8b3ihxjpqdx17nu" target="_blank"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Trust Center</span></a></li></ul></div><div><h3 class="Text_text__zPO0D Text_text-size-20__LNa6Q Text_text-weight-600__fKYth Footer_navHeader__9o83e"><a href="/enterprise">Enterprise</a></h3><ul><li><a href="https://cloud.llamaindex.ai" data-tracking-variant="link" data-tracking-section="footer"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">LlamaCloud</span></a></li><li><a href="https://cloud.llamaindex.ai/parse" data-tracking-variant="link" data-tracking-section="footer"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">LlamaParse</span></a></li><li><a href="/customers"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Customers</span></a></li><li><a href="/llamacloud-sharepoint-data-loading-for-generative-ai" data-tracking-variant="link" data-tracking-section="footer"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">SharePoint</span></a></li><li><a href="/llamacloud-aws-s3-data-loading-for-generative-ai" data-tracking-variant="link" data-tracking-section="footer"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">AWS S3</span></a></li><li><a href="/llamacloud-azure-blob-storage-data-loading-for-generative-ai" data-tracking-variant="link" data-tracking-section="footer"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Azure Blob Storage</span></a></li><li><a href="/llamacloud-google-drive-data-loading-for-generative-ai" data-tracking-variant="link" data-tracking-section="footer"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Google Drive</span></a></li> </ul></div><div><h3 class="Text_text__zPO0D Text_text-size-20__LNa6Q Text_text-weight-600__fKYth Footer_navHeader__9o83e"><a href="/framework">Framework</a></h3><ul><li><a href="https://pypi.org/project/llama-index/"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Python package</span></a></li><li><a href="https://docs.llamaindex.ai"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Python docs</span></a></li><li><a href="https://www.npmjs.com/package/llamaindex"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">TypeScript package</span></a></li><li><a href="https://ts.llamaindex.ai"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">TypeScript docs</span></a></li><li><a href="https://llamahub.ai"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">LlamaHub</span></a></li><li><a href="https://github.com/run-llama"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">GitHub</span></a></li></ul></div><div><h3 class="Text_text__zPO0D Text_text-size-20__LNa6Q Text_text-weight-600__fKYth Footer_navHeader__9o83e"><a href="/community">Community</a></h3><ul><li><a href="/community#newsletter"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Newsletter</span></a></li><li><a href="https://discord.com/invite/eN6D2HQ4aX"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Discord</span></a></li><li><a href="https://www.linkedin.com/company/91154103/"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">LinkedIn</span></a></li><li><a href="https://twitter.com/llama_index"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">Twitter/X</span></a></li><li><a href="https://www.youtube.com/@LlamaIndex"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">YouTube</span></a></li><li><a href="https://bsky.app/profile/llamaindex.bsky.social"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">BlueSky</span></a></li></ul></div><div><h3 class="Text_text__zPO0D Text_text-size-20__LNa6Q Text_text-weight-600__fKYth Footer_navHeader__9o83e">Starter projects</h3><ul><li><a href="https://www.npmjs.com/package/create-llama"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">create-llama</span></a></li><li><a href="https://secinsights.ai"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">SEC Insights</span></a></li><li><a href="https://github.com/run-llama/llamabot"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">LlamaBot</span></a></li><li><a href="https://docs.llamaindex.ai/en/stable/use_cases/q_and_a/rag_cli.html"><span class="Text_text__zPO0D Text_text-size-16__PkjFu">RAG CLI</span></a></li></ul></div></div></div><div class="Footer_copyrightContainer__mBKsT"><p class="Text_text__zPO0D Text_text-size-14__6Qc26 Footer_copyright__vFlrA">© <!-- -->2025<!-- --> LlamaIndex</p><div class="Footer_legalNav__O1yJA"><p class="Text_text__zPO0D Text_text-size-14__6Qc26 Footer_copyright__vFlrA"><a href="/files/privacy-notice.pdf">Privacy Notice</a></p><p class="Text_text__zPO0D Text_text-size-14__6Qc26 Footer_copyright__vFlrA"><a href="/files/terms-of-service.pdf">Terms of Service</a></p><p class="Text_text__zPO0D Text_text-size-14__6Qc26 Footer_copyright__vFlrA"><a href="https://bit.ly/llamaindexdpa">Data Processing Addendum</a></p></div></div></footer></div><svg xmlns="http://www.w3.org/2000/svg" class="flt_svg" style="display:none"><defs><filter id="flt_tag"><feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="2"></feGaussianBlur><feColorMatrix in="blur" result="flt_tag" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 19 -9"></feColorMatrix><feComposite in="SourceGraphic" in2="flt_tag" operator="atop"></feComposite></filter><filter id="svg_blur_large"><feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="8"></feGaussianBlur><feColorMatrix in="blur" result="svg_blur_large" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 19 -9"></feColorMatrix><feComposite in="SourceGraphic" in2="svg_blur_large" operator="atop"></feComposite></filter></defs></svg></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"page":{"announcement":{"_createdAt":"2024-12-15T02:26:13Z","_id":"announcement","_rev":"bDjEm7gsnDBrRrmjaaG2yK","_type":"announcement","_updatedAt":"2025-05-19T19:20:19Z","title":"Meet LlamaIndex at the Databricks Data + AI Summit!","url":"http://48755185.hs-sites.com/llamaindex-0"},"post":{"_createdAt":"2024-02-22T21:47:07Z","_id":"cf81c41f-60d6-43f1-82ee-658b638830b8","_rev":"Ys5IzmCaJ2UnW2RAX7UgXe","_type":"blogPost","_updatedAt":"2025-05-21T20:39:55Z","announcement":[{"_createdAt":"2024-12-15T02:26:13Z","_id":"announcement","_rev":"bDjEm7gsnDBrRrmjaaG2yK","_type":"announcement","_updatedAt":"2025-05-19T19:20:19Z","title":"Meet LlamaIndex at the Databricks Data + AI Summit!","url":"http://48755185.hs-sites.com/llamaindex-0"}],"authors":[{"_createdAt":"2024-02-22T19:51:09Z","_id":"86f9efed-3c22-4ee0-b5c8-7a02ece71f04","_rev":"9mLWnJtMvL1OgKPLcXbz07","_type":"people","_updatedAt":"2024-02-24T20:08:04Z","name":"Adam Hofmann","slug":{"_type":"slug","current":"adam-hofmann"}}],"featured":false,"htmlContent":"\u003cp\u003eOver the past month I’ve been diving into the world of Large Language Model (LLM) Agents and building out LlamaIndex’s library of tools for use with agents. I helped to lead the LlamaHub Tools effort as part of broader \u003ca href=\"https://medium.com/llamaindex-blog/data-agents-eed797d7972f\" rel=\"noopener\"\u003eData Agents launch\u003c/a\u003e last week.\u003c/p\u003e\u003cp\u003eIn the process of building out LlamaHub Tools I’ve collected some techniques for creating effective and easy to use tools, and want to share some of my thoughts.\u003c/p\u003e\u003ch1\u003eContext on LlamaHub Tools\u003c/h1\u003e\u003cp\u003e\u003ca href=\"https://llamahub.ai/\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003eLlamaHub Tools\u003c/a\u003e allow LLMs like ChatGPT to connect to APIs and act on a user’s behalf to create, read, update and delete data. Examples of tools that we’ve put together include \u003ca href=\"https://llamahub.ai/l/tools-gmail\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003edrafting and sending emails\u003c/a\u003e, \u003ca href=\"https://llamahub.ai/l/tools-google_calendar\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003ereading and creating Google Calendar invite\u003c/a\u003es, \u003ca href=\"https://llamahub.ai/l/tools-wikipedia\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003esearching Wikipedia\u003c/a\u003e, and that’s just a few of the 15 tools we are releasing on launch.\u003c/p\u003e\u003ch2\u003eOverview of tool abstractions\u003c/h2\u003e\u003cp\u003eSo how exactly do LlamaHub Tools work? The LlamaHub tool abstractions allow you to easily write Python functions that can be understood and called by Agents. Instead of trying to make an Agent do complicated mathematics for example, we can provide the Agent with a Tool that calls Wolfram Alpha and provides the result to the Agent:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"14b4\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e llama_index.tools.base \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e BaseToolSpec\n\nQUERY_URL_TMPL = \u003cspan class=\"hljs-string\"\u003e\"http://api.wolframalpha.com/v1/result?appid={app_id}\u0026amp;amp;i={query}\"\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Inherit from the LlamaIndex BaseToolSpec abstraction\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eWolframAlphaToolSpec\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseToolSpec\u003c/span\u003e):\n\n  \u003cspan class=\"hljs-comment\"\u003e# Define the functions that we export to the LLM\u003c/span\u003e\n    spec_functions = [\u003cspan class=\"hljs-string\"\u003e\"wolfram_alpha_query\"\u003c/span\u003e]\n\n  \u003cspan class=\"hljs-comment\"\u003e# Initialize with our wolfram alpha API key\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, app_id: \u003cspan class=\"hljs-type\"\u003eOptional\u003c/span\u003e[\u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e] = \u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e\u003c/span\u003e) -\u0026amp;gt; \u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e:\n        \u003cspan class=\"hljs-string\"\u003e\"\"\"Initialize with parameters.\"\"\"\u003c/span\u003e\n        self.token = app_id\n  \n  \u003cspan class=\"hljs-comment\"\u003e# Our function to be called by the Agent\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ewolfram_alpha_query\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, query: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e\u003c/span\u003e):\n          \u003cspan class=\"hljs-string\"\u003e\"\"\"\n          Make a query to wolfram alpha about a mathematical or scientific problem.\n  \n          Example inputs:\n              \"(7 * 12 ^ 10) / 321\"\n              \"How many calories are there in a pound of strawberries\"\n  \n          Args:\n              query (str): The query to be passed to wolfram alpha.\n  \n          \"\"\"\u003c/span\u003e\n          response = requests.get(QUERY_URL_TMPL.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(app_id=self.token, query=urllib.parse.quote_plus(query)))\n          \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response.text\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eThe above code is enough to define a LlamaIndex Tool that allows the Agent to query to Wolfram Alpha. No more incorrect guesses at math problems! We can initialize an instance of the Tool Spec like this:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"c47c\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e# Initialize an instance of the Tool\nwolfram_spec = WolframAlphaToolSpec(app_id=\"your-key\")\n# Convert the Tool Spec to a list of tools. In this case we just have one tool.\ntools = wolfram_spec.to_tool_list()\n# Convert the tool to an OpenAI function and inspect\nprint(tools[0].metadata.to_openai_function())\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eHere’s the cleaned up output of the print statement:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"5f4f\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e{\n  \u003cspan class=\"hljs-string\"\u003e'description'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'\n    Make a query to wolfram alpha about a mathematical or scientific problem.\n  \n          Example inputs:\n              \"(7 * 12 ^ 10) / 321\"\n              \"How many calories are there in a pound of strawberries\"\n  \n          Args:\n              query (str): The query to be passed to wolfram alpha.'\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'wolfram_alpha_query'\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e'parameters'\u003c/span\u003e: {\n    \u003cspan class=\"hljs-string\"\u003e'properties'\u003c/span\u003e: {\u003cspan class=\"hljs-string\"\u003e'query'\u003c/span\u003e: {\u003cspan class=\"hljs-string\"\u003e'title'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Query'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'type'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'string'\u003c/span\u003e}},\n    \u003cspan class=\"hljs-string\"\u003e'title'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'wolfram_alpha_query'\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e'type'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'object'\u003c/span\u003e\n  }\n}\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eWe can see that the \u003ca href=\"https://en.wikipedia.org/wiki/Docstring\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003edocstring\u003c/a\u003e describing how to use the Tool get passed to the Agent. Additionally, the parameters, type info and function name are passed along to give the Agent a strong idea on how it can use this function. All of this information is essentially acting as the prompt for how the agent understands the tool.\u003c/p\u003e\u003cp\u003eInheriting from the BaseToolSpec class means it’s very simple to write Tools for Agents to use. In fact, the above tool definition is only 9 lines of code, ignoring white space, imports and comments. We can easily get the function ready for Agents to use without any heavy boilerplate or modifications. Let’s look at loading the Tool into an OpenAI Agent:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"bbe7\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003eagent = OpenAIAgent.from_tools(tools, verbose=True)\nagent.chat(\u003cspan class=\"hljs-string\"\u003e'What is (7 * 12 ^ 10) / 321'\u003c/span\u003e)\n\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\" OUTPUT:\n=== Calling Function ===\nCalling function: wolfram_alpha_query with args: {\n  \"\u003c/span\u003equery\u003cspan class=\"hljs-string\"\u003e\": \"\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e * \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e ^ \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e) / \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\n}\nGot output: 30958682112\n========================\nResponse(response='The result of the expression (7 * 12 ^ 10) / 14 is 30,958,682,112.', source_nodes=[], metadata=None)\n\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eAnd we can test out passing this query to ChatGPT without the tools:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"46fd\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e\u0026amp;gt; \u003cspan class=\"hljs-string\"\u003e'What is (7 * 12 ^ 10) / 321'\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\nTo calculate the expression (7 * 12^10) / 14, you need to follow the order of operations, which is parentheses, exponents, multiplication, and division (from left to right).\n\nStep 1: Calculate the exponent 12^10.\n12^10 = 619,173,642,24.\n\nStep 2: Multiply 7 by the result from Step 1.\n7 * 619,173,642,24 = 4,333,215,496,68.\n\nStep 3: Divide the result from Step 2 by 14.\n4,333,215,496,68 / 14 = 309,515,392,62.\n\nTherefore, the result of the expression (7 * 12^10) / 14 is 309,515,392,62.\n\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eThis example should show how easily you can write new Tools for use with Agents. For the rest of the blog post I’ll be talking about tips and tricks I’ve found to write more functional and effective tools. Hopefully by the end of the blog post you are excited to write and contribute some Tools of your own!\u003c/p\u003e\u003ch1\u003eTechniques for building better tools\u003c/h1\u003e\u003cp\u003eBelow are a variety of tactics for writing more usable and functional tools to minimize friction when interfacing with the Agent. Not all of the tactics apply to every tool, but usually at least a few of the techniques below will prove valuable.\u003c/p\u003e\u003ch2\u003eWriting useful tool prompts\u003c/h2\u003e\u003cp\u003eHere’s an example of the function signature and docstring for a tool that an Agent can call to create a draft email.\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"bde1\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreate_draft\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n        \u003cspan class=\"hljs-variable language_\"\u003eself\u003c/span\u003e,\n        \u003cspan class=\"hljs-symbol\"\u003eto:\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eList\u003c/span\u003e[str],\n        \u003cspan class=\"hljs-symbol\"\u003esubject:\u003c/span\u003e str,\n        \u003cspan class=\"hljs-symbol\"\u003emessage:\u003c/span\u003e str\n    \u003c/span\u003e) -\u0026amp;gt; \u003cspan class=\"hljs-symbol\"\u003estr:\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"Create and insert a draft email.\n           Print the returned draft's message and id.\n           Returns: Draft object, including draft id and message meta data.\n\n        Args:\n            to (List[str]): The email addresses to send the message to, eg ['adam@example.com']\n            subject (str): The subject for the event\n            message (str): The message for the event\n        \"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eThis prompt takes advantage of a few different patterns to ensure that the agent can use the tool effectively:\u003c/p\u003e\u003cul\u003e\u003cli\u003eGive a concise description of the function and its purpose\u003c/li\u003e\u003cli\u003eInform the Agent on what data will be returned from this function\u003c/li\u003e\u003cli\u003eList the arguments that the function accepts, with descriptions and type information\u003c/li\u003e\u003cli\u003eGive example values for arguments with a specific format, eg adam@example.com\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eTool prompts should be concise as to not take up too much length in context, but also informative enough that the agent can use the tool without making mistakes.\u003c/p\u003e\u003ch2\u003eMaking tools tolerant of partial inputs\u003c/h2\u003e\u003cp\u003eOne way to help Agents make fewer mistakes is to write tools that are more \u003cem class=\"ra\"\u003etolerant\u003c/em\u003e of their inputs, for example by making inputs optional when the value can be inferred from somewhere else. Take the example of drafting an email, but this time let’s consider a tool that updates a draft email:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"77ab\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003edef \u003cspan class=\"hljs-title function_\"\u003eupdate_draft\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(\n        self,\n        draft_id: str,\n        to: Optional[List[str]] = None,\n        subject: Optional[str] = None,\n        message: Optional[str] = None,\n    )\u003c/span\u003e -\u0026amp;gt; str:\n        \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"Update a draft email.\n           Print the returned draft's message and id.\n           This function is required to be passed a draft_id that is obtained when creating messages\n           Returns: Draft object, including draft id and message meta data.\n\n        Args:\n            draft_id (str): the id of the draft to be updated\n            to (Optional[str]): The email addresses to send the message to\n            subject (Optional[str]): The subject for the event\n            message (Optional[str]): The message for the event\n        \"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eThe Gmail API \u003cstrong\u003erequires\u003c/strong\u003e all of the above values when updating a draft, however using just the \u003ccode class=\"cw rb rc rd qk b\"\u003edraft_id\u003c/code\u003e we can fetch the current content of the draft and use the existing values as defaults if the Agent did not provide the values when updating the draft:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"4342\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdate_draft\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e...\u003c/span\u003e):\n  ...\n  draft = self.get_draft(draft_id)\n  headers = draft[\u003cspan class=\"hljs-string\"\u003e'message'\u003c/span\u003e][\u003cspan class=\"hljs-string\"\u003e'payload'\u003c/span\u003e][\u003cspan class=\"hljs-string\"\u003e'headers'\u003c/span\u003e]\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e header \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e headers:\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e header[\u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e] == \u003cspan class=\"hljs-string\"\u003e'To'\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e to:\n          to = header[\u003cspan class=\"hljs-string\"\u003e'value'\u003c/span\u003e]\n      \u003cspan class=\"hljs-keyword\"\u003eelif\u003c/span\u003e header[\u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e] == \u003cspan class=\"hljs-string\"\u003e'Subject'\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e subject:\n          subject = header[\u003cspan class=\"hljs-string\"\u003e'value'\u003c/span\u003e]\n    \u003cspan class=\"hljs-keyword\"\u003eelif\u003c/span\u003e header[\u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e] == \u003cspan class=\"hljs-string\"\u003e'Message'\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e message:\n      message = header[\u003cspan class=\"hljs-string\"\u003e'values'\u003c/span\u003e]\n  ...\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eBy providing the above logic in the \u003ccode class=\"cw rb rc rd qk b\"\u003eupdate_draft\u003c/code\u003e function, the Agent can invoke \u003ccode class=\"cw rb rc rd qk b\"\u003eupdate_draft\u003c/code\u003e with only one of the fields (and the \u003ccode class=\"cw rb rc rd qk b\"\u003edraft_id\u003c/code\u003e), and we can update the draft as the user expects. This means that in more circumstances the Agent can complete the task successfully, instead of returning an error or needing to ask for more information.\u003c/p\u003e\u003ch2\u003eValidating input and Agent error handling\u003c/h2\u003e\u003cp\u003eDespite best efforts at prompting and tolerance, we can end up in circumstances where the Agent invokes a tool in a way that it can’t complete the task at hand. However, we can detect this and prompt the Agent to recover the error on its own.\u003c/p\u003e\u003cp\u003eFor example, in the \u003ccode class=\"cw rb rc rd qk b\"\u003eupdate_draft\u003c/code\u003e example above, what do we do if the agent calls the function without a \u003ccode class=\"cw rb rc rd qk b\"\u003edraft_id\u003c/code\u003e? We could simply pass along the null value and return an error from the Gmail API library, but we could also detect that a null \u003ccode class=\"cw rb rc rd qk b\"\u003edraft_id\u003c/code\u003e will invariably cause an error, and return a prompt for the agent instead:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"42b1\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdate_draft\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e...\u003c/span\u003e):\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e draft_id == \u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e:\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"You did not provide a draft id when calling this function. If you previously created or retrieved the draft, the id is available in context\"\u003c/span\u003e\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eNow, if the Agent invokes \u003ccode class=\"cw rb rc rd qk b\"\u003eupdate_draft\u003c/code\u003e without a \u003ccode class=\"cw rb rc rd qk b\"\u003edraft_id\u003c/code\u003e , it is made aware of the exact mistake it made and given instructions on how it can correct the issue.\u003c/p\u003e\u003cp\u003eIn my experience working with this tool, the Agent will often immediately call the \u003ccode class=\"cw rb rc rd qk b\"\u003eupdate_draft\u003c/code\u003e function in the correct way when receiving this prompt, or if there is no \u003ccode class=\"cw rb rc rd qk b\"\u003edraft_id\u003c/code\u003e available, it will inform the user of the issue and ask the user for a \u003ccode class=\"cw rb rc rd qk b\"\u003edraft_id\u003c/code\u003e. Either scenario is much better than crashing or returning an opaque error from a library to the user.\u003c/p\u003e\u003ch2\u003eProviding simple functions related to the tool\u003c/h2\u003e\u003cp\u003eAgents can struggle at what would otherwise be simple functions for a computer to calculate. For example, when building a tool for creating events in Google Calendar, a user may prompt the Agent with something like this:\u003c/p\u003e\u003cblockquote\u003e\u003cp id=\"fca1\" class=\"nn no ra np b nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok gm bj\"\u003e\u003cem class=\"gt\"\u003eCreate an event on my Calendar to discuss the Tools PR with \u003c/em\u003e\u003ca href=\"mailto:adam@example.com\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003e\u003cem class=\"gt\"\u003eadam@example.com\u003c/em\u003e\u003c/a\u003e\u003cem class=\"gt\"\u003e tomorrow at 4pm\u003c/em\u003e\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003eCan you see the problem? If we try asking ChatGPT what day it is:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"b470\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003eagent.chat('what day is it?')\n# \u0026gt; I apologize for the confusion. As an AI language model, I don't have real-time data or access to the current date. My responses are based on the information I was last trained on, which is up until September 2021. To find out the current day, I recommend checking your device's clock, referring to a calendar, or checking an online source for the current date.\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eAgents won’t know what the current date is, and so the Agent would either call the function incorrectly, providing a string like \u003ccode class=\"cw rb rc rd qk b\"\u003etomorrow\u003c/code\u003e for the date, hallucinate a date sometime in the past based on when it was trained, or put the burden on the user to tell it the date. All of the above actions cause friction and frustration for the user.\u003c/p\u003e\u003cp\u003eInstead, in the Google Calendar Tool Spec we provide a simple deterministic function for the agent to call if it needs to fetch the date:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"3a97\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eget_date\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself\u003c/span\u003e):\n        \u003cspan class=\"hljs-string\"\u003e\"\"\"\n        A function to return todays date.\n        Call this before any other functions if you are unaware of the current date\n        \"\"\"\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e datetime.date.today()\u003c/span\u003e\u003c/pre\u003e\u003cp\u003eNow, when the Agent tries to handle the prompt above, it can first call the function to get the date and then create the event as the user requested, inferring the date for “tomorrow” or “a week from now”. No errors, no guesses and no need for further user interaction!\u003c/p\u003e\u003ch2\u003eReturning prompts from functions that perform mutations\u003c/h2\u003e\u003cp\u003eSome functions perform mutations to data in a way that it isn’t clear what useful data can be returned from the function, back to the agent. For example, in the Google Calendar tool if an event is successfully created it doesn’t make sense to return the content of the event back to the Agent, as the agent just passed in all of the information and thus has it in context.\u003c/p\u003e\u003cp\u003eGenerally with functions that are focused on mutations (create, update, delete) we can help the Agent understand its actions better by using the return value of these functions to further prompt the agent. For example, from the Google Calendar \u003ccode class=\"cw rb rc rd qk b\"\u003ecreate_event\u003c/code\u003e tool we could do the following:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"ae80\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreate_event\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e...\u003c/span\u003e):\n  ...\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'Event created succesfully! You can move onto the next step.'\u003c/span\u003e  \u003c/span\u003e\u003c/pre\u003e\u003cp\u003eThis helps the agent register that the action succeeded and encourages it to complete the action it was prompted for, especially if creating the google calendar event is only a single step in a multiple step instruction. We can still return ids as part of these prompts as well:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"5af9\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreate_event\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e...\u003c/span\u003e):\n  ...\n  event = service.events().insert(...).execute()\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'Event created with id {event.id}! You can move onto the next step.'\u003c/span\u003e\u003c/span\u003e\u003c/pre\u003e\u003ch2\u003eStoring large responses in indices for the Agent to read\u003c/h2\u003e\u003cp\u003eOne consideration when building tools that has been mentioned already is the size of the context window the Agent has. Currently, LLMs tend to have context windows from 4k-16k tokens, however it can certainly be larger or smaller. If the size of the data that a tool would return is larger than the context window, the Agent will be unable to process the data and error out.\u003c/p\u003e\u003cp\u003eOne consideration when building tools that has been mentioned already is the size of the context window the Agent has. Currently, LLMs tend to have context windows from 4k-16k tokens, however it can certainly be larger or smaller. If the size of the data that a tool would return is larger than the context window, the Agent will be unable to process the data and error out.\u003c/p\u003e\u003cp\u003eThe only consideration that needs to be made when creating tools that might need to be wrapped by the LoadAndSearchTool, is they need to return a list of LlamaIndex documents. For a tool that returns a string, the only modification you need to make to have it be compatible with the LoadAndSearchTool is wrapping it in a document and an array:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"b54f\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e llama_index.readers.schema.base \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Document\n\n\u003cspan class=\"hljs-comment\"\u003e# Not compatible\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elarge_text_response_function\u003c/span\u003e():\n  ...\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n\n\u003cspan class=\"hljs-comment\"\u003e# LoadAndSearch compatible\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elarge_text_response_function\u003c/span\u003e():\n  ...\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [Document(text=result)]\u003c/span\u003e\u003c/pre\u003e\u003ch2\u003eVerify how the Agent understands the tool\u003c/h2\u003e\u003cp\u003eA useful technique for debugging tools in development is to \u003cstrong\u003eask the Agent about its own tools\u003c/strong\u003e: the tools it has available, what arguments the tools accept, what those arguments represent, and what the tool is used for. The responses of the Agent are useful in determining where your prompts might be lacking or helping pinpoint why an Agent is failing to successfully use a tool that you are developing.\u003c/p\u003e\u003cp\u003eAn example conversation debugging the Google Calendar Tool Spec, assuming you have setup an Agent similar to the example notebook:\u003c/p\u003e\u003cpre\u003e\u003cspan id=\"fad1\" class=\"qn on gt qk b bf qo qp l qq qr\"\u003eagent.\u003cspan class=\"hljs-title function_\"\u003echat\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'what tools do you have available'\u003c/span\u003e)\n# I have the following tools available\n#   \u003cspan class=\"hljs-number\"\u003e1.\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`load_data`\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eThis\u003c/span\u003e tool allows me to load data \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e your calendar. \u003cspan class=\"hljs-title class_\"\u003eIt\u003c/span\u003e can retrieve a specified number \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e events starting \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e a given date.\n#   \u003cspan class=\"hljs-number\"\u003e2.\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`create_event`\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eThis\u003c/span\u003e tool allows me to create an event on your calendar. \u003cspan class=\"hljs-title class_\"\u003eYou\u003c/span\u003e can provide details such \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e the title, description, location, start datetime, end datetime, and attendees.\n#   \u003cspan class=\"hljs-number\"\u003e3.\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`get_date`\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eThis\u003c/span\u003e tool returns today\u003cspan class=\"hljs-string\"\u003e's date. It can be used to ensure that the correct date is used when working with other tools.\n# Please let me know if you would like more information about any of these tools or if you have any specific requests.\nagent.chat('\u003c/span\u003ewhat \u003cspan class=\"hljs-variable language_\"\u003earguments\u003c/span\u003e does the load_data tool take\u003cspan class=\"hljs-string\"\u003e')\n# '\u003c/span\u003e\u003cspan class=\"hljs-title class_\"\u003eThe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`load_data`\u003c/span\u003e tool takes the following \u003cspan class=\"hljs-attr\"\u003earguments\u003c/span\u003e:\n#   \u003cspan class=\"hljs-number\"\u003e1.\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`number_of_results`\u003c/span\u003e (optional, \u003cspan class=\"hljs-attr\"\u003edefault\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eSpecifies\u003c/span\u003e the number \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e events to \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e your calendar.\n#   \u003cspan class=\"hljs-number\"\u003e2.\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`start_date`\u003c/span\u003e (optional): \u003cspan class=\"hljs-title class_\"\u003eSpecifies\u003c/span\u003e the start date \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e which to retrieve events. \u003cspan class=\"hljs-title class_\"\u003eIt\u003c/span\u003e can be provided \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e a string \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eISO\u003c/span\u003e format (e.\u003cspan class=\"hljs-property\"\u003eg\u003c/span\u003e., \u003cspan class=\"hljs-string\"\u003e\"2023-07-05\"\u003c/span\u003e) or \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e a \u003cspan class=\"hljs-string\"\u003e`datetime.date`\u003c/span\u003e object.\n# \u003cspan class=\"hljs-title class_\"\u003eYou\u003c/span\u003e can use these \u003cspan class=\"hljs-variable language_\"\u003earguments\u003c/span\u003e to customize the number \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e events and the start date \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e retrieving data \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e your calendar.\u003c/span\u003e\u003c/pre\u003e\u003ch1\u003eConcluding thoughts\u003c/h1\u003e\u003cp\u003eBuilding tools for Agents requires you to think critically about how users will interact with the Agent, and to try and anticipate any possible usage patterns. Building well thought out tools that can be resilient to errors and issues requires careful consideration and testing of possible use cases. I hope that these reflections and techniques assist you in creating new tools for Agents, and don’t forget to share your tools on \u003ca href=\"https://llama-hub-ui.vercel.app/\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003eLlamaHub\u003c/a\u003e.\u003c/p\u003e","image":{"_type":"image","asset":{"_ref":"image-d69d0025829fae4ad65ae7a80c08d5f73206e47f-2996x1412-png","_type":"reference"}},"mainImage":"https://cdn.sanity.io/images/7m9jw85w/production/d69d0025829fae4ad65ae7a80c08d5f73206e47f-2996x1412.png","publishedDate":"2023-07-17","relatedPosts":[{"featured":false,"image":{"_type":"image","asset":{"_ref":"image-89380b5946452462d6c4a91f8109f705dc044c82-1080x1080-png","_type":"reference"}},"publishedDate":"2025-06-05","slug":"introducing-the-spreadsheet-agent-in-private-preview","title":"Introducing the Spreadsheet Agent, in private preview"},{"featured":false,"image":{"_type":"image","asset":{"_ref":"image-9fdb15bafdf8c0921f36c6cd8cdac43c8ca87e27-2232x1562-png","_type":"reference"}},"publishedDate":"2025-05-29","slug":"rag-is-dead-long-live-agentic-retrieval","title":"RAG is dead, long live agentic retrieval"},{"featured":false,"image":{"_type":"image","asset":{"_ref":"image-add5d90d8aa67ca128a834e2b8fcbb7746c585cd-734x379-png","_type":"reference"}},"publishedDate":"2025-05-13","slug":"improved-long-and-short-term-memory-for-llamaindex-agents","title":"Improved Long \u0026 Short-Term Memory for LlamaIndex Agents"},{"featured":false,"image":{"_type":"image","asset":{"_ref":"image-dde8a9c277605647a344c6f4cd83d1ad192e1a09-1024x1536-png","_type":"reference"}},"publishedDate":"2025-04-25","slug":"bending-without-breaking-optimal-design-patterns-for-effective-agents","title":"Bending without breaking: optimal design patterns for effective agents"}],"slug":{"_type":"slug","current":"building-better-tools-for-llm-agents-f8c5a6714f11"},"tags":[{"_createdAt":"2024-02-22T20:19:11Z","_id":"d0a79109-34ab-41fa-a8f4-0b3522970c7d","_rev":"9mLWnJtMvL1OgKPLcXbz07","_type":"blogTag","_updatedAt":"2024-02-22T20:19:11Z","slug":{"_type":"slug","current":"ai"},"title":"AI"},{"_createdAt":"2024-02-22T20:19:11Z","_id":"17d4fc95-517c-4f4a-95ce-bf753e802ac4","_rev":"9mLWnJtMvL1OgKPLcXbz07","_type":"blogTag","_updatedAt":"2024-02-22T20:19:11Z","slug":{"_type":"slug","current":"llamaindex"},"title":"Llamaindex"},{"_createdAt":"2024-02-22T20:19:11Z","_id":"aa7d304e-787e-4a6c-80cb-8911afd4c788","_rev":"jbUo4a8sS9GhVRG46mMVHT","_type":"blogTag","_updatedAt":"2024-03-13T16:00:26Z","slug":{"_type":"slug","current":"llm"},"title":"LLM"},{"_createdAt":"2024-02-22T20:19:11Z","_id":"248fed26-a405-4fa0-ba99-8f1af0df185c","_rev":"9mLWnJtMvL1OgKPLcXbz07","_type":"blogTag","_updatedAt":"2024-02-22T20:19:11Z","slug":{"_type":"slug","current":"agents"},"title":"Agents"},{"_createdAt":"2024-02-22T20:19:13Z","_id":"78713226-8bff-400f-bbfe-fd8a3d90be1d","_rev":"9mLWnJtMvL1OgKPLcXbz07","_type":"blogTag","_updatedAt":"2024-02-22T20:19:13Z","slug":{"_type":"slug","current":"nlp"},"title":"NLP"}],"title":"Building Better Tools for LLM Agents"},"publishedDate":"Invalid Date"},"params":{"slug":"building-better-tools-for-llm-agents-f8c5a6714f11"},"draftMode":false,"token":""},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"building-better-tools-for-llm-agents-f8c5a6714f11"},"buildId":"C8J-EMc_4OCN1ch65l4fl","isFallback":false,"isExperimentalCompile":false,"gsp":true,"scriptLoader":[]}</script></body></html>