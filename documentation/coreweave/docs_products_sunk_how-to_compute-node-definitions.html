<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-products/sunk/how-to/compute-node-definitions" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>Define Compute Nodes | CoreWeave</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://docs.coreweave.com/img/coreweave-social-card_1200x675.jpg><meta data-rh=true name=twitter:image content=https://docs.coreweave.com/img/coreweave-social-card_1200x675.jpg><meta data-rh=true property=og:url content=https://docs.coreweave.com/docs/products/sunk/how-to/compute-node-definitions><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Define Compute Nodes | CoreWeave"><meta data-rh=true name=description content="Define the resources used to run Slurm jobs"><meta data-rh=true property=og:description content="Define the resources used to run Slurm jobs"><link data-rh=true rel=icon href=/img/favicon-32x32.png><link data-rh=true rel=canonical href=https://docs.coreweave.com/docs/products/sunk/how-to/compute-node-definitions><link data-rh=true rel=alternate href=https://docs.coreweave.com/docs/products/sunk/how-to/compute-node-definitions hreflang=en><link data-rh=true rel=alternate href=https://docs.coreweave.com/docs/products/sunk/how-to/compute-node-definitions hreflang=x-default><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZYD2ZZ1PN"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XZYD2ZZ1PN",{})</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin=true><link rel=stylesheet href='https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap"'><link rel=stylesheet href=/assets/css/styles.1f790161.css><script src=/assets/js/runtime~main.1d571fa8.js defer></script><script src=/assets/js/main.734a8888.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":(window.matchMedia("(prefers-color-scheme: light)").matches,"light"),document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class=announcementBar_s0pr style=background-color:#2741e7;color:#fff role=banner><div class="content_zf74 announcementBarContent_dpRF"><strong>Notice:</strong> CoreWeave Classic documentation has moved to <a href=https://v1.docs.coreweave.com>v1.docs.coreweave.com</a>.</div></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/Logos-08.svg alt=CoreWeave class="themedComponent_mlkZ themedComponent--light_NVdE" height=32 width=137><img src=/img/Logos-09.svg alt=CoreWeave class="themedComponent_mlkZ themedComponent--dark_xIcU" height=32 width=137></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Products</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs/products/cks>CoreWeave Kubernetes Service</a><li><a class=dropdown__link href=/docs/products/networking>Networking</a><li><a class=dropdown__link href=/docs/products/storage>Storage</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/products/sunk>SUNK</a></ul></div><a class="navbar__item navbar__link" href=/docs/platform>Platform</a><a class="navbar__item navbar__link" href=/docs/observability>Observability</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Resources</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs/policies/terms-of-service>Policies</a><li><a class=dropdown__link href=/docs/release-notes>Release Notes</a><li><a class=dropdown__link href=/docs/support>Support</a><li><a class=dropdown__link href=/docs/glossary>Glossary</a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class=navbar__search><span aria-label="expand searchbar" role=button class=search-icon tabindex=0></span><input id=search_input_react type=search placeholder=Loading... aria-label=Search class="navbar__search-input search-bar" disabled></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--active" href=/docs/products/sunk>SUNK</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/products/sunk/concepts/overview>Concepts</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/docs/products/sunk/how-to/compute-node-definitions>How-To Guides</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/products/sunk/how-to/compute-node-definitions>Define Compute Nodes</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/products/sunk/how-to/configure-slurm-individual-login>Configure Slurm Individual Login Nodes</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/products/sunk/how-to/connect-to-slurm-login-node>Connect to the Slurm Login Node</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/products/sunk/how-to/interact-with-sunk-from-kubernetes>Interact with Kubernetes</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/products/sunk/how-to/prolog-epilog-scripts>Use Prolog and Epilog Scripts</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/products/sunk/how-to/scheduling-via-slurm>Schedule Kubernetes Pods via Slurm</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/products/sunk/how-to/vs-code-with-slurm>Use Visual Studio Code Tunnels for Development on Slurm</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/docs/products/sunk/reference/slurm-images>Reference</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/products/sunk/reference/slurm-images>Slurm images</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/products/sunk/reference/sunk-parameters>SUNK Parameter Reference</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/products/sunk/reference/slurm-parameters>Slurm Parameter Reference</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/products/sunk/reference/slurm-login-parameters>Slurm Login Parameter Reference</a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item hidden"><a class=menu__link tabindex=0 href=/docs/products/sunk>SUNK (Slurm on Kubernetes)</a></ul></ul></nav><button type=button title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/products/sunk><span itemprop=name>SUNK</span></a><meta itemprop=position content=1><li class=breadcrumbs__item><span class=breadcrumbs__link>How-To Guides</span><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Define Compute Nodes</span><meta itemprop=position content=3></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Define Compute Nodes</h1></header><p class="italic font-bold text-[var(--ifm-color-gray-dark)]">Define the resources used to run Slurm jobs</p>
<p>Slurm Compute nodes are the workhorses of the cluster, defining and managing the specific hardware used to run Slurm jobs. Compute nodes handle the resources used to run jobs submitted to Slurm.</p>
<p><a href=/docs/products/sunk/how-to/configure-slurm-individual-login>Slurm Login nodes</a> allow you to access your Slurm cluster, while Slurm Compute nodes perform the actual work of running a Slurm job.</p>
<p>With SUNK, you can create flexible Compute node definitions to meet the specific resource requirements of the workloads. This guide will walk you through the various methods of defining Compute nodes that are optimized for performance and efficiency of the desired jobs.</p>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed><span class=admonitionIcon_kpSf><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>Note</div><div class=admonitionContent_UjKb><p>In SUNK, Slurm <strong>nodes</strong> run in Kubernetes Pods. These are not the same as Kubernetes <strong>Nodes</strong>, which are the worker machines that run the Pods. To distinguish between the two, Kubernetes Nodes are capitalized in this documentation, while Slurm nodes are not.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=access-slurm-compute-nodes>Access Slurm Compute nodes<a href=#access-slurm-compute-nodes class=hash-link aria-label="Direct link to Access Slurm Compute nodes" title="Direct link to Access Slurm Compute nodes">​</a></h2>
<p>After accessing your Slurm cluster through the <a href=/docs/products/sunk/how-to/connect-to-slurm-login-node>Slurm Login node</a>, you can interact with the Slurm Compute nodes using standard Slurm commands. It is not necessary to directly access a Slurm Compute node.</p>
<p>Use <a href=https://slurm.schedmd.com/man_index.html target=_blank rel="noopener noreferrer">Slurm commands</a>, such as <code>srun</code>, <code>sbatch</code>, or <code>salloc</code>, to run and manage jobs on Slurm Compute nodes.</p>
<div class="theme-admonition theme-admonition-warning admonition_Gfwi alert alert--warning"><div class=admonitionHeading_f1Ed><span class=admonitionIcon_kpSf><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>Warning</div><div class=admonitionContent_UjKb><p>We do not recommend directly accessing Slurm Compute nodes through SSH to run tasks. Bypassing Slurm can interfere with currently running jobs and may cause nodes to drain unintentionally, leading to temporary loss of resources. SSH to Slurm Compute nodes should only be used for debugging existing jobs on the nodes.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=the-manifest>The manifest<a href=#the-manifest class=hash-link aria-label="Direct link to The manifest" title="Direct link to The manifest">​</a></h2>
<p>The foundation for defining Compute nodes is a YAML manifest, which outlines the resources and configurations for each node type. An example of the <code>compute:</code> section might look like this:</p>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=yaml class=code_box_babA data-ch=true><div style=min-width:fit-content><div><span style=color:#569CD6>compute</span><span style=color:#E6E6E6>:</span>
</div><div>  <span style=color:#6A9955># See "Global Compute node options" below to learn more.</span>
</div><div>  <span style=color:#569CD6>volumeMounts</span><span style=color:#E6E6E6>: []</span>
</div><div>  <span style=color:#569CD6>volumes</span><span style=color:#E6E6E6>: []</span>
</div><div>  <span style=color:#569CD6>s6</span><span style=color:#E6E6E6>: {}</span>
</div><div>  <span style=color:#569CD6>pyxis</span><span style=color:#E6E6E6>:</span>
</div><div>  <span style=color:#569CD6>partitions</span><span style=color:#E6E6E6>:</span>
</div><div>
</div><div>  <span style=color:#6A9955># Node definitions. Multiple node definitions are allowed, but</span>
</div><div>  <span style=color:#6A9955># only those `enabled: true` will be deployed.</span>
</div><div>  <span style=color:#569CD6>nodes</span><span style=color:#E6E6E6>:</span>
</div><div>    <span style=color:#6A9955># Another node definition.</span>
</div><div>    <span style=color:#569CD6>my-node-def</span><span style=color:#E6E6E6>:</span>
</div><div>      <span style=color:#569CD6>enabled</span><span style=color:#E6E6E6>:</span> <span style=color:#569CD6>true</span>
</div><div>      <span style=color:#569CD6>replicas</span><span style=color:#E6E6E6>:</span> <span style=color:#B5CEA8>1</span>
</div><div>      <span style=color:#569CD6>staticFeatures</span><span style=color:#E6E6E6>:</span>
</div><div>        <span style=color:#E6E6E6>-</span> <span style=color:#CE9178>foo</span>
</div><div>        <span style=color:#E6E6E6>-</span> <span style=color:#CE9178>bar</span>
</div><div>      <span style=color:#569CD6>dynamicFeatures</span><span style=color:#E6E6E6>:</span>
</div><div>        <span style=color:#569CD6>node.coreweave.cloud/class</span><span style=color:#E6E6E6>: {}</span>
</div><div>        <span style=color:#569CD6>gpu.nvidia.com/class</span><span style=color:#E6E6E6>: {}</span>
</div><div>      <span style=color:#569CD6>image</span><span style=color:#E6E6E6>:</span>
</div><div>        <span style=color:#569CD6>repository</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>registry.gitlab.com/example</span>
</div><div>
</div><div>      <span style=color:#569CD6>env</span><span style=color:#E6E6E6>:</span>
</div><div>        <span style=color:#E6E6E6>-</span> <span style=color:#569CD6>name</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>example</span>
</div><div>          <span style=color:#569CD6>value</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>"1"</span>
</div><div>
</div><div>      <span style=color:#569CD6>gresGpu</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>h100:8</span>
</div><div>      <span style=color:#569CD6>config</span><span style=color:#E6E6E6>:</span>
</div><div>        <span style=color:#569CD6>weight</span><span style=color:#E6E6E6>:</span> <span style=color:#B5CEA8>1</span>
</div><div>      <span style=color:#569CD6>resources</span><span style=color:#E6E6E6>:</span>
</div><div>        <span style=color:#569CD6>limits</span><span style=color:#E6E6E6>:</span>
</div><div>          <span style=color:#569CD6>memory</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>960Gi</span>
</div><div>          <span style=color:#569CD6>sunk.coreweave.com/accelerator</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>"8"</span>
</div><div>          <span style=color:#569CD6>rdma/ib</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>"1"</span>
</div><div>        <span style=color:#569CD6>requests</span><span style=color:#E6E6E6>:</span>
</div><div>          <span style=color:#569CD6>cpu</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>"110"</span>
</div><div>          <span style=color:#569CD6>memory</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>960Gi</span>
</div><div>          <span style=color:#569CD6>sunk.coreweave.com/accelerator</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>"8"</span></div></div></pre>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=global-options>Global options<a href=#global-options class=hash-link aria-label="Direct link to Global options" title="Direct link to Global options">​</a></h2>
<p>These are the global options shown in the YAML example above.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=computevolumemounts><a href=/docs/products/sunk/reference/slurm-parameters><strong><code>compute.volumeMounts</code></strong></a><a href=#computevolumemounts class=hash-link aria-label="Direct link to computevolumemounts" title="Direct link to computevolumemounts">​</a></h3>
<p>Declares a list of additional volumes to mount within the primary container of the node in addition to the chart <code>global.volumeMounts</code>.</p>
<p>For example:</p>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=yaml class=code_box_babA data-ch=true><div style=min-width:fit-content><div><span style=color:#569CD6>compute</span><span style=color:#E6E6E6>:</span>
</div><div>  <span style=color:#569CD6>volumeMounts</span><span style=color:#E6E6E6>:</span>
</div><div>    <span style=color:#E6E6E6>-</span> <span style=color:#569CD6>name</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>my-pvc</span>
</div><div>      <span style=color:#569CD6>path</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>/mnt/my-pvc</span></div></div></pre>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed><span class=admonitionIcon_kpSf><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>Note</div><div class=admonitionContent_UjKb><ul>
<li>Entries which share the same <code>path</code> as a globally defined mount will override the mount.</li>
<li>These volumeMounts are also added to the login node primary container.</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=computevolumes><a href=/docs/products/sunk/reference/slurm-parameters><strong><code>compute.volumes</code></strong></a><a href=#computevolumes class=hash-link aria-label="Direct link to computevolumes" title="Direct link to computevolumes">​</a></h3>
<p>Declares a list of additional volumes to attach to the Pod for the compute node. If using persistent volumes claims, <a href=https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes target=_blank rel="noopener noreferrer">ReadWriteMany</a> access mode should be used in most cases.</p>
<!-- -->
<p>For example:</p>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=yaml class=code_box_babA data-ch=true><div style=min-width:fit-content><div><span style=color:#569CD6>compute</span><span style=color:#E6E6E6>:</span>
</div><div>  <span style=color:#569CD6>volumes</span><span style=color:#E6E6E6>:</span>
</div><div>    <span style=color:#E6E6E6>-</span> <span style=color:#569CD6>name</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>my-pvc</span>
</div><div>      <span style=color:#569CD6>persistentVolumeClaim</span><span style=color:#E6E6E6>:</span>
</div><div>        <span style=color:#569CD6>claimName</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>my-pvc</span></div></div></pre>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed><span class=admonitionIcon_kpSf><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>Note</div><div class=admonitionContent_UjKb><ul>
<li>Entries which share the same <code>name</code> as a globally defined mount will override the volume.</li>
<li>These volumes are also added to the login node Pods.</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=computes6><a href=/docs/products/sunk/reference/slurm-parameters><strong><code>compute.s6</code></strong></a><a href=#computes6 class=hash-link aria-label="Direct link to computes6" title="Direct link to computes6">​</a></h3>
<p>SUNK can run custom <a href=https://skarnet.org/software/s6/ target=_blank rel="noopener noreferrer">s6</a> scripts on Compute nodes, either as <code>oneshot</code> or <code>longrun</code> jobs.</p>
<p>For example:</p>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=yaml class=code_box_babA data-ch=true><div style=min-width:fit-content><div><span style=color:#569CD6>compute</span><span style=color:#E6E6E6>:</span>
</div><div>  <span style=color:#569CD6>s6</span><span style=color:#E6E6E6>:</span>
</div><div>    <span style=color:#569CD6>packages</span><span style=color:#E6E6E6>:</span>
</div><div>      <span style=color:#569CD6>type</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>oneshot</span>
</div><div>      <span style=color:#569CD6>timeoutUp</span><span style=color:#E6E6E6>:</span> <span style=color:#B5CEA8>0</span>
</div><div>      <span style=color:#569CD6>timeoutDown</span><span style=color:#E6E6E6>:</span> <span style=color:#B5CEA8>0</span>
</div><div>      <span style=color:#569CD6>script</span><span style=color:#E6E6E6>:</span> <span style=color:#C586C0>|</span>
</div><div>        <span style=color:#CE9178>#!/usr/bin/env bash</span>
</div><div>        <span style=color:#CE9178>apt -y install nginx</span>
</div><div>    <span style=color:#569CD6>nginx</span><span style=color:#E6E6E6>:</span>
</div><div>      <span style=color:#569CD6>type</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>longrun</span>
</div><div>      <span style=color:#569CD6>timeoutUp</span><span style=color:#E6E6E6>:</span> <span style=color:#B5CEA8>0</span>
</div><div>      <span style=color:#569CD6>timeoutDown</span><span style=color:#E6E6E6>:</span> <span style=color:#B5CEA8>0</span>
</div><div>      <span style=color:#569CD6>script</span><span style=color:#E6E6E6>:</span> <span style=color:#C586C0>|</span>
</div><div>        <span style=color:#CE9178>#!/usr/bin/env bash</span>
</div><div>        <span style=color:#CE9178>nginx -g "daemon off;"</span></div></div></pre>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=computepyxis><a href=/docs/products/sunk/reference/slurm-parameters><strong><code>compute.pyxis</code></strong></a><a href=#computepyxis class=hash-link aria-label="Direct link to computepyxis" title="Direct link to computepyxis">​</a></h3>
<p>This section has multiple options:</p>
<table><thead><tr><th>Parameter<th>Purpose<tbody><tr><td><code>compute.pyxis.enabled</code><td>Enables the pyxis container.<tr><td><code>compute.pyxis.mountHome</code><td>Enables <code>ENROOT-MOUNT_HOME</code> for the pyxis container to mount the home directory.<tr><td><code>compute.pyxis.remapRoot</code><td>Enables <code>ENROOT_REMAP_ROOT</code> for the pyxis container to remap the root user.<tr><td><code>compute.pyxis.securityContext.capabilities.add</code><td>Adds capabilities to the pyxis container. <code>"SYS_ADMIN"</code> is required if using Pyxis.</table>
<p>For example:</p>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=yaml class=code_box_babA data-ch=true><div style=min-width:fit-content><div><span style=color:#569CD6>compute</span><span style=color:#E6E6E6>:</span>
</div><div>  <span style=color:#569CD6>pyxis</span><span style=color:#E6E6E6>:</span>
</div><div>    <span style=color:#569CD6>enabled</span><span style=color:#E6E6E6>:</span> <span style=color:#569CD6>true</span>
</div><div>    <span style=color:#569CD6>mountHome</span><span style=color:#E6E6E6>:</span> <span style=color:#569CD6>true</span>
</div><div>    <span style=color:#569CD6>remapRoot</span><span style=color:#E6E6E6>:</span> <span style=color:#569CD6>true</span>
</div><div>    <span style=color:#569CD6>securityContext</span><span style=color:#E6E6E6>:</span>
</div><div>      <span style=color:#569CD6>capabilities</span><span style=color:#E6E6E6>:</span>
</div><div>        <span style=color:#569CD6>add</span><span style=color:#E6E6E6>: [</span><span style=color:#CE9178>"SYS_ADMIN"</span><span style=color:#E6E6E6>]</span></div></div></pre>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=computepartitions><a href=/docs/products/sunk/reference/slurm-parameters><strong><code>compute.partitions</code></strong></a><a href=#computepartitions class=hash-link aria-label="Direct link to computepartitions" title="Direct link to computepartitions">​</a></h3>
<p>A Slurm partition is a logical grouping of Compute nodes (servers) within the Slurm cluster. It's a way to organize nodes based on their characteristics, such as memory size, CPU type, or GPU availability.</p>
<p>When a user submits a job to a Slurm-managed HPC cluster, they specify the partition where the job should run. The Slurm scheduler then assigns the job to an available node within that partition. Partitions can have different configurations and policies, such as time limits for jobs, user access restrictions, or priority levels.</p>
<p>A related option is <a href=/docs/products/sunk/reference/slurm-parameters><code>compute.autoPartition.enabled</code></a>, which, if <code>true</code> (the default), creates a partition within Slurm for each NodeSet defined in <code>compute.nodes</code>. The partition name will match the name of the <code>nodes</code> section.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=other-global-options>Other global options<a href=#other-global-options class=hash-link aria-label="Direct link to Other global options" title="Direct link to Other global options">​</a></h2>
<p>In addition to the options shown in the <code>compute</code> example above, several others apply globally to all Compute nodes.</p>
<table><thead><tr><th>Parameter<th>Purpose<tbody><tr><td><code>compute.generateTopology</code><td>If <code>true</code>, generate the network topology.<tr><td><code>compute.initialState</code> and <code>compute.initialStateReason</code><td>The initial State for the nodes when they join the Slurm cluster, generally <code>drain</code> or <code>idle</code>, and the reason for setting that state. These can also be applied as node-specific options.<tr><td><code>compute.maxUnavailable</code><td>Sets the maximum unavailability of the Compute nodes during a rolling update. Can be a percentage or a number.<tr><td><code>compute.ssh.enabled</code><td>When enabled, the Slurm Compute nodes will have SSH available.</table>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=node-specific-options>Node-specific options<a href=#node-specific-options class=hash-link aria-label="Direct link to Node-specific options" title="Direct link to Node-specific options">​</a></h2>
<p>Many options are available for each named <code>node</code> definition. For reference, see <code>my-node-def</code> in the YAML above which shows many of the available options.</p>
<ul>
<li><strong><code>node.enabled</code></strong>: If <code>true</code>, then Compute nodes should be deployed with this definition. Multiple definitions can be declared, but those only <code>enabled: true</code> will be deployed.</li>
<li><strong><code>node.replicas</code></strong>: Specifies the <strong>desired</strong> number of Slurm nodes (Kubernetes Pods) of this type that the NodeSet will attempt to create. This is a maximum value, because the number of desired Pods can be greater than the number of available Pods. To change the number of replicas for a running Slurm cluster, use:</li>
</ul>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=shellscript class=code_box_babA data-ch=true><div style=min-width:fit-content><div class=flex><div class="select-none true" style="color:rgb(170, 170, 255);font-weight:bold;padding-right:0.5rem">$</div><div data-mark=true><span style=color:#DCDCAA>kubectl</span> <span style=color:#CE9178>scale nodeset</span> <span style=color:#D4D4D4>&lt;</span><span style=color:#CE9178>nodeset-nam</span><span style=color:#E6E6E6>e</span><span style=color:#D4D4D4>></span> <span style=color:#CE9178>--replicas=N</span></div></div></div></pre>
<ul>
<li><strong><code>node.definitions</code></strong>: A list of other node definitions to include in this definition. See <a href=#custom-node-definitions>Custom Node Definitions</a> below to learn how to create custom definitions.</li>
<li><strong><code>node.staticFeatures</code></strong>: Static Slurm node feature flags. Feature flags are strings that Slurm will add to the Slurm nodes, where they are available for use when scheduling Slurm jobs. For example, to schedule a job only on nodes with the feature <code>really-fast</code>:</li>
</ul>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=shellscript class=code_box_babA data-ch=true><div style=min-width:fit-content><div class=flex><div class="select-none true" style="color:rgb(170, 170, 255);font-weight:bold;padding-right:0.5rem">$</div><div data-mark=true><span style=color:#DCDCAA>srun</span> <span style=color:#CE9178>-C really-fast hostname</span></div></div></div></pre>
<p>Here's an example of how it looks within Slurm.</p>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=txt class=code_box_babA data-ch=true><div style=min-width:fit-content><div><span style=color:#E6E6E6>NodeName=h100-092-02 Arch=x86_64 CoresPerSocket=32</span>
</div><div>           <span style=color:#E6E6E6>CPUAlloc=110 CPUEfctv=128 CPUTot=128 CPULoad=0.56</span>
</div><div>           <span style=color:#E6E6E6>AvailableFeatures=h100-pci4,pci-4,cu120,gpu,infiniband,sharp</span>
</div><div>           <span style=color:#E6E6E6>ActiveFeatures=h100-pci4,pci-4,cu120,gpu,infiniband,sharp</span></div></div></pre>
<ul>
<li><strong><code>node.dynamicFeatures</code></strong>: Dynamic Slurm node features from Kubernetes' Node labels. This specifies a map of labels that should be used as additional feature flags within Slurm. Note: the value for each map key is <code>{}</code> as there is no further configuration at this time.</li>
<li><strong><code>node.image</code></strong>: Specifies which Docker image repository used to pull this node's image.</li>
</ul>
<!-- -->
<ul>
<li><strong><code>node.env</code></strong>: Sets extra environment variables to be exposed in the Compute nodes.</li>
<li><strong><code>node.gresGpu</code></strong>: Sets the <a href=https://slurm.schedmd.com/gres.html target=_blank rel="noopener noreferrer">Slurm Generic Resource Scheduling</a> value for the <code>gpu</code> <a href=https://slurm.schedmd.com/slurm.conf.html#OPT_GresTypes target=_blank rel="noopener noreferrer">GresType</a>. This describes the type and number of GPU Generic Resources for this Slurm node type.</li>
<li><strong><code>node.config</code></strong>: Add additional config options to the slurmd startup used during dynamic node registration. The features and gres options are already set. See <a href=https://slurm.schedmd.com/slurmd.html#OPT_conf-%3Cnode-parameters%3E target=_blank rel="noopener noreferrer">Node Parameters</a> and <a href=https://slurm.schedmd.com/slurm.conf.html#SECTION_NODE-CONFIGURATION target=_blank rel="noopener noreferrer">Node Configuration</a> for more details on the options and values.</li>
<li><strong><code>node.resources</code></strong>: Sets the Kubernetes Compute resource limits and requests.</li>
<li><strong><code>node.affinity</code></strong>: Sets the Kubernetes Node affinities, ensuring that the node is scheduled with a specific GPU model.</li>
<li><strong><code>node.initialState</code></strong> and <strong><code>node.initialStateReason</code></strong>: The <a href=/docs/products/sunk/reference/slurm-parameters>initial State</a> for the nodes when they join the Slurm cluster, generally <code>drain</code> or <code>idle</code>, and the <a href=/docs/products/sunk/reference/slurm-parameters>reason</a> for setting that state. These can also be applied as <a href=/docs/products/sunk/reference/slurm-parameters>a general option</a> for the cluster.</li>
<li><strong><code>node.volumeMounts</code></strong>: Additional per node definition volumeMounts to add to the primary container, same format as <code>compute.volumeMounts</code>. Mounts that match on <code>path</code> will override those set at the higher level.</li>
<li><strong><code>node.volumes</code></strong>: Additional per node definition volumes to add to the Pod, same format as <code>compute.volumes</code>. Volumes that match on <code>name</code> will override those set at the higher level.</li>
<li><strong><code>node.containers</code></strong>: Additional per node containers (e.g. sidecars) to add to the Pod. Additional configuration for these containers (such as Secrets and ConfigMaps) must be in the Slurm namespace.</li>
<li><strong><code>node.dnsPolicy</code></strong>: Adjust the dnsPolicy for each node.</li>
<li><strong><code>node.dnsConfig</code></strong>: Adjust the dnsConfig for each node.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=custom-node-definitions>Custom node definitions<a href=#custom-node-definitions class=hash-link aria-label="Direct link to Custom node definitions" title="Direct link to Custom node definitions">​</a></h2>
<p>Node definitions can reference other node definitions to include or overlay values. These "layers" can be defined in the same <code>values.yaml</code> file, or in separate files.</p>
<p>As shown in the prior example, there is a node definition named <code>reservation-id</code>:</p>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=yaml class=code_box_babA data-ch=true><div style=min-width:fit-content><div><span style=color:#569CD6>compute</span><span style=color:#E6E6E6>:</span>
</div><div>  <span style=color:#569CD6>nodes</span><span style=color:#E6E6E6>:</span>
</div><div>    <span style=color:#569CD6>reservation-id</span><span style=color:#E6E6E6>:</span>
</div><div>      <span style=color:#569CD6>affinity</span><span style=color:#E6E6E6>:</span>
</div><div>        <span style=color:#569CD6>nodeAffinity</span><span style=color:#E6E6E6>:</span>
</div><div>          <span style=color:#569CD6>requiredDuringSchedulingIgnoredDuringExecution</span><span style=color:#E6E6E6>:</span>
</div><div>            <span style=color:#569CD6>nodeSelectorTerms</span><span style=color:#E6E6E6>:</span>
</div><div>              <span style=color:#E6E6E6>-</span> <span style=color:#569CD6>matchExpressions</span><span style=color:#E6E6E6>:</span>
</div><div>                  <span style=color:#E6E6E6>-</span> <span style=color:#569CD6>key</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>node.coreweave.cloud/reserved</span>
</div><div>                    <span style=color:#569CD6>operator</span><span style=color:#E6E6E6>:</span> <span style=color:#CE9178>In</span>
</div><div>                    <span style=color:#569CD6>values</span><span style=color:#E6E6E6>:</span>
</div><div>                      <span style=color:#E6E6E6>-</span> <span style=color:#CE9178>&lt;my-reservation-id></span></div></div></pre>
<p>That layer is included in the <code>my-node-def</code> definition.</p>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=yaml class=code_box_babA data-ch=true><div style=min-width:fit-content><div><span style=color:#569CD6>compute</span><span style=color:#E6E6E6>:</span>
</div><div>  <span style=color:#569CD6>nodes</span><span style=color:#E6E6E6>:</span>
</div><div>    <span style=color:#569CD6>my-node-def</span><span style=color:#E6E6E6>:</span>
</div><div>      <span style=color:#569CD6>definitions</span><span style=color:#E6E6E6>:</span>
</div><div>      <span style=color:#E6E6E6>-</span> <span style=color:#CE9178>reservation-id</span></div></div></pre>
<p>You can store custom layers as separate values files. Any key defined under <code>compute.nodes</code> can be used, even if that key is another file, by specifying multiple values files in a defined order on the command-line.</p>
<p>For example, consider a <code>custom-compute-defs-values.yaml</code> file that only has a <code>compute.nodes</code> section with custom layers defined. The <code>values.yaml</code> file can use those definitions as long as both value files are used when deploying, like so:</p>
<div class=code_box_header_vIDO>Example<div class=copy_button_wrapper_meta_vF8q><button style="color:rgba(140, 140, 140);background-color:rgba(40, 40, 40);border-color:rgba(40, 40, 40);border-width:1px;border-style:solid;position:absolute;top:0.5rem;right:1px" aria-label="Copy to clipboard"><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="lucide lucide-clipboard"><rect width=8 height=4 x=8 y=2 rx=1 ry=1 /><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></button></div></div><pre data-theme=slack-dark data-lang=shellscript class=code_box_babA data-ch=true><div style=min-width:fit-content><div class=flex><div class="select-none true" style="color:rgb(170, 170, 255);font-weight:bold;padding-right:0.5rem">$</div><div data-mark=true><span style=color:#DCDCAA>helm</span> <span style=color:#CE9178>install slurm coreweave/slurm -f custom-compute-defs-values.yaml -f values.yaml</span></div></div></div></pre>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=mixing-cpu-and-gpu-node-types>Mixing CPU and GPU node types<a href=#mixing-cpu-and-gpu-node-types class=hash-link aria-label="Direct link to Mixing CPU and GPU node types" title="Direct link to Mixing CPU and GPU node types">​</a></h2>
<p>You can mix multiple Slurm node types by defining multiple NodeSets in different blocks under <code>compute.nodes</code>. Each NodeSet can have its own resources and affinities that specify a single type of node.</p>
<p>For example, it's possible to create a NodeSet that selects a particular type of GPU, while another selects CPU-only nodes, and then deploy any desired number of each node type.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-04-25T22:33:52.000Z itemprop=dateModified>Apr 25, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#access-slurm-compute-nodes class="table-of-contents__link toc-highlight">Access Slurm Compute nodes</a><li><a href=#the-manifest class="table-of-contents__link toc-highlight">The manifest</a><li><a href=#global-options class="table-of-contents__link toc-highlight">Global options</a><ul><li><a href=#computevolumemounts class="table-of-contents__link toc-highlight"><strong><code>compute.volumeMounts</code></strong></a><li><a href=#computevolumes class="table-of-contents__link toc-highlight"><strong><code>compute.volumes</code></strong></a><li><a href=#computes6 class="table-of-contents__link toc-highlight"><strong><code>compute.s6</code></strong></a><li><a href=#computepyxis class="table-of-contents__link toc-highlight"><strong><code>compute.pyxis</code></strong></a><li><a href=#computepartitions class="table-of-contents__link toc-highlight"><strong><code>compute.partitions</code></strong></a></ul><li><a href=#other-global-options class="table-of-contents__link toc-highlight">Other global options</a><li><a href=#node-specific-options class="table-of-contents__link toc-highlight">Node-specific options</a><li><a href=#custom-node-definitions class="table-of-contents__link toc-highlight">Custom node definitions</a><li><a href=#mixing-cpu-and-gpu-node-types class="table-of-contents__link toc-highlight">Mixing CPU and GPU node types</a></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title></div><ul class="footer__items clean-list"><li class=footer__item><p>
                       © CoreWeave.<br>
                       290 W Mt Pleasant Ave<br>
                       Suite 4100<br>
                       Livingston, NJ 07039
                     </ul></div><div class="col footer__col"><div class=footer__title></div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.coreweave.com target=_blank rel="noopener noreferrer" class=footer__link-item>Website<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://github.com/coreweave target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title></div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs/policies/terms-of-service>Policies</a><li class=footer__item><a class=footer__link-item href=/docs/pricing>Pricing</a><li class=footer__item><a class=footer__link-item href=/docs/release-notes>Release notes</a></ul></div></div></div></footer></div>